================================================================================
           OLD (BATCH) vs NEW (INSTANCE-WISE) COMPARISON
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OLD BATCH SYSTEM                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Dataset (75 instances)
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  run_infer   â”‚  â† Processes ALL instances together
    â”‚  (Model: opus)â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Single output file (mixed instances)   â”‚
    â”‚  - instance_1 trajectory                â”‚
    â”‚  - instance_2 trajectory                â”‚
    â”‚  - instance_3 trajectory                â”‚
    â”‚  ... all 75 mixed together              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Problems:
    âŒ Cannot track individual instances
    âŒ Cannot retry single failed instance
    âŒ Hard to debug specific failures
    âŒ No granular progress tracking
    âŒ All-or-nothing approach


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NEW INSTANCE-WISE SYSTEM                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Dataset (75 instances)
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Instance 1  â”‚â”€â”€â†’  run_infer  â”€â”€â†’  trajectories/opus/instance_1/
    â”‚  Instance 2  â”‚â”€â”€â†’  run_infer  â”€â”€â†’  trajectories/opus/instance_2/
    â”‚  Instance 3  â”‚â”€â”€â†’  run_infer  â”€â”€â†’  trajectories/opus/instance_3/
    â”‚     ...      â”‚         ...              ...
    â”‚  Instance 75 â”‚â”€â”€â†’  run_infer  â”€â”€â†’  trajectories/opus/instance_75/
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Each instance produces:
    â”œâ”€â”€ trajectories/opus/instance_XXX/
    â”‚   â”œâ”€â”€ output.jsonl           â† Individual trajectory
    â”‚   â””â”€â”€ eval_output.jsonl      â† Individual evaluation
    â”œâ”€â”€ logs/opus/instance_XXX.log â† Individual log
    â””â”€â”€ progress/opus_XXX.status   â† Individual status

    Benefits:
    âœ… Track each instance separately
    âœ… Retry only failed instances
    âœ… Easy debugging per instance
    âœ… Real-time per-instance progress
    âœ… Parallel execution possible
    âœ… Resume from failures


================================================================================
                            EXECUTION COMPARISON
================================================================================

OLD BATCH (run_multi_model_trajectories.sh):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Opus: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 75/75 (batch)  â”‚
â”‚  GPT:  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 75/75 (batch)  â”‚
â”‚  Kimi: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 75/75 (batch)  â”‚
â”‚  Qwen: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 75/75 (batch)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  - Each bar represents ALL 75 instances
  - No visibility into individual progress
  - One failure = unclear which instance failed


NEW INSTANCE-WISE (run_instance_wise_trajectories.sh):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Opus: [âœ“][âœ“][âœ“][âœ—][âœ“][â³][âœ“]... 68âœ“ 5âœ— 2â±                                â”‚
â”‚       â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                                 â”‚
â”‚       1  2  3  4  5  6  7... instance numbers                             â”‚
â”‚                                                                            â”‚
â”‚ GPT:  [âœ“][âœ“][âœ“][âœ“][âœ“][âœ“][âœ“]... 70âœ“ 3âœ— 2â±                                â”‚
â”‚                                                                            â”‚
â”‚ Kimi: [âœ“][âœ“][âœ—][âœ“][âœ“][âœ“][âœ“]... 72âœ“ 2âœ— 1â±                                â”‚
â”‚                                                                            â”‚
â”‚ Qwen: [âœ“][âœ“][âœ“][âœ“][âœ“][âœ“][âœ“]... 71âœ“ 4âœ— 0â±                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Legend: âœ“=Success  âœ—=Failed  â³=Timeout  â±=In Progress

  - Each box is ONE instance
  - Know EXACTLY which instances failed
  - Can retry instance 4 for Opus specifically


================================================================================
                           OUTPUT STRUCTURE COMPARISON
================================================================================

OLD (Relative Paths):                  NEW (Absolute Paths):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
evaluation/                            /home/ec2-user/VeloraTrajectories/
â””â”€â”€ outputs/                           â””â”€â”€ outputs/
    â””â”€â”€ opus_output.jsonl                  â””â”€â”€ trajectories/
        (mixed, 75 instances)                  â””â”€â”€ session_20260206_120000/
                                                   â”œâ”€â”€ opus/
                                                   â”‚   â”œâ”€â”€ instance_1/
                                                   â”‚   â”œâ”€â”€ instance_2/
                                                   â”‚   â””â”€â”€ ... (75 total)
                                                   â”œâ”€â”€ gpt/
                                                   â”œâ”€â”€ kimi/
                                                   â””â”€â”€ qwen/


================================================================================
                            FAILURE RECOVERY COMPARISON
================================================================================

OLD BATCH SYSTEM:
  Instance 42 fails â”€â”€â†’  âŒ Must rerun ALL 75 instances
                         âŒ Cannot identify which failed until end
                         âŒ Waste resources re-running successful ones

NEW INSTANCE-WISE SYSTEM:
  Instance 42 fails â”€â”€â†’  âœ… Rerun ONLY instance 42
                         âœ… Know immediately which failed
                         âœ… Save time and resources


Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session 1: Run all 75 instances                                         â”‚
â”‚   Result: 70 Success, 5 Failed                                          â”‚
â”‚                                                                          â”‚
â”‚ ./instance_trajectory_manager.py retry --create-dataset retry.jsonl     â”‚
â”‚   â†’ Creates dataset with only 5 failed instances                        â”‚
â”‚                                                                          â”‚
â”‚ Session 2: Run only 5 failed instances                                  â”‚
â”‚   Result: 4 Success, 1 Failed                                           â”‚
â”‚                                                                          â”‚
â”‚ Total: 74/75 success with minimal wasted compute!                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
                         RESOURCE USAGE COMPARISON
================================================================================

                     OLD (Batch)           NEW (Instance-wise)
                     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Memory per run       High (all 75)         Low (1 at a time)
Disk I/O             Burst                 Distributed
Failure impact       Total restart         Single retry
Monitoring           Aggregate only        Per-instance
Parallelization      None                  Configurable (1-16)
Resume capability    None                  Built-in
Success tracking     End only              Real-time


================================================================================
                              SUMMARY
================================================================================

The NEW instance-wise system is:
  ğŸ¯ More precise (track each instance)
  ğŸ”„ More resilient (retry only failures)
  âš¡ More efficient (parallel execution)
  ğŸ“Š More observable (detailed tracking)
  ğŸ› ï¸  More maintainable (absolute paths)
  ğŸš€ Production-ready (comprehensive error handling)

Ready to use: ./run_instance_wise_trajectories.sh

================================================================================
