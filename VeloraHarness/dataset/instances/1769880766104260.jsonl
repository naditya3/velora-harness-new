{"instance_id": "1769880766104260", "repo": "Expensify/App", "base_commit": "2b791c9f3053c1682ddcb50ab036deb3e55a7542", "problem_statement": "If you haven\u2019t already, check out our [contributing guidelines](https://github.com/Expensify/ReactNativeChat/blob/main/contributingGuides/CONTRIBUTING.md) for onboarding and email contributors@expensify.com to request to join our Slack channel!\\n___\\n\\n## Action Performed:\\n\\n1. Open a chat\\n2. Start a message with # then a space\\n3. Add a code block using three backticks\\n\\nYou should see the code block go bold, then normal.\\n\\n## Expected Result:\\nA code block should not show bold text.\\n\\n## Actual Result:\\nBold text appears temporarily, then reverts to normal text.\\n\\n## Workaround:\\nunknown\\n\\n## Platforms:\\n<!---\\nCheck off any platforms that are affected by this issue\\n--->\\nWhich of our officially supported platforms is this issue occurring on?\\n- [x] Android / native\\n- [x] Android / Chrome\\n- [ ] iOS / native\\n- [ ] iOS / Safari\\n- [x] MacOS / Chrome / Safari\\n- [x] MacOS / Desktop\\n\\n**Version Number:** 1.2.72-0\\n**Reproducible in staging?:** y\\n**Reproducible in production?:** y\\n**If this was caught during regression testing, add the test name, ID and link from TestRail:**\\n**Email or phone of affected tester (no customers):**\\n**Logs:** https://stackoverflow.com/c/expensify/questions/4856\\n**Notes/Photos/Videos:** \\n\\nhttps://user-images.githubusercontent.com/43996225/219246458-0b133e30-c65b-49bf-a7c4-d631f67d62c1.mov\\n\\n\\nhttps://user-images.githubusercontent.com/43996225/219246502-d75faa2f-fe7c-4105-bc62-bedbc19de6d6.mp4\\n\\n\\n**Expensify/Expensify Issue URL:**\\n**Issue reported by:** @gadhiyamanan \\n**Slack conversation:** https://expensify.slack.com/archives/C049HHMV9SM/p1672998135151449\\n\\n[View all open jobs on GitHub](https://github.com/Expensify/App/issues?q=is%3Aopen+is%3Aissue+label%3A%22Help+Wanted%22)\\n\\n<details><summary>Upwork Automation - Do Not Edit</summary>\\n    <ul>\\n        <li>Upwork Job URL: https://www.upwork.com/jobs/~014c5422ceeae647ae</li>\\n        <li>Upwork Job ID: 1626059997054926848</li>\\n        <li>Last Price Increase: 2023-03-13</li>\\n    </ul>\\n</details>", "FAIL_TO_PASS": ["issues/15193/test.py::test_issue_15193"], "PASS_TO_PASS": [], "language": "javascript", "test_command": "export ISSUE_ID=15193 && cd /app/tests && pytest issues/15193/test.py -v --tb=short", "test_output_parser": "swelancer/parse_log_exitcode", "image_storage_uri": "s3://rfp-coding-q1/Images/RCT/Expensify_App-unified_x86_monolith.tar", "patch": "diff --git a/src/libs/ReportUtils.ts b/src/libs/ReportUtils.ts\nindex 78ebdd92751..0509a26e042 100644\n--- a/src/libs/ReportUtils.ts\n+++ b/src/libs/ReportUtils.ts\n@@ -4188,6 +4188,17 @@ function getPolicyDescriptionText(policy: OnyxEntry<Policy>): string {\n     return Parser.htmlToText(policy.description);\n }\n \n+function makeInnerTextBold(text: string) {\n+    const htmlTagRegex = /<([^>]+)>(.*?)<\\/\\1>/g;\n+    const textWithoutHash = text.replace(/^#+\\s/, '');\n+    const modifiedText = textWithoutHash.replace(htmlTagRegex, (_, tag, innerText) => {\n+        return `<${tag}><b>${innerText}</b></${tag}>`;\n+    });\n+\n+    return modifiedText;\n+}\n+\n+\n function buildOptimisticAddCommentReportAction(\n     text?: string,\n     file?: FileObject,\n@@ -4199,7 +4210,11 @@ function buildOptimisticAddCommentReportAction(\n     const commentText = getParsedComment(text ?? '', {shouldEscapeText, reportID});\n     const attachmentHtml = getUploadingAttachmentHtml(file);\n \n-    const htmlForNewComment = `${commentText}${commentText && attachmentHtml ? '<br /><br />' : ''}${attachmentHtml}`;\n+    let htmlForNewComment = `${commentText}${commentText && attachmentHtml ? '<br /><br />' : ''}${attachmentHtml}`;    \n+    // If text starts with any number of # and a space, make the text inside the html tags bold\n+    if (/^#+\\s/.test(htmlForNewComment)) {\n+        htmlForNewComment = makeInnerTextBold(htmlForNewComment)\n+    }\n     const textForNewComment = Parser.htmlToText(htmlForNewComment);\n \n     const isAttachmentOnly = file && !text;\n", "test_patch": [], "hints_text": ""}
