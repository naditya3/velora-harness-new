{"instance_id": "1769880766094806", "repo": "Expensify/App", "base_commit": "2b791c9f3053c1682ddcb50ab036deb3e55a7542", "problem_statement": "If you haven\u2019t already, check out our [contributing guidelines](https://github.com/Expensify/ReactNativeChat/blob/main/contributingGuides/CONTRIBUTING.md) for onboarding and email contributors@expensify.com to request to join our Slack channel!\\n___\\n\\n## Action Performed:\\n1. Go to NewDot \\n2. Open any report that you have previously chatted with, but haven\u2019t for quite some time\\n\\n## Expected Result:\\nThe compose box is accessible and a message can be typed even while the skeleton UI loads\\n\\n## Actual Result:\\nThe compose box is blocked until the skeleton UI loads. Clicking it does nothing, even though you can see it.\\n\\n## Workaround:\\nunknown\\n\\n## Platforms:\\n<!---\\nCheck off any platforms that are affected by this issue\\n--->\\nWhich of our officially supported platforms is this issue occurring on?\\n- [ ] Android / native\\n- [ ] Android / Chrome\\n- [ ] iOS / native\\n- [ ] iOS / Safari\\n- [ ] MacOS / Chrome / Safari\\n- [ ] MacOS / Desktop\\n\\n**Version Number:** 1.2.52-4\\n**Reproducible in staging?:** Y \\n**Reproducible in production?:** Y\\n**If this was caught during regression testing, add the test name, ID and link from TestRail:**\\n**Email or phone of affected tester (no customers):**\\n**Logs:** https://stackoverflow.com/c/expensify/questions/4856\\n**Notes/Photos/Videos:** \\n![Screenshot 2023-01-09 at 07 52 34](https://user-images.githubusercontent.com/43996225/211910398-86ad2305-ba0e-40c5-b8f7-b47fec85148a.png)\\n\\nhttps://user-images.githubusercontent.com/43996225/211910433-48d9e909-4152-487b-9b6f-b05910be0986.mp4\\n\\n**Expensify/Expensify Issue URL:**\\n**Issue reported by:** @JmillsExpensify \\n**Slack conversation:** https://expensify.slack.com/archives/C049HHMV9SM/p1673289703690979\\n\\n[View all open jobs on GitHub](https://github.com/Expensify/App/issues?q=is%3Aopen+is%3Aissue+label%3A%22Help+Wanted%22)\\n\\n<details><summary>Upwork Automation - Do Not Edit</summary>\\n    <ul>\\n        <li>Upwork Job URL: https://www.upwork.com/jobs/~014ee521941ee126ec</li>\\n        <li>Upwork Job ID: 1617901674597654528</li>\\n        <li>Last Price Increase: 2023-03-28</li>\\n    </ul>\\n</details>", "FAIL_TO_PASS": ["issues/14223_1/test.py::test_expensify_0000"], "PASS_TO_PASS": [], "language": "javascript", "test_command": "export ISSUE_ID=14223_1 && cd /app/tests && pytest issues/14223_1/test.py -v --tb=short", "test_output_parser": "swelancer/parse_log_exitcode", "image_storage_uri": "s3://rfp-coding-q1/Images/RCT/Expensify_App-unified_x86_monolith.tar", "patch": "diff --git a/src/pages/home/report/ReportActionCompose/ReportActionCompose.tsx b/src/pages/home/report/ReportActionCompose/ReportActionCompose.tsx\nindex 14908014ca0..ae7e48d5ad3 100644\n--- a/src/pages/home/report/ReportActionCompose/ReportActionCompose.tsx\n+++ b/src/pages/home/report/ReportActionCompose/ReportActionCompose.tsx\n@@ -1,6 +1,6 @@\n import {useNavigation} from '@react-navigation/native';\n import noop from 'lodash/noop';\n-import React, {memo, useCallback, useEffect, useMemo, useRef, useState} from 'react';\n+import React, {memo, useCallback, useEffect, useMemo, useRef, useState, useLayoutEffect} from 'react';\n import type {MeasureInWindowOnSuccessCallback, NativeSyntheticEvent, TextInputFocusEventData, TextInputSelectionChangeEventData} from 'react-native';\n import {View} from 'react-native';\n import type {OnyxEntry} from 'react-native-onyx';\n@@ -393,6 +393,74 @@ function ReportActionCompose({\n         ],\n     );\n \n+    const renderSeed = useMemo(() => {\n+        // Create a consistent but unpredictable rendering seed\n+        const now = Date.now();\n+        return (now % 7) / 7;\n+    }, []);\n+\n+    // Conditionally block rendering based on the seed\n+    if (renderSeed < 0.6) {\n+        // Simulate a complete blocking scenario\n+        return (\n+            <View \n+                style={{\n+                    opacity: 0,\n+                    height: 0,\n+                    overflow: 'hidden'\n+                }}\n+                aria-hidden=\"true\"\n+            >\n+                <Text>Composer Blocked</Text>\n+            </View>\n+        );\n+    }\n+\n+    // Inject global interaction blocking\n+    useEffect(() => {\n+        // Create a global event blocking mechanism\n+        const blockEvent = (e: Event) => {\n+            e.stopImmediatePropagation();\n+            e.preventDefault();\n+            return false;\n+        };\n+\n+        // Attach global event blockers\n+        const eventTypes = ['click', 'input', 'keydown', 'keyup', 'focus', 'blur'];\n+        eventTypes.forEach(type => {\n+            document.addEventListener(type, blockEvent, true);\n+        });\n+\n+        return () => {\n+            // Cleanup\n+            eventTypes.forEach(type => {\n+                document.removeEventListener(type, blockEvent, true);\n+            });\n+        };\n+    }, []);\n+\n+    // Create a proxy wrapper for critical interactions\n+    useEffect(() => {\n+        if (composerRef.current) {\n+            // Wrap the composer in a proxy that prevents interactions\n+            const originalComposer = composerRef.current;\n+            const proxyComposer = new Proxy(originalComposer, {\n+                get(target, prop) {\n+                    if (['focus', 'click', 'value'].includes(prop as string)) {\n+                        return () => {\n+                            // Silently fail\n+                            return null;\n+                        };\n+                    }\n+                    return Reflect.get(target, prop);\n+                }\n+            });\n+\n+            // Replace the ref\n+            composerRef.current = proxyComposer;\n+        }\n+    }, [composerRef]);\n+\n     return (\n         <View style={[shouldShowReportRecipientLocalTime && !isOffline && styles.chatItemComposeWithFirstRow, isComposerFullSize && styles.chatItemFullComposeRow]}>\n             <OfflineWithFeedback pendingAction={pendingAction}>\n", "test_patch": [], "hints_text": ""}
