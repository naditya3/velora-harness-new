{"id": 58, "timestamp": "2026-01-30T21:10:15.944534", "source": "agent", "message": "Command `rg -n \"emoji\" /app/expensify/src` executed with exit code 0.", "cause": 57, "observation": "run", "tool_call_metadata": {"function_name": "execute_bash", "tool_call_id": "toolu_18", "model_response": {"id": "chatcmpl-089bf53c-21cd-4d8e-a1ce-d419da12da0e", "created": 1769787610, "model": "gpt-5.2-codex", "object": "chat.completion", "system_fingerprint": null, "choices": [{"finish_reason": "stop", "index": 0, "message": {"content": "", "role": "assistant", "tool_calls": [{"index": 1, "function": {"arguments": "{\"command\": \"rg -n \\\"emoji\\\" /app/expensify/src\", \"security_risk\": \"LOW\"}", "name": "execute_bash"}, "id": "toolu_18", "type": "function"}], "function_call": null}}], "usage": {"completion_tokens": 117, "prompt_tokens": 13195, "total_tokens": 13312, "completion_tokens_details": null, "prompt_tokens_details": {"audio_tokens": null, "cached_tokens": 12928, "text_tokens": null, "image_tokens": null}}}, "total_calls_in_response": 1}, "content": "/app/expensify/src/Expensify.tsx\n296:                    <EmojiPicker ref={EmojiPickerAction.emojiPickerRef} />\n\n/app/expensify/src/hooks/useBasePopoverReactionList/types.ts\n11:    /** The emoji name */\n12:    emojiName: string;\n17:    emojiReactions: OnyxEntry<ReportActionReactions>;\n\n/app/expensify/src/hooks/useBasePopoverReactionList/index.ts\n8:export default function useBasePopoverReactionList({emojiName, emojiReactions, accountID, reportActionID, preferredLocale}: BasePopoverReactionListHookProps) {\n15:        const selectedReaction = emojiReactions?.[emojiName];\n20:                emojiName: '',\n22:                emojiCodes: [],\n29:        const {emojiCodes, reactionCount, hasUserReacted, userAccountIDs} = EmojiUtils.getEmojiReactionDetails(emojiName, selectedReaction, accountID);\n33:            emojiName,\n34:            emojiCodes,\n121:        const users = emojiReactions?.[emojiName]?.users;\n128:    }, [emojiReactions, emojiName, isPopoverVisible, reportActionID, preferredLocale]);\n\n/app/expensify/src/hooks/useMarkdownStyle.ts\n11:    const emojiFontSize = hasMessageOnlyEmojis ? variables.fontSizeOnlyEmojis : variables.fontSizeEmojisWithinText;\n37:            emoji: {\n39:                fontSize: emojiFontSize,\n107:    }, [theme, emojiFontSize, excludeStyles, nonStylingDefaultValues]);\n\n/app/expensify/src/hooks/useHtmlPaste/index.ts\n146:                    // If HTML has emoji, then treat this as plain text.\n147:                    if (embeddedImages[0].dataset && embeddedImages[0].dataset.stringifyType === 'emoji') {\n\n/app/expensify/src/styles/variables.ts\n241:    emojiSize: 20,\n242:    emojiLineHeight: 28,\n\n/app/expensify/src/pages/ProfilePage.tsx\n137:    const statusEmojiCode = details?.status?.emojiCode ?? '';\n\n/app/expensify/src/pages/settings/InitialSettingsPage.tsx\n103:    const emojiCode = currentUserPersonalDetails?.status?.emojiCode ?? '';\n359:                                {emojiCode ? (\n360:                                    <Text style={styles.primaryMediumText}>{emojiCode}</Text>\n\n/app/expensify/src/pages/settings/Profile/ProfilePage.tsx\n62:    const emojiCode = currentUserPersonalDetails?.status?.emojiCode ?? '';\n82:            title: emojiCode ? `${emojiCode} ${currentUserPersonalDetails?.status?.text ?? ''}` : '',\n\n/app/expensify/src/pages/settings/Profile/CustomStatus/StatusPage.tsx\n58:    const currentUserEmojiCode = currentUserPersonalDetails?.status?.emojiCode ?? '';\n61:    const draftEmojiCode = draftStatus?.emojiCode;\n107:        ({emojiCode, statusText}: FormOnyxValues<typeof ONYXKEYS.FORMS.SETTINGS_STATUS_SET_FORM>) => {\n120:                emojiCode: !emojiCode && statusText ? initialEmoji : emojiCode,\n138:            emojiCode: '',\n218:                            onInputChange={(emoji: string): void => {}}\n\n/app/expensify/src/pages/home/sidebar/AvatarWithOptionalStatus.tsx\n11:    emojiStatus?: string;\n20:function AvatarWithOptionalStatus({emojiStatus = '', isSelected = false, containerStyle}: AvatarWithOptionalStatusProps) {\n29:                        style={styles.emojiStatusLHN}\n32:                        {emojiStatus}\n\n/app/expensify/src/pages/home/sidebar/AvatarWithDelegateAvatar.tsx\n38:                <View style={styles.emojiStatusLHN}>\n\n/app/expensify/src/pages/home/sidebar/NavigationTabBarAvatar.tsx\n33:    const emojiStatus = currentUserPersonalDetails?.status?.emojiCode ?? '';\n45:    } else if (emojiStatus) {\n48:                emojiStatus={emojiStatus}\n\n/app/expensify/src/pages/home/ReportScreenContext.ts\n11:    showReactionList: (event: ReactionListEvent | undefined, reactionListAnchor: ReactionListAnchor, emojiName: string, reportActionID: string) => void;\n\n/app/expensify/src/pages/home/report/ReportActionItem.tsx\n53:    emojiReactions?: OnyxEntry<ReportActionReactions>;\n81:    emojiReactions,\n124:            emojiReactions={emojiReactions}\n\n/app/expensify/src/pages/home/report/ReportActionItemMessageHeaderSender/index.tsx\n23:                {processedTextArray.length !== 0 ? getProcessedText(processedTextArray, styles.emojisWithTextFontSize) : fragmentText}\n\n/app/expensify/src/pages/home/report/ReportActionItemMessageEdit.tsx\n8:import type {Emoji} from '@assets/emojis/types';\n77:    /** Whether or not the emoji picker is disabled */\n112:    const emojisPresentBefore = useRef<Emoji[]>([]);\n115:            emojisPresentBefore.current = extractEmojis(draftMessage);\n130:    const emojiPickerSelectionRef = useRef<Selection | undefined>(undefined);\n166:    // We consider the report action active if it's focused, its emoji picker is open or its context menu is open\n183:            focus(true, emojiPickerSelectionRef.current ? {...emojiPickerSelectionRef.current} : undefined);\n184:            emojiPickerSelectionRef.current = undefined;\n221:            const {text: newDraft, emojis, cursorPosition} = replaceAndExtractEmojis(newDraftInput, preferredSkinTone, preferredLocale);\n223:            emojisPresentBefore.current = emojis;\n294:     * @param emoji\n296:    const addEmojiToTextBox = (emoji: string) => {\n298:            start: selection.start + emoji.length + CONST.SPACE_LENGTH,\n299:            end: selection.start + emoji.length + CONST.SPACE_LENGTH,\n308:            emojiPickerSelectionRef.current = newSelection;\n310:        updateDraft(insertText(draft, selection, `${emoji} `));\n539:                            emojiPickerID={action.reportActionID}\n\n/app/expensify/src/pages/home/report/ReportActionsListItemRenderer.tsx\n73:    emojiReactions?: OnyxEntry<ReportActionReactions>;\n93:    /** All emoji reactions collection */\n123:    emojiReactions,\n259:            emojiReactions={emojiReactions}\n\n/app/expensify/src/pages/home/report/ReportActionItemMessageHeaderSender/index.native.tsx\n22:                {processedTextArray.length !== 0 ? getProcessedText(processedTextArray, [styles.emojisWithTextFontSize, styles.emojisWithTextFontFamily]) : fragmentText}\n\n/app/expensify/src/pages/home/report/ReportActionsList.tsx\n179:    const [emojiReactions] = useOnyx(`${ONYXKEYS.COLLECTION.REPORT_ACTIONS_REACTIONS}`, {canBeMissing: true});\n633:            const actionEmojiReactions = emojiReactions?.[`${ONYXKEYS.COLLECTION.REPORT_ACTIONS_REACTIONS}${reportAction.reportActionID}`];\n665:                    emojiReactions={actionEmojiReactions}\n667:                    allEmojiReactions={emojiReactions}\n677:            emojiReactions,\n\n/app/expensify/src/pages/home/report/PureReportActionItem.tsx\n8:import type {Emoji} from '@assets/emojis/types';\n275:    /** All the emoji reactions for the report action. */\n276:    emojiReactions?: OnyxTypes.ReportActionReactions;\n305:    /** Function to toggle emoji reaction */\n413:    emojiReactions,\n679:        (emoji: Emoji, ignoreSkinToneOnCompare?: boolean) => {\n680:            toggleEmojiReaction(reportID, action, emoji, emojiReactions, undefined, ignoreSkinToneOnCompare);\n682:        [reportID, action, emojiReactions, toggleEmojiReaction],\n1366:                            emojiReactions={isOnSearch ? {} : emojiReactions}\n1368:                            toggleReaction={(emoji, ignoreSkinToneOnCompare) => {\n1376:                                    toggleReaction(emoji, ignoreSkinToneOnCompare);\n1688:        deepEqual(prevProps.emojiReactions, nextProps.emojiReactions) &&\n\n/app/expensify/src/pages/home/report/ContextMenu/BaseReportActionContextMenu.tsx\n106:    /** Function to update emoji picker state */\n\n/app/expensify/src/pages/home/report/ContextMenu/ContextMenuActions.tsx\n7:import type {Emoji} from '@assets/emojis/types';\n250:            const toggleEmojiAndCloseMenu = (emoji: Emoji, existingReactions: OnyxEntry<ReportActionReactions>) => {\n251:                toggleEmojiReaction(reportID, reportAction, emoji, existingReactions);\n\n/app/expensify/src/pages/home/report/ReportActionItemSingle.tsx\n159:    const hasEmojiStatus = !details.shouldDisplayAllActors && details.status?.emojiCode;\n222:                                >{`${details.status?.emojiCode}`}</Text>\n\n/app/expensify/src/pages/home/report/ReportActionItemParentAction.tsx\n80:    /** All emoji reactions collection */\n229:                            emojiReactions={actionEmojiReactions}\n\n/app/expensify/src/pages/home/report/ReportActionCompose/ReportActionCompose.tsx\n8:import type {Emoji} from '@assets/emojis/types';\n436:    const emojiPositionValues = useMemo(\n442:            emojiButtonHeight: styles.chatItemEmojiButton.height,\n453:    const emojiShiftVertical = useMemo(() => {\n454:        const chatItemComposeSecondaryRowHeight = emojiPositionValues.secondaryRowHeight + emojiPositionValues.secondaryRowMarginTop + emojiPositionValues.secondaryRowMarginBottom;\n455:        const reportActionComposeHeight = emojiPositionValues.composeBoxMinHeight + chatItemComposeSecondaryRowHeight;\n456:        const emojiOffsetWithComposeBox = (emojiPositionValues.composeBoxMinHeight - emojiPositionValues.emojiButtonHeight) / 2;\n457:        return reportActionComposeHeight - emojiOffsetWithComposeBox - CONST.MENU_POSITION_REPORT_ACTION_COMPOSE_BOTTOM;\n458:    }, [emojiPositionValues]);\n707:                                emojiPickerID={report?.reportID}\n708:                                shiftVertical={emojiShiftVertical}\n\n/app/expensify/src/pages/home/report/ReportActionCompose/Suggestions.tsx\n75:            const emojiSuggestions = suggestionEmojiRef.current.getSuggestions();\n76:            if (emojiSuggestions.length > 0) {\n77:                return emojiSuggestions;\n103:        const emojiHandler = suggestionEmojiRef.current?.triggerHotkeyActions(e);\n105:        return emojiHandler ?? mentionHandler;\n109:        const emojiHandler = suggestionEmojiRef.current?.onSelectionChange?.(e);\n111:        return emojiHandler;\n\n/app/expensify/src/pages/home/report/ReportActionCompose/SuggestionEmoji.tsx\n3:import type {Emoji} from '@assets/emojis/types';\n27: * Check if this piece of string looks like an emoji\n65:     * Replace the code of emoji and update selection\n71:            const emojiObject = highlightedEmojiIndexInner !== -1 ? suggestionValues.suggestedEmojis.at(highlightedEmojiIndexInner) : undefined;\n72:            const emojiCode = emojiObject?.types?.at(preferredSkinTone) && preferredSkinTone !== -1 ? emojiObject.types.at(preferredSkinTone) : emojiObject?.code;\n75:            updateComment(`${commentBeforeColon}${emojiCode} ${trimLeadingSpace(commentAfterColonWithEmojiNameRemoved)}`, true);\n77:            // In some Android phones keyboard, the text to search for the emoji is not cleared\n83:                start: suggestionValues.colonIndex + (emojiCode?.length ?? 0) + CONST.SPACE_LENGTH,\n84:                end: suggestionValues.colonIndex + (emojiCode?.length ?? 0) + CONST.SPACE_LENGTH,\n212:            emojis={suggestionValues.suggestedEmojis}\n\n/app/expensify/src/pages/home/report/ReactionList/HeaderReactionList.tsx\n16:function HeaderReactionList({emojiCodes, emojiCount, emojiName, hasUserReacted = false}: HeaderReactionListProps) {\n21:        emojiReactionListHeader,\n23:        emojiReactionListHeaderBubble,\n33:        <View style={[flexRow, justifyContentBetween, alignItemsCenter, emojiReactionListHeader, !shouldUseNarrowLayout && pt4]}>\n35:                <View style={[emojiReactionListHeaderBubble, getEmojiReactionBubbleStyle(false, hasUserReacted)]}>\n36:                    <Text style={[miniQuickEmojiReactionText, getEmojiReactionBubbleTextStyle(true)]}>{emojiCodes.join('')}</Text>\n37:                    <Text style={[reactionCounterText, getEmojiReactionCounterTextStyle(hasUserReacted)]}>{emojiCount}</Text>\n39:                <Text style={reactionListHeaderText}>{`:${EmojiUtils.getLocalizedEmojiName(emojiName, preferredLocale)}:`}</Text>\n\n/app/expensify/src/pages/home/report/ReactionList/types.ts\n5:    /** The emoji codes */\n6:    emojiCodes: string[];\n8:    /** The name of the emoji */\n9:    emojiName: string;\n11:    /** Count of the emoji reactions */\n12:    emojiCount: number;\n\n/app/expensify/src/pages/home/report/ReactionList/BaseReactionList.tsx\n42:function BaseReactionList({hasUserReacted = false, users, isVisible = false, emojiCodes, emojiCount, emojiName, onClose}: BaseReactionListProps) {\n51:     * Given an emoji item object, render a component based on its type.\n88:                emojiName={emojiName}\n89:                emojiCodes={emojiCodes}\n90:                emojiCount={emojiCount}\n\n/app/expensify/src/pages/home/report/ReportActionCompose/ComposerWithSuggestions/ComposerWithSuggestions.tsx\n19:import type {Emoji} from '@assets/emojis/types';\n245:    const emojisPresentBefore = useRef<Emoji[]>([]);\n252:            emojisPresentBefore.current = extractEmojis(draftComment);\n381:            const {text: newComment, emojis, cursorPosition} = replaceAndExtractEmojis(commentWithSpaceInserted, preferredSkinTone, preferredLocale);\n382:            if (emojis.length) {\n383:                const newEmojis = getAddedEmojis(emojis, emojisPresentBefore.current);\n385:                    // Ensure emoji suggestions are hidden after inserting emoji even when the selection is not changed\n399:            emojisPresentBefore.current = emojis;\n432:     * Callback to add whatever text is chosen into the main input (used f.e as callback for the emoji picker)\n437:            // (f.e. when emoji is being picked and 1 second still did not pass after user finished typing)\n469:            // Flag emojis like \"Wales\" have several code points. Default backspace key action does not remove such flag emojis completely.\n482:                // Wales flag has 14 UTF-16 code units. This is the emoji with the largest number of UTF-16 code units we use.\n579:     * Check if the composer is visible. Returns true if the composer is not covered up by emoji picker or menu. False otherwise.\n\n/app/expensify/src/pages/home/report/ReactionList/PopoverReactionList/BasePopoverReactionList.tsx\n17:function BasePopoverReactionList({emojiName, reportActionID, currentUserPersonalDetails}: PopoverReactionListProps, ref: ForwardedRef<Partial<ReactionListRef>>) {\n22:    const [emojiReactions] = useOnyx(`${ONYXKEYS.COLLECTION.REPORT_ACTIONS_REACTIONS}${reactionReportActionID}`, {canBeMissing: true});\n24:        emojiName,\n25:        emojiReactions,\n32:    const {emojiCodes, reactionCount, hasUserReacted, users, isReady} = getReactionInformation();\n49:                emojiName={emojiName}\n50:                emojiCodes={emojiCodes}\n51:                emojiCount={reactionCount}\n\n/app/expensify/src/pages/home/report/ReactionList/PopoverReactionList/index.tsx\n12:    const showReactionList: ReactionListRef['showReactionList'] = (event, reactionListAnchor, emojiName, reportActionID) => {\n14:        setReactionListEmojiName(emojiName);\n30:            emojiName={reactionListEmojiName}\n\n/app/expensify/src/pages/home/report/comment/TextCommentFragment.tsx\n69:    // If the only difference between fragment.text and fragment.html is <br /> tags and emoji tag\n81:            htmlContent = Str.replaceAll(htmlContent, '<emoji>', '<emoji islarge>');\n84:       \n[... Observation truncated due to length ...]\n_PICKER_ITEM_TYPES.SPACER in emoji)) {\n589:/** Splits the text with emojis into array if emojis exist in the text */\n603:    const emojisRegex = new RegExp(CONST.REGEX.EMOJIS, CONST.REGEX.EMOJIS.flags.concat('g'));\n610:        regexResult = emojisRegex.exec(text);\n\n/app/expensify/src/components/HTMLEngineProvider/BaseHTMLEngineProvider.tsx\n145:            emoji: HTMLElementModel.fromCustomModel({tagName: 'emoji', contentModel: HTMLContentModel.textual}),\n155:                    if (tnode.attributes.isemojisonly === undefined) {\n\n/app/expensify/src/components/HTMLEngineProvider/HTMLRenderers/index.ts\n39:    emoji: EmojiRenderer,\n\n/app/expensify/src/components/HTMLEngineProvider/HTMLRenderers/EmojiRenderer.tsx\n15:            return [styleProp as TextStyle, styles.emojisWithTextFontSize, styles.verticalAlignTopText];\n22:            style={[style, styles.cursorDefault, styles.emojiDefaultStyles]}\n23:            emojiCode={'data' in tnode ? tnode.data : ''}\n\n/app/expensify/src/components/RenderHTML.tsx\n19:            Parser.replace(htmlParam, {shouldEscapeText: false, filterRules: ['emoji']})\n20:                // Remove double <emoji> tag if exists and keep the outermost tag (always the original tag).\n21:                .replace(/(<emoji[^>]*>)(?:<emoji[^>]*>)+/g, '$1')\n22:                .replace(/(<\\/emoji[^>]*>)(?:<\\/emoji[^>]*>)+/g, '$1')\n\n/app/expensify/src/components/AutoCompleteSuggestions/types.ts\n46:    /** Reset the emoji suggestions */\n\n/app/expensify/src/libs/StringUtils/index.ts\n21:    // We implemented a custom emoji on this Unicode Private Use Area (PUA) code point\n42: *  Remove invisible characters from a string except for spaces and format characters for emoji, and trim it.\n47:    // We implemented a custom emoji on this Unicode Private Use Area (PUA) code point\n66:            // because some of them are used for emojis\n71:    // Remove characters from the (Cf) category that are not used for emojis\n\n/app/expensify/src/libs/ValidationUtils.ts\n365: * Checks that the provided name doesn't contain any emojis\n\n/app/expensify/src/components/EmojiWithTooltip/types.ts\n4:    emojiCode: string;\n\n/app/expensify/src/components/EmojiWithTooltip/index.ios.tsx\n6:function EmojiWithTooltip({emojiCode, style = {}, isMedium = false}: EmojiWithTooltipProps) {\n12:                <Text style={styles.emojisWithTextFontSizeAligned}>{emojiCode}</Text>\n16:        <Text style={style}>{emojiCode}</Text>\n\n/app/expensify/src/components/EmojiWithTooltip/index.tsx\n10:function EmojiWithTooltip({emojiCode, style = {}}: EmojiWithTooltipProps) {\n13:    const emoji = findEmojiByCode(emojiCode);\n14:    const emojiName = getLocalizedEmojiName(emoji?.name, preferredLocale);\n16:    const emojiTooltipContent = useCallback(\n19:                <View style={[styles.flexRow, styles.emojiTooltipWrapper]}>\n21:                        key={emojiCode}\n24:                        {emojiCode}\n27:                <Text style={[styles.textMicro, styles.fontColorReactionLabel]}>{`:${emojiName}:`}</Text>\n30:        [emojiCode, emojiName, styles.alignItemsCenter, styles.ph2, styles.flexRow, styles.emojiTooltipWrapper, styles.fontColorReactionLabel, styles.onlyEmojisText, styles.textMicro],\n34:        <Tooltip renderTooltipContent={emojiTooltipContent}>\n35:            <Text style={[style, styles.cursorDefault]}>{emojiCode}</Text>\n\n/app/expensify/src/components/EmojiWithTooltip/index.android.tsx\n7:function EmojiWithTooltip({emojiCode, style = {}}: EmojiWithTooltipProps) {\n8:    const isCustomEmoji = useMemo(() => containsCustomEmoji(emojiCode), [emojiCode]);\n10:    return <Text style={[style, isCustomEmoji && styles.customEmojiFont]}>{emojiCode}</Text>;\n\n/app/expensify/src/components/Icon/Expensicons.ts\n83:import Emoji from '@assets/images/emoji.svg';\n84:import Lightbulb from '@assets/images/emojiCategoryIcons/light-bulb.svg';\n\n/app/expensify/src/components/InlineCodeBlock/index.tsx\n15: * it checks if the child's tagName is 'emoji'. If it is, it creates an EmojiWithTooltip component\n41:        if (child.tagName === 'emoji') {\n44:                    style={[textStyles, styles.cursorDefault, styles.emojiDefaultStyles]}\n46:                    emojiCode={child.data}\n\n/app/expensify/src/components/LocaleContextProvider.tsx\n2:import {importEmojiLocale} from '@assets/emojis';\n107:        // For locales without emoji support, fallback on English\n\n/app/expensify/src/components/Reactions/AddReactionBubble.tsx\n3:import type {Emoji} from '@assets/emojis/types';\n14:import {emojiPickerRef, resetEmojiPopoverAnchor, showEmojiPicker} from '@userActions/EmojiPickerAction';\n38:     * Called when the user selects an emoji.\n40:    onSelectEmoji: (emoji: Emoji) => void;\n47:    /** Function to update emoji picker state */\n65:                (emojiCode, emojiObject) => {\n66:                    onSelectEmoji(emojiObject);\n75:        if (!emojiPickerRef.current?.isEmojiPickerVisible) {\n84:            emojiPickerRef.current.hideEmojiPicker();\n89:        <Tooltip text={translate('emojiReactions.addReactionTooltip')}>\n92:                style={({hovered, pressed}) => [styles.emojiReactionBubble, styles.userSelectNone, StyleUtils.getEmojiReactionBubbleStyle(hovered || pressed, false, isContextMenu)]}\n103:                accessibilityLabel={translate('emojiReactions.addReactionTooltip')}\n112:               emoji reaction. We make the text invisible and put the\n\n/app/expensify/src/components/Reactions/ReactionTooltipContent.tsx\n11:     * A list of emoji codes to display in the tooltip.\n13:    emojiCodes: string[];\n16:     * The name of the emoji to display in the tooltip.\n18:    emojiName: string;\n26:function ReactionTooltipContent({accountIDs, currentUserPersonalDetails, emojiCodes, emojiName}: ReactionTooltipContentProps) {\n42:                {emojiCodes.map((emojiCode) => (\n44:                        key={emojiCode}\n47:                        {emojiCode}\n54:            <Text style={[styles.textMicro, styles.fontColorReactionLabel]}>{`${translate('emojiReactions.reactedWith')} :${emojiName}:`}</Text>\n\n/app/expensify/src/components/Reactions/MiniQuickEmojiReactions.tsx\n3:import type {Emoji} from '@assets/emojis/types';\n15:import {emojiPickerRef, showEmojiPicker} from '@userActions/EmojiPickerAction';\n25:     * Will be called when the user closed the emoji picker\n26:     * without selecting an emoji.\n33: * emoji picker icon button. This is used for the mini\n43:    const [emojiReactions = getEmptyObject<ReportActionReactions>()] = useOnyx(`${ONYXKEYS.COLLECTION.REPORT_ACTIONS_REACTIONS}${reportActionID}`, {canBeMissing: true});\n49:            (emojiCode, emojiObject) => {\n50:                onEmojiSelected(emojiObject, emojiReactions);\n61:            {CONST.QUICK_REACTIONS.slice(0, 3).map((emoji: Emoji) => (\n63:                    key={emoji.name}\n65:                    tooltipText={`:${getLocalizedEmojiName(emoji.name, preferredLocale)}:`}\n66:                    onPress={callFunctionIfActionIsAllowed(() => onEmojiSelected(emoji, emojiReactions))}\n72:                        {getPreferredEmojiCode(emoji, preferredSkinTone)}\n79:                    if (!emojiPickerRef.current?.isEmojiPickerVisible) {\n82:                        emojiPickerRef.current?.hideEmojiPicker();\n86:                tooltipText={translate('emojiReactions.addReactionTooltip')}\n\n/app/expensify/src/components/Reactions/EmojiReactionBubble.tsx\n13:     * The emoji codes to display in the bubble.\n15:    emojiCodes: string[];\n41:    /** We disable reacting with emojis on report actions that have errors */\n46:    {onPress, onReactionListOpen = () => {}, emojiCodes, hasUserReacted = false, count = 0, isContextMenu = false, shouldBlockReactions = false}: EmojiReactionBubbleProps,\n56:                styles.emojiReactionBubble,\n72:                // Allow text input blur when emoji reaction is right clicked\n77:                // Prevent text input blur when emoji reaction is left clicked\n81:            accessibilityLabel={emojiCodes.join('')}\n85:            <Text style={[styles.emojiReactionBubbleText, StyleUtils.getEmojiReactionBubbleTextStyle(isContextMenu)]}>{emojiCodes.join('')}</Text>\n\n/app/expensify/src/components/Reactions/ReportActionItemEmojiReactions.tsx\n5:import type {Emoji} from '@assets/emojis/types';\n22:    /** All the emoji reactions for the report action. */\n23:    emojiReactions: OnyxEntry<ReportActionReactions>;\n32:     * Function to call when the user presses on an emoji.\n33:     * This can also be an emoji the user already reacted with,\n34:     * hence this function asks to toggle the reaction by emoji.\n36:    toggleReaction: (emoji: Emoji, ignoreSkinToneOnCompare?: boolean) => void;\n38:    /** We disable reacting with emojis on report actions that have errors */\n41:    /** Function to update emoji picker state */\n48:    /** The emoji codes to display in the bubble */\n49:    emojiCodes: string[];\n60:    /** Oldest timestamp of when the emoji was added */\n69:    /** The name of the emoji */\n82:    emojiReactions = {},\n93:    // Each emoji is sorted by the oldest timestamp of user reactions so that they will always appear in the same order for everyone\n95:        Object.entries(emojiReactions ?? {}).map(([emojiName, emojiReaction]) => {\n96:            const {emoji, emojiCodes, reactionCount, hasUserReacted, userAccountIDs, oldestTimestamp} = getEmojiReactionDetails(\n97:                emojiName,\n98:                emojiReaction,\n107:                toggleReaction(emoji, true);\n111:                reactionListRef?.current?.showReactionList(event, popoverReactionListAnchors.current[emojiName], emojiName, reportActionID);\n115:                emojiCodes,\n122:                reactionEmojiName: emojiName,\n123:                pendingAction: emojiReaction.pendingAction,\n142:                                    emojiName={getLocalizedEmojiName(reaction.reactionEmojiName, preferredLocale)}\n143:                                    emojiCodes={reaction.emojiCodes}\n148:                            renderTooltipContentKey={[...reaction.userAccountIDs.map(String), ...reaction.emojiCodes]}\n161:                                        emojiCodes={reaction.emojiCodes}\n\n/app/expensify/src/components/Reactions/QuickEmojiReactions/BaseQuickEmojiReactions.tsx\n3:import type {Emoji} from '@assets/emojis/types';\n29:    const [emojiReactions = getEmptyObject<ReportActionReactions>()] = useOnyx(`${ONYXKEYS.COLLECTION.REPORT_ACTIONS_REACTIONS}${reportActionID}`, {canBeMissing: true});\n33:            {CONST.QUICK_REACTIONS.map((emoji: Emoji) => (\n35:                    text={`:${getLocalizedEmojiName(emoji.name, preferredLocale)}:`}\n36:                    key={emoji.name}\n40:                            emojiCodes={[getPreferredEmojiCode(emoji, preferredSkinTone)]}\n42:                            onPress={callFunctionIfActionIsAllowed(() => onEmojiSelected(emoji, emojiReactions))}\n51:                onSelectEmoji={(emoji) => onEmojiSelected(emoji, emojiReactions)}\n\n/app/expensify/src/components/Reactions/QuickEmojiReactions/types.ts\n4:import type {Emoji} from '@assets/emojis/types';\n15:    /** Callback to fire when an emoji is selected. */\n16:    onEmojiSelected: (emoji: Emoji, emojiReactions: OnyxEntry<ReportActionReactions>) => void;\n19:     * Will be called when the emoji picker is about to show.\n24:     * Callback to fire when the \"open emoji picker\" button is pressed.\n26:     * to actually open the emoji picker.\n36:    /** Function to update emoji picker state */\n\n/app/expensify/src/ONYXKEYS.ts\n208:    /** Store preferred skin tone for emoji */\n211:    /** Store frequently used emojis for this user */\n\n/app/expensify/src/languages/ja.ts\n835:        emoji: 'Emoji',\n858:    emojiReactions: {\n5683:    emojiPicker: {\n\n/app/expensify/src/languages/en.ts\n825:        emoji: 'Emoji',\n848:    emojiReactions: {\n2664:        statusExplanation: \"Add an emoji to give your colleagues and friends an easy way to know what's going on. You can optionally add a message too!\",\n5677:    emojiPicker: {\n\n/app/expensify/src/languages/fr.ts\n837:        emoji: 'Emoji',\n861:    emojiReactions: {\n2666:        statusExplanation: 'Ajoutez un emoji pour donner \u00e0 vos coll\u00e8gues et amis un moyen facile de savoir ce qui se passe. Vous pouvez \u00e9galement ajouter un message si vous le souhaitez !',\n5716:    emojiPicker: {\n\n/app/expensify/src/languages/it.ts\n834:        emoji: 'Emoji',\n857:    emojiReactions: {\n2677:        statusExplanation: \"Aggiungi un'emoji per dare ai tuoi colleghi e amici un modo semplice per sapere cosa sta succedendo. Puoi anche aggiungere un messaggio opzionale!\",\n5716:    emojiPicker: {\n\n/app/expensify/src/types/form/SettingsStatusSetForm.ts\n5:    EMOJI_CODE: 'emojiCode',\n\n/app/expensify/src/types/onyx/FrequentlyUsedEmoji.ts\n1:/** Model of frequently used emoji */\n3:    /** The emoji code */\n6:    /** The name of the emoji */\n9:    /** The number of times the emoji has been used */\n12:    /** The timestamp in UNIX format when the emoji was last used */\n15:    /** The emoji skin tone type */\n18:    /** The emoji keywords */\n\n/app/expensify/src/languages/pl.ts\n834:        emoji: 'Emoji',\n857:    emojiReactions: {\n2679:        statusExplanation: 'Dodaj emoji, aby u\u0142atwi\u0107 kolegom i znajomym zrozumienie, co si\u0119 dzieje. Mo\u017cesz opcjonalnie doda\u0107 wiadomo\u015b\u0107!',\n5700:    emojiPicker: {\n\n/app/expensify/src/types/onyx/CustomStatusDraft.ts\n3:    /** The emoji code of the draft status */\n4:    emojiCode?: string;\n\n/app/expensify/src/languages/pt-BR.ts\n834:        emoji: 'Emoji',\n858:    emojiReactions: {\n2683:        statusExplanation: 'Adicione um emoji para dar aos seus colegas e amigos uma maneira f\u00e1cil de saber o que est\u00e1 acontecendo. Voc\u00ea tamb\u00e9m pode adicionar uma mensagem, se quiser!',\n5712:    emojiPicker: {\n\n/app/expensify/src/types/onyx/ReportActionReactions.ts\n11:    /** Oldest timestamp of when the emoji was added */\n20:    /** The time the emoji was added */\n23:    /** Oldest timestamp of when the emoji was added */\n26:    /** All the users who have added this emoji */\n30:/** Record of report action reactions, indexed by emoji name */\n\n/app/expensify/src/types/onyx/PersonalDetails.ts\n20:    /** The emoji code of the status */\n21:    emojiCode: string;\n\n/app/expensify/src/languages/es.ts\n816:        emoji: 'Emoji',\n840:    emojiReactions: {\n2633:        statusExplanation: 'A\u00f1ade un emoji para que tus colegas y amigos puedan saber f\u00e1cilmente qu\u00e9 est\u00e1 pasando. \u00a1Tambi\u00e9n puedes a\u00f1adir un mensaje opcionalmente!',\n5694:    emojiPicker: {\n\n/app/expensify/src/languages/nl.ts\n833:        emoji: 'Emoji',\n857:    emojiReactions: {\n2684:        statusExplanation: \"Voeg een emoji toe om je collega's en vrienden een gemakkelijke manier te geven om te weten wat er aan de hand is. Je kunt optioneel ook een bericht toevoegen!\",\n5711:    emojiPicker: {\n\n/app/expensify/src/languages/de.ts\n835:        emoji: 'Emoji',\n858:    emojiReactions: {\n5704:    emojiPicker: {\n\n/app/expensify/src/languages/zh-hans.ts\n833:        emoji: 'Emoji',\n856:    emojiReactions: {\n5608:    emojiPicker: {", "extras": {"command": "rg -n \"emoji\" /app/expensify/src", "metadata": {"exit_code": 0, "pid": -1, "username": "root", "hostname": "b506651eefd9", "working_dir": "/workspace", "py_interpreter_path": "/openhands/micromamba/envs/openhands/bin/python", "prefix": "", "suffix": "\n[The command completed with exit code 0.]"}, "hidden": false}, "success": true}