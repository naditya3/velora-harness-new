{"instance_id": "2799805886880019", "repo": "lyz-code/pydo", "base_commit": "5cff11377d504b7b9d215455445a79d15ec9fb6e", "problem_statement": "Allow modification of resources:\\nAllow the modifications of resources from the cli. We should be able to modify:\\r\\n\\r\\n* Task attributes\\r\\n* Project attributes\\r\\n* Tag attributes", "FAIL_TO_PASS": ["tests/test_cli.py::TestArgparse::test_can_specify_modify_subcommand", "tests/test_cli.py::TestArgparse::test_can_specify_project_in_modify_subcommand"], "PASS_TO_PASS": ["tests/test_fulids.py::Testfulid::test_fulid_has_charset_attribute", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_friday", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_minutes", "tests/test_fulids.py::Testfulid::test_fulid_does_not_accept_invalid_terminal_characters", "tests/test_manager.py::TestDateManager::test_next_monthday_first_day_of_month", "tests/test_fulids.py::Testfulid::test_expand_sulid_returns_fulid_if_no_coincidence", "tests/test_models.py::TestTag::test_attributes_defined", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_yesterday", "tests/test_fulids.py::Testfulid::test_fulid_has_forbidden_charset_attribute_set_by_default", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_tue", "tests/test_fulids.py::Testfulid::test_fulid_generates_an_ulid_with_the_id_in_charset", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_days", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_combination_of_strings", "tests/test_fulids.py::Testfulid::test_encode_number_supports_base_different_than_10", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_years", "tests/test_fulids.py::Testfulid::test_fulid_sets_the_fulid_attribute", "tests/test_manager.py::TestDateManager::test_next_weekday_if_starting_weekday_is_greater", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_hours", "tests/test_fulids.py::Testfulid::test_string_to_number_can_decode_number", "tests/test_fulids.py::Testfulid::test_fulid_new_returns_sequential_id", "tests/test_manager.py::TestDateManager::test_next_weekday_if_starting_weekday_is_smaller", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_weeks", "tests/test_fulids.py::Testfulid::test_short_fulids_returns_two_characters_if_coincidence_in_first", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_saturday", "tests/test_cli.py::TestArgparse::test_can_specify_projects_subcommand", "tests/test_fulids.py::Testfulid::test_contract_ulid_errors_if_not_found", "tests/test_models.py::TestProject::test_attributes_defined", "tests/test_fulids.py::Testfulid::test_fulid_can_set_fulid_attribute", "tests/test_cli.py::TestArgparse::test_can_specify_tags_subcommand", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_now", "tests/test_fulids.py::Testfulid::test_fulid_returns_randomness", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_thursdday", "tests/test_fulids.py::Testfulid::test_fulid_from_str_generates_fulid", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_sun", "tests/test_fulids.py::Testfulid::test_fulid_new_returns_first_fulid_if_last_fulid_is_none", "tests/test_fulids.py::Testfulid::test_fulid_can_set_forbidden_charset_attribute", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_months", "tests/test_fulids.py::Testfulid::test_contract_fulid_returns_sulid", "tests/test_fulids.py::Testfulid::test_encode_number_returns_expected_string", "tests/test_fulids.py::Testfulid::test_fulid_has_forbidden_charset_attribute", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_tomorrow", "tests/test_fulids.py::Testfulid::test_fulid_has_fulid_attribute_none_by_default", "tests/test_manager.py::TestDateManager::test_next_monthday_second_day_of_month", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_wednesday", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_sat", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_months_if_on_31", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_monday", "tests/test_cli.py::TestArgparse::test_can_specify_delete_subcommand", "tests/test_fulids.py::Testfulid::test_fulid_returns_timestamp", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_wed", "tests/test_fulids.py::Testfulid::test_short_fulids_returns_one_character_if_no_coincidence", "tests/test_manager.py::TestDateManager::test_next_monthday_if_5_monthday", "tests/test_manager.py::TestDateManager::test_next_weekday_if_weekday_is_equal", "tests/test_fulids.py::Testfulid::test_fulid_has_charset_attribute_set_by_default", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_date_year_month_day", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_thu", "tests/test_cli.py::TestArgparse::test_can_specify_list_subcommand", "tests/test_cli.py::TestArgparse::test_can_specify_done_subcommand", "tests/test_fulids.py::Testfulid::test_representation", "tests/test_cli.py::TestArgparse::test_can_specify_project_in_add_subcommand", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_seconds", "tests/test_fulids.py::Testfulid::test_expand_sulid_errors_if_there_is_more_than_one_coincidence", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_tuesday", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_date_year_month_day_hour_min", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_sunday", "tests/test_cli.py::TestArgparse::test_can_specify_add_subcommand", "tests/test_fulids.py::Testfulid::test_string_to_number_can_decode_fulid_id", "tests/test_fulids.py::Testfulid::test_fulid_new_generates_an_fulid_object", "tests/test_fulids.py::Testfulid::test_encode_number_supports_padding", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_1mo", "tests/test_fulids.py::Testfulid::test_fulid_returns_id", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_1d", "tests/test_models.py::TestConfig::test_attributes_defined", "tests/test_cli.py::TestArgparse::test_can_specify_install_subcommand", "tests/test_fulids.py::Testfulid::test_fulid_can_set_charset_attribute", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_fri", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_1rmo", "tests/test_fulids.py::Testfulid::test_string_to_number_raises_error_if_char_not_in_charset", "tests/test_manager.py::TestDateManager::test_convert_date_accepts_mon", "tests/test_manager.py::TestDateManager::test_if_str2date_loads_relative_months"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/lyz-code_pydo:5cff11377d504b7b9d215455445a79d15ec9fb6e", "patch": "[\"diff --git a/pydo/__init__.py b/pydo/__init__.py\\nindex 44b2683..b6cd727 100644\\n--- a/pydo/__init__.py\\n+++ b/pydo/__init__.py\\n@@ -37,7 +37,7 @@ def main():\\n \\n     if args.subcommand == 'install':\\n         install(session, logging.getLogger('main'))\\n-    elif args.subcommand in ['add', 'del', 'done']:\\n+    elif args.subcommand in ['add', 'modify', 'del', 'done']:\\n         task_manager = TaskManager(session)\\n \\n         if args.subcommand == 'add':\\n@@ -45,6 +45,12 @@ def main():\\n             task_manager.add(\\n                 **attributes\\n             )\\n+        elif args.subcommand == 'modify':\\n+            attributes = task_manager._parse_arguments(args.modify_argument)\\n+            task_manager.modify(\\n+                args.ulid,\\n+                **attributes\\n+            )\\n         elif args.subcommand == 'del':\\n             task_manager.delete(id=args.ulid)\\n         elif args.subcommand == 'done':\\n\",\"diff --git a/pydo/cli.py b/pydo/cli.py\\nindex 7d88e89..a7e0a39 100644\\n--- a/pydo/cli.py\\n+++ b/pydo/cli.py\\n@@ -33,6 +33,20 @@ def load_parser():\\n         nargs=argparse.REMAINDER,\\n     )\\n \\n+    modify_parser = subparser.add_parser('modify')\\n+    modify_parser.add_argument(\\n+        \\\"ulid\\\",\\n+        type=str,\\n+        help='Task ulid',\\n+    )\\n+    modify_parser.add_argument(\\n+        \\\"modify_argument\\\",\\n+        type=str,\\n+        help='Task modify arguments',\\n+        default=None,\\n+        nargs=argparse.REMAINDER,\\n+    )\\n+\\n     delete_parser = subparser.add_parser('del')\\n     delete_parser.add_argument(\\n         \\\"ulid\\\",\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 39b3cb3..9cf615f 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -102,6 +102,7 @@ class TableManager:\\n     Internal methods:\\n         _add: Method to create a new table item\\n         _get: Retrieve the table element identified by id.\\n+        _update: Method to update an existing table item\\n \\n     Public attributes:\\n         session (session object): Database session\\n@@ -158,6 +159,33 @@ def _get(self, id):\\n         else:\\n             return table_element\\n \\n+    def _update(self, id, object_values=None):\\n+        \\\"\\\"\\\"\\n+        Method to update an existing table item\\n+\\n+        Arguments:\\n+            id (str): object identifier\\n+            object_values (dict): Dictionary with the column identifier\\n+                as keys.\\n+        \\\"\\\"\\\"\\n+\\n+        table_element = self.session.query(self.model).get(id)\\n+\\n+        if table_element is None:\\n+            raise ValueError('The element {} does not exist'.format(id))\\n+        else:\\n+            if object_values is not None:\\n+                for attribute_key, attribute_value in object_values.items():\\n+                    setattr(table_element, attribute_key, attribute_value)\\n+\\n+            self.session.commit()\\n+            self.log.debug(\\n+                'Modified {}: {}'.format(\\n+                    id,\\n+                    object_values,\\n+                )\\n+            )\\n+\\n \\n class TaskManager(TableManager):\\n     \\\"\\\"\\\"\\n@@ -213,6 +241,7 @@ def _parse_arguments(self, add_arguments):\\n             'priority': None,\\n             'project_id': None,\\n             'tags': [],\\n+            'tags_rm': [],\\n             'value': None,\\n             'willpower': None,\\n         }\\n@@ -237,6 +266,8 @@ def _parse_arguments(self, add_arguments):\\n                 attributes['body'] = argument.split(':')[1]\\n             elif re.match(r'^\\\\+', argument):\\n                 attributes['tags'].append(argument.replace('+', ''))\\n+            elif re.match(r'^\\\\-', argument):\\n+                attributes['tags_rm'].append(argument.replace('-', ''))\\n             else:\\n                 attributes['title'].append(argument)\\n         attributes['title'] = ' '.join(attributes['title'])\\n@@ -330,6 +361,113 @@ def add(\\n             task_attributes['title'],\\n         )\\n \\n+    def modify(\\n+        self,\\n+        id,\\n+        title=None,\\n+        agile=None,\\n+        body=None,\\n+        due=None,\\n+        estimate=None,\\n+        fun=None,\\n+        state=None,\\n+        priority=None,\\n+        project_id=None,\\n+        tags=[],\\n+        tags_rm=[],\\n+        value=None,\\n+        willpower=None,\\n+    ):\\n+        \\\"\\\"\\\"\\n+        Use parent method to modify an existing task\\n+\\n+        Arguments:\\n+            agile (str): Task agile state.\\n+            title (str): Title of the task.\\n+            body (str): Description of the task.\\n+            estimate (float): Estimate size of the task.\\n+            fun (int): Fun size of the task.\\n+            state (str): State of the task once it's closed\\n+            priority (int): Task priority.\\n+            project_id (str): Project id.\\n+            tags (list): List of tag ids.\\n+            tags_rm (list): List of tag ids to remove.\\n+            title (str): Title of the task.\\n+            value (int): Objective/Bussiness value of the task.\\n+            willpower (int): Willpower consumption of the task.\\n+        \\\"\\\"\\\"\\n+        if len(id) < 10:\\n+            open_tasks = self.session.query(Task).filter_by(state='open')\\n+            open_task_fulids = [task.id for task in open_tasks]\\n+            self.log.debug(open_task_fulids)\\n+            self.log.debug(id)\\n+            id = self.fulid.sulid_to_fulid(id, open_task_fulids)\\n+\\n+        task = self.session.query(Task).get(id)\\n+        task_attributes = {}\\n+\\n+        # Define Project\\n+        if project_id is not None:\\n+            project = self.session.query(Project).get(project_id)\\n+            if project is None:\\n+                project = Project(id=project_id, description='')\\n+                self.session.add(project)\\n+                self.session.commit()\\n+            task_attributes['project'] = project\\n+\\n+        # Define tags\\n+        task_attributes['tags'] = task.tags\\n+\\n+        for tag_id in tags_rm:\\n+            tag = self.session.query(Tag).get(tag_id)\\n+            if tag is None:\\n+                tag = Tag(id=tag_id, description='')\\n+                self.session.add(tag)\\n+                self.session.commit()\\n+            task_attributes['tags'].remove(tag)\\n+\\n+        for tag_id in tags:\\n+            tag = self.session.query(Tag).get(tag_id)\\n+            if tag is None:\\n+                tag = Tag(id=tag_id, description='')\\n+                self.session.add(tag)\\n+                self.session.commit()\\n+            task_attributes['tags'].append(tag)\\n+\\n+        # Test the task attributes are into the available choices\\n+        if agile is not None and \\\\\\n+                agile not in self.config.get('task.agile.states').split(', '):\\n+            raise ValueError(\\n+                'Agile state {} is not between the specified '\\n+                'by task.agile.states'.format(agile)\\n+            )\\n+\\n+        if agile is not None:\\n+            task_attributes['agile'] = agile\\n+        if body is not None:\\n+            task_attributes['body'] = body\\n+        if due is not None:\\n+            task_attributes['due'] = due\\n+        if title is not None:\\n+            task_attributes['title'] = title\\n+        if estimate is not None:\\n+            task_attributes['estimate'] = estimate\\n+        if fun is not None:\\n+            task_attributes['fun'] = fun\\n+        if state is not None:\\n+            task_attributes['state'] = state\\n+        if priority is not None:\\n+            task_attributes['priority'] = priority\\n+        if value is not None:\\n+            task_attributes['value'] = value\\n+        if willpower is not None:\\n+            task_attributes['willpower'] = willpower\\n+\\n+        self._update(\\n+            id,\\n+            task_attributes,\\n+        )\\n+\\n     def _close(self, id, state):\\n         \\\"\\\"\\\"\\n         Method to close a task\\n\",\"diff --git a/.github/workflows/pythonpackage.yml b/.github/workflows/pythonpackage.yml\\nindex 3f42b14..28e497e 100644\\n--- a/.github/workflows/pythonpackage.yml\\n+++ b/.github/workflows/pythonpackage.yml\\n@@ -1,6 +1,6 @@\\n name: Python package\\n \\n-on: [push]\\n+on: [push, pull_request]\\n \\n jobs:\\n   build:\\n\",\"diff --git a/pydo/cli.py b/pydo/cli.py\\nindex a7e0a39..bd06eda 100644\\n--- a/pydo/cli.py\\n+++ b/pydo/cli.py\\n@@ -33,7 +33,7 @@ def load_parser():\\n         nargs=argparse.REMAINDER,\\n     )\\n \\n-    modify_parser = subparser.add_parser('modify')\\n+    modify_parser = subparser.add_parser('mod')\\n     modify_parser.add_argument(\\n         \\\"ulid\\\",\\n         type=str,\\n\",\"diff --git a/pydo/__init__.py b/pydo/__init__.py\\nindex b6cd727..79f8fa5 100644\\n--- a/pydo/__init__.py\\n+++ b/pydo/__init__.py\\n@@ -37,7 +37,7 @@ def main():\\n \\n     if args.subcommand == 'install':\\n         install(session, logging.getLogger('main'))\\n-    elif args.subcommand in ['add', 'modify', 'del', 'done']:\\n+    elif args.subcommand in ['add', 'mod', 'del', 'done']:\\n         task_manager = TaskManager(session)\\n \\n         if args.subcommand == 'add':\\n@@ -45,7 +45,7 @@ def main():\\n             task_manager.add(\\n                 **attributes\\n             )\\n-        elif args.subcommand == 'modify':\\n+        elif args.subcommand == 'mod':\\n             attributes = task_manager._parse_arguments(args.modify_argument)\\n             task_manager.modify(\\n                 args.ulid,\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 9cf615f..d77716d 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -364,37 +364,21 @@ def add(\\n     def modify(\\n         self,\\n         id,\\n-        title=None,\\n-        agile=None,\\n-        body=None,\\n-        due=None,\\n-        estimate=None,\\n-        fun=None,\\n-        state=None,\\n-        priority=None,\\n         project_id=None,\\n         tags=[],\\n         tags_rm=[],\\n-        value=None,\\n-        willpower=None,\\n+        agile=None,\\n+        **kwargs\\n     ):\\n         \\\"\\\"\\\"\\n         Use parent method to modify an existing task\\n \\n         Arguments:\\n-            agile (str): Task agile state.\\n-            title (str): Title of the task.\\n-            body (str): Description of the task.\\n-            estimate (float): Estimate size of the task.\\n-            fun (int): Fun size of the task.\\n-            state (str): State of the task once it's closed\\n-            priority (int): Task priority.\\n             project_id (str): Project id.\\n             tags (list): List of tag ids.\\n             tags_rm (list): List of tag ids to remove.\\n-            title (str): Title of the task.\\n-            value (int): Objective/Bussiness value of the task.\\n-            willpower (int): Willpower consumption of the task.\\n+            agile (str): Task agile state.\\n+            **kwargs: (object) Other attributes (key: value).\\n         \\\"\\\"\\\"\\n         if len(id) < 10:\\n             open_tasks = self.session.query(Task).filter_by(state='open')\\n@@ -444,24 +428,9 @@ def modify(\\n \\n         if agile is not None:\\n             task_attributes['agile'] = agile\\n-        if body is not None:\\n-            task_attributes['body'] = body\\n-        if due is not None:\\n-            task_attributes['due'] = due\\n-        if title is not None:\\n-            task_attributes['title'] = title\\n-        if estimate is not None:\\n-            task_attributes['estimate'] = estimate\\n-        if fun is not None:\\n-            task_attributes['fun'] = fun\\n-        if state is not None:\\n-            task_attributes['state'] = state\\n-        if priority is not None:\\n-            task_attributes['priority'] = priority\\n-        if value is not None:\\n-            task_attributes['value'] = value\\n-        if willpower is not None:\\n-            task_attributes['willpower'] = willpower\\n+\\n+        for key, value in kwargs.items():\\n+            task_attributes[key] = value\\n \\n         self._update(\\n             id,\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex d77716d..c502e58 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -273,6 +273,83 @@ def _parse_arguments(self, add_arguments):\\n         attributes['title'] = ' '.join(attributes['title'])\\n         return attributes\\n \\n+    def _set(\\n+        self,\\n+        id,\\n+        project_id=None,\\n+        tags=[],\\n+        tags_rm=[],\\n+        agile=None,\\n+        **kwargs\\n+    ):\\n+        \\\"\\\"\\\"\\n+        Method to set the task's attributes and get its fulid\\n+\\n+        Arguments:\\n+            id (str): Ulid of the task\\n+            project_id (str): Project id.\\n+            tags (list): List of tag ids.\\n+            tags_rm (list): List of tag ids to remove.\\n+            agile (str): Task agile state.\\n+            **kwargs: (object) Other attributes (key: value).\\n+\\n+        Returns:\\n+            fulid (str): fulid that match the sulid.\\n+            task_attributes (dict): Dictionary with the attributes of the task.\\n+        \\\"\\\"\\\"\\n+\\n+        if len(id) < 10:\\n+            open_tasks = self.session.query(Task).filter_by(state='open')\\n+            open_task_fulids = [task.id for task in open_tasks]\\n+            fulid = self.fulid.sulid_to_fulid(id, open_task_fulids)\\n+\\n+        task = self.session.query(Task).get(fulid)\\n+        task_attributes = {}\\n+\\n+        # Define Project\\n+        if project_id is not None:\\n+            project = self.session.query(Project).get(project_id)\\n+            if project is None:\\n+                project = Project(id=project_id, description='')\\n+                self.session.add(project)\\n+                self.session.commit()\\n+            task_attributes['project'] = project\\n+\\n+        # Define tags\\n+        task_attributes['tags'] = task.tags\\n+\\n+        for tag_id in tags_rm:\\n+            tag = self.session.query(Tag).get(tag_id)\\n+            if tag is None:\\n+                tag = Tag(id=tag_id, description='')\\n+                self.session.add(tag)\\n+                self.session.commit()\\n+            task_attributes['tags'].remove(tag)\\n+\\n+        for tag_id in tags:\\n+            tag = self.session.query(Tag).get(tag_id)\\n+            if tag is None:\\n+                tag = Tag(id=tag_id, description='')\\n+                self.session.add(tag)\\n+                self.session.commit()\\n+            task_attributes['tags'].append(tag)\\n+\\n+        # Test the task attributes are into the available choices\\n+        if agile is not None and \\\\\\n+                agile not in self.config.get('task.agile.states').split(', '):\\n+            raise ValueError(\\n+                'Agile state {} is not between the specified '\\n+                'by task.agile.states'.format(agile)\\n+            )\\n+\\n+        if agile is not None:\\n+            task_attributes['agile'] = agile\\n+\\n+        for key, value in kwargs.items():\\n+            task_attributes[key] = value\\n+\\n+        return fulid, task_attributes\\n+\\n     def add(\\n         self,\\n         title,\\n@@ -380,60 +457,15 @@ def modify(\\n             agile (str): Task agile state.\\n             **kwargs: (object) Other attributes (key: value).\\n         \\\"\\\"\\\"\\n-        if len(id) < 10:\\n-            open_tasks = self.session.query(Task).filter_by(state='open')\\n-            open_task_fulids = [task.id for task in open_tasks]\\n-            self.log.debug(open_task_fulids)\\n-            self.log.debug(id)\\n-            id = self.fulid.sulid_to_fulid(id, open_task_fulids)\\n-\\n-        task = self.session.query(Task).get(id)\\n-        task_attributes = {}\\n-\\n-        # Define Project\\n-        if project_id is not None:\\n-            project = self.session.query(Project).get(project_id)\\n-            if project is None:\\n-                project = Project(id=project_id, description='')\\n-                self.session.add(project)\\n-                self.session.commit()\\n-            task_attributes['project'] = project\\n-\\n-        # Define tags\\n-        task_attributes['tags'] = task.tags\\n-\\n-        for tag_id in tags_rm:\\n-            tag = self.session.query(Tag).get(tag_id)\\n-            if tag is None:\\n-                tag = Tag(id=tag_id, description='')\\n-                self.session.add(tag)\\n-                self.session.commit()\\n-            task_attributes['tags'].remove(tag)\\n-\\n-        for tag_id in tags:\\n-            tag = self.session.query(Tag).get(tag_id)\\n-            if tag is None:\\n-                tag = Tag(id=tag_id, description='')\\n-                self.session.add(tag)\\n-                self.session.commit()\\n-            task_attributes['tags'].append(tag)\\n-\\n-        # Test the task attributes are into the available choices\\n-        if agile is not None and \\\\\\n-                agile not in self.config.get('task.agile.states').split(', '):\\n-            raise ValueError(\\n-                'Agile state {} is not between the specified '\\n-                'by task.agile.states'.format(agile)\\n-            )\\n-\\n-        if agile is not None:\\n-            task_attributes['agile'] = agile\\n-\\n-        for key, value in kwargs.items():\\n-            task_attributes[key] = value\\n+        fulid, task_attributes = self._set(id,\\n+                                           project_id,\\n+                                           tags,\\n+                                           tags_rm,\\n+                                           agile,\\n+                                           **kwargs)\\n \\n         self._update(\\n-            id,\\n+            fulid,\\n             task_attributes,\\n         )\\n \\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 9cf615f..ef50ed9 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -202,6 +202,8 @@ class TaskManager(TableManager):\\n     Internal methods:\\n         _add: Parent method to add table elements.\\n         _close: Closes a task.\\n+        _parse_attribute: Parse a Taskwarrior like add argument into a task\\n+            attribute.\\n         _parse_arguments: Parse a Taskwarrior like add query into task\\n             attributes.\\n \\n@@ -220,12 +222,87 @@ def __init__(self, session):\\n             self.config.get('fulid.forbidden_characters'),\\n         )\\n \\n+    def _parse_attribute(self, add_argument):\\n+        \\\"\\\"\\\"\\n+        Parse a Taskwarrior like add argument into a task attribute.\\n+\\n+        Arguments:\\n+            add_argument (str): Taskwarrior like add argument string.\\n+\\n+        Returns:\\n+            attribute_id (str): Attribute key.\\n+            attributes_value (str|int|float|date): Attribute value.\\n+        \\\"\\\"\\\"\\n+\\n+        attribute_conf = {\\n+            'agile': {\\n+                'regexp': r'^(ag|agile):',\\n+                'type': 'str',\\n+            },\\n+            'body': {\\n+                'regexp': r'^body:',\\n+                'type': 'str',\\n+            },\\n+            'due': {\\n+                'regexp': r'^due:',\\n+                'type': 'date',\\n+            },\\n+            'estimate': {\\n+                'regexp': r'^(est|estimate):',\\n+                'type': 'float',\\n+            },\\n+            'fun': {\\n+                'regexp': r'^fun:',\\n+                'type': 'int',\\n+            },\\n+            'priority': {\\n+                'regexp': r'^(pri|priority):',\\n+                'type': 'int',\\n+            },\\n+            'project_id': {\\n+                'regexp': r'^(pro|project):',\\n+                'type': 'str',\\n+            },\\n+            'tags': {\\n+                'regexp': r'^\\\\+',\\n+                'type': 'tag',\\n+            },\\n+            'tags_rm': {\\n+                'regexp': r'^\\\\-',\\n+                'type': 'tag',\\n+            },\\n+            'value': {\\n+                'regexp': r'^(vl|value):',\\n+                'type': 'int',\\n+            },\\n+            'willpower': {\\n+                'regexp': r'^(wp|willpower):',\\n+                'type': 'int',\\n+            },\\n+        }\\n+\\n+        for attribute_id, attribute in attribute_conf.items():\\n+            if re.match(attribute['regexp'], add_argument):\\n+                if attribute['type'] == 'str':\\n+                    return attribute_id, add_argument.split(':')[1]\\n+                elif attribute['type'] == 'int':\\n+                    return attribute_id, int(add_argument.split(':')[1])\\n+                elif attribute['type'] == 'float':\\n+                    return attribute_id, float(add_argument.split(':')[1])\\n+                elif attribute['type'] == 'date':\\n+                    return attribute_id, self.date.convert(\\n+                        \\\":\\\".join(add_argument.split(':')[1:])\\n+                    )\\n+                elif attribute['type'] == 'tag':\\n+                    return attribute_id, re.sub(r'^[+-]', '', add_argument)\\n+        return 'title', add_argument\\n+\\n     def _parse_arguments(self, add_arguments):\\n         \\\"\\\"\\\"\\n         Parse a Taskwarrior like add query into task attributes\\n \\n         Arguments:\\n-            add_arguments (str): Taskwarrior like add argument string.\\n+            add_arguments (list): Taskwarrior like add argument list.\\n \\n         Returns:\\n             attributes (dict): Dictionary with the attributes of the task.\\n@@ -245,31 +322,14 @@ def _parse_arguments(self, add_arguments):\\n             'value': None,\\n             'willpower': None,\\n         }\\n+\\n         for argument in add_arguments:\\n-            if re.match(r'^(pro|project):', argument):\\n-                attributes['project_id'] = argument.split(':')[1]\\n-            elif re.match(r'^(ag|agile):', argument):\\n-                attributes['agile'] = argument.split(':')[1]\\n-            elif re.match(r'^due:', argument):\\n-                attributes['due'] = self.date.convert(\\\":\\\".join(argument.split(':')[1:]))\\n-            elif re.match(r'^(pri|priority):', argument):\\n-                attributes['priority'] = int(argument.split(':')[1])\\n-            elif re.match(r'^(wp|willpower):', argument):\\n-                attributes['willpower'] = int(argument.split(':')[1])\\n-            elif re.match(r'^(est|estimate):', argument):\\n-                attributes['estimate'] = float(argument.split(':')[1])\\n-            elif re.match(r'^(vl|value):', argument):\\n-                attributes['value'] = int(argument.split(':')[1])\\n-            elif re.match(r'^fun:', argument):\\n-                attributes['fun'] = int(argument.split(':')[1])\\n-            elif re.match(r'^body:', argument):\\n-                attributes['body'] = argument.split(':')[1]\\n-            elif re.match(r'^\\\\+', argument):\\n-                attributes['tags'].append(argument.replace('+', ''))\\n-            elif re.match(r'^\\\\-', argument):\\n-                attributes['tags_rm'].append(argument.replace('-', ''))\\n+            attribute_id, attribute_value = self._parse_attribute(argument)\\n+            if attribute_id in ['tags', 'tags_rm', 'title']:\\n+                attributes[attribute_id].append(attribute_value)\\n             else:\\n-                attributes['title'].append(argument)\\n+                attributes[attribute_id] = attribute_value\\n+\\n         attributes['title'] = ' '.join(attributes['title'])\\n         return attributes\\n \\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex c502e58..1fae6e0 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -273,9 +273,28 @@ def _parse_arguments(self, add_arguments):\\n         attributes['title'] = ' '.join(attributes['title'])\\n         return attributes\\n \\n+    def _get_fulid(self, id):\\n+        \\\"\\\"\\\"\\n+        Method to get the task's fulid if necessary.\\n+\\n+        Arguments:\\n+            id (str): Ulid of the task.\\n+            state (str): Task status.\\n+\\n+        Returns:\\n+            fulid (str): fulid that matches the sulid.\\n+        \\\"\\\"\\\"\\n+        fulid = id\\n+        if len(id) < 10:\\n+            open_tasks = self.session.query(Task).filter_by(state='open')\\n+            open_task_fulids = [task.id for task in open_tasks]\\n+            fulid = self.fulid.sulid_to_fulid(id, open_task_fulids)\\n+\\n+        return fulid\\n+\\n     def _set(\\n         self,\\n-        id,\\n+        id=None,\\n         project_id=None,\\n         tags=[],\\n         tags_rm=[],\\n@@ -283,10 +302,10 @@ def _set(\\n         **kwargs\\n     ):\\n         \\\"\\\"\\\"\\n-        Method to set the task's attributes and get its fulid\\n+        Method to set the task's attributes and get its fulid.\\n \\n         Arguments:\\n-            id (str): Ulid of the task\\n+            id (str): Ulid of the task if it already exists.\\n             project_id (str): Project id.\\n             tags (list): List of tag ids.\\n             tags_rm (list): List of tag ids to remove.\\n@@ -294,16 +313,9 @@ def _set(\\n             **kwargs: (object) Other attributes (key: value).\\n \\n         Returns:\\n-            fulid (str): fulid that match the sulid.\\n+            fulid (str): fulid that matches the sulid.\\n             task_attributes (dict): Dictionary with the attributes of the task.\\n         \\\"\\\"\\\"\\n-\\n-        if len(id) < 10:\\n-            open_tasks = self.session.query(Task).filter_by(state='open')\\n-            open_task_fulids = [task.id for task in open_tasks]\\n-            fulid = self.fulid.sulid_to_fulid(id, open_task_fulids)\\n-\\n-        task = self.session.query(Task).get(fulid)\\n         task_attributes = {}\\n \\n         # Define Project\\n@@ -316,15 +328,22 @@ def _set(\\n             task_attributes['project'] = project\\n \\n         # Define tags\\n-        task_attributes['tags'] = task.tags\\n-\\n-        for tag_id in tags_rm:\\n-            tag = self.session.query(Tag).get(tag_id)\\n-            if tag is None:\\n-                tag = Tag(id=tag_id, description='')\\n-                self.session.add(tag)\\n-                self.session.commit()\\n-            task_attributes['tags'].remove(tag)\\n+        if id is not None:\\n+            fulid = self._get_fulid(id)\\n+\\n+            task = self.session.query(Task).get(fulid)\\n+            task_attributes['tags'] = task.tags\\n+\\n+            for tag_id in tags_rm:\\n+                tag = self.session.query(Tag).get(tag_id)\\n+                if tag is None:\\n+                    tag = Tag(id=tag_id, description='')\\n+                    self.session.add(tag)\\n+                    self.session.commit()\\n+                task_attributes['tags'].remove(tag)\\n+        else:\\n+            fulid = None\\n+            task_attributes['tags'] = []\\n \\n         for tag_id in tags:\\n             tag = self.session.query(Tag).get(tag_id)\\n@@ -353,16 +372,11 @@ def _set(\\n     def add(\\n         self,\\n         title,\\n-        agile=None,\\n-        body=None,\\n-        due=None,\\n-        estimate=None,\\n-        fun=None,\\n-        priority=None,\\n         project_id=None,\\n         tags=[],\\n-        value=None,\\n-        willpower=None,\\n+        tags_rm=[],\\n+        agile=None,\\n+        **kwargs\\n     ):\\n         \\\"\\\"\\\"\\n         Use parent method to create a new task\\n@@ -391,50 +405,18 @@ def add(\\n \\n         new_fulid = self.fulid.new(last_fulid)\\n \\n-        task_attributes = {\\n-            'id': new_fulid.str,\\n-            'agile': agile,\\n-            'body': body,\\n-            'due': due,\\n-            'title': title,\\n-            'estimate': estimate,\\n-            'fun': fun,\\n-            'state': 'open',\\n-            'priority': priority,\\n-            'value': value,\\n-            'tags': [],\\n-            'willpower': willpower,\\n-        }\\n-\\n-        # Define Project\\n-        if project_id is not None:\\n-            project = self.session.query(Project).get(project_id)\\n-            if project is None:\\n-                project = Project(id=project_id, description='')\\n-                self.session.add(project)\\n-                self.session.commit()\\n-            task_attributes['project'] = project\\n-\\n-        # Define tags\\n-        for tag_id in tags:\\n-            tag = self.session.query(Tag).get(tag_id)\\n-            if tag is None:\\n-                tag = Tag(id=tag_id, description='')\\n-                self.session.add(tag)\\n-                self.session.commit()\\n-            task_attributes['tags'].append(tag)\\n-\\n-        # Test the task attributes are into the available choices\\n-        if agile is not None and \\\\\\n-                agile not in self.config.get('task.agile.states').split(', '):\\n-            raise ValueError(\\n-                'Agile state {} is not between the specified '\\n-                'by task.agile.states'.format(agile)\\n-            )\\n+        fulid, task_attributes = self._set(None,\\n+                                           project_id,\\n+                                           tags,\\n+                                           agile,\\n+                                           None,\\n+                                           title=title,\\n+                                           state='open',\\n+                                           **kwargs)\\n \\n         self._add(\\n             task_attributes,\\n-            task_attributes['id'],\\n+            new_fulid.str,\\n             task_attributes['title'],\\n         )\\n \\n@@ -478,10 +460,7 @@ def _close(self, id, state):\\n             state (str): State of the task once it's closed\\n         \\\"\\\"\\\"\\n \\n-        if len(id) < 10:\\n-            open_tasks = self.session.query(Task).filter_by(state='open')\\n-            open_task_fulids = [task.id for task in open_tasks]\\n-            id = self.fulid.sulid_to_fulid(id, open_task_fulids)\\n+        id = self._get_fulid(id)\\n \\n         task = self.session.query(Task).get(id)\\n \\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 6832f40..93e4685 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -468,8 +468,8 @@ def add(\\n         fulid, task_attributes = self._set(None,\\n                                            project_id,\\n                                            tags,\\n-                                           agile,\\n                                            None,\\n+                                           agile,\\n                                            title=title,\\n                                            state='open',\\n                                            **kwargs)\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 93e4685..c8efff2 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -434,25 +434,18 @@ def add(\\n         title,\\n         project_id=None,\\n         tags=[],\\n-        tags_rm=[],\\n         agile=None,\\n         **kwargs\\n     ):\\n         \\\"\\\"\\\"\\n-        Use parent method to create a new task\\n+        Use parent method to create a new task.\\n \\n         Arguments:\\n-            agile (str): Task agile state.\\n             title (str): Title of the task.\\n-            body (str): Description of the task.\\n-            estimate (float): Estimate size of the task.\\n-            fun (int): Fun size of the task.\\n-            priority (int): Task priority.\\n             project_id (str): Project id.\\n             tags (list): List of tag ids.\\n-            title (str): Title of the task.\\n-            value (int): Objective/Bussiness value of the task.\\n-            willpower (int): Willpower consumption of the task.\\n+            agile (str): Task agile state.\\n+            **kwargs: (object) Other attributes (key: value).\\n         \\\"\\\"\\\"\\n \\n         # Define ID\\n@@ -490,7 +483,7 @@ def modify(\\n         **kwargs\\n     ):\\n         \\\"\\\"\\\"\\n-        Use parent method to modify an existing task\\n+        Use parent method to modify an existing task.\\n \\n         Arguments:\\n             project_id (str): Project id.\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex c8efff2..38fdd98 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -384,7 +384,6 @@ def _set(\\n             if project is None:\\n                 project = Project(id=project_id, description='')\\n                 self.session.add(project)\\n-                self.session.commit()\\n             task_attributes['project'] = project\\n \\n         # Define tags\\n@@ -399,7 +398,6 @@ def _set(\\n                 if tag is None:\\n                     tag = Tag(id=tag_id, description='')\\n                     self.session.add(tag)\\n-                    self.session.commit()\\n                 task_attributes['tags'].remove(tag)\\n         else:\\n             fulid = None\\n@@ -410,9 +408,10 @@ def _set(\\n             if tag is None:\\n                 tag = Tag(id=tag_id, description='')\\n                 self.session.add(tag)\\n-                self.session.commit()\\n             task_attributes['tags'].append(tag)\\n \\n+        self.session.commit()\\n+\\n         # Test the task attributes are into the available choices\\n         if agile is not None and \\\\\\n                 agile not in self.config.get('task.agile.states').split(', '):\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 38fdd98..feb7b4f 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -201,11 +201,14 @@ class TaskManager(TableManager):\\n \\n     Internal methods:\\n         _add: Parent method to add table elements.\\n+        _update: Parent method to update table elements.\\n         _close: Closes a task.\\n         _parse_attribute: Parse a Taskwarrior like add argument into a task\\n             attribute.\\n         _parse_arguments: Parse a Taskwarrior like add query into task\\n             attributes.\\n+        _get_fulid: Method to get the task's fulid if necessary.\\n+        _set: Method to set the task's attributes and get its fulid.\\n \\n     Public attributes:\\n         fulid (fulid object): Fulid manager and generator object.\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex feb7b4f..92273a3 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -355,6 +355,28 @@ def _get_fulid(self, id):\\n \\n         return fulid\\n \\n+    def _set_project(\\n+        self,\\n+        task_attributes,\\n+        project_id=None\\n+    ):\\n+        \\\"\\\"\\\"\\n+        Method to set the project attribute.\\n+\\n+        A new project will be created if it doesn't exist yet.\\n+\\n+        Arguments:\\n+            task_attributes (dict): Dictionary with the attributes of the task.\\n+            project_id (str): Project id.\\n+        \\\"\\\"\\\"\\n+        if project_id is not None:\\n+            project = self.session.query(Project).get(project_id)\\n+            if project is None:\\n+                project = Project(id=project_id, description='')\\n+                self.session.add(project)\\n+                self.session.commit()\\n+            task_attributes['project'] = project\\n+\\n     def _set(\\n         self,\\n         id=None,\\n@@ -381,13 +403,7 @@ def _set(\\n         \\\"\\\"\\\"\\n         task_attributes = {}\\n \\n-        # Define Project\\n-        if project_id is not None:\\n-            project = self.session.query(Project).get(project_id)\\n-            if project is None:\\n-                project = Project(id=project_id, description='')\\n-                self.session.add(project)\\n-            task_attributes['project'] = project\\n+        self._set_project(task_attributes, project_id)\\n \\n         # Define tags\\n         if id is not None:\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 92273a3..8d43915 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -377,6 +377,36 @@ def _set_project(\\n                 self.session.commit()\\n             task_attributes['project'] = project\\n \\n+    def _set_tags(\\n+        self,\\n+        task_attributes,\\n+        tags=[]\\n+    ):\\n+        \\\"\\\"\\\"\\n+        Method to set the tags attribute.\\n+\\n+        A new tag will be created if it doesn't exist yet.\\n+\\n+        Arguments:\\n+            task_attributes (dict): Dictionary with the attributes of the task.\\n+            tags (list): List of tag ids.\\n+        \\\"\\\"\\\"\\n+        commit_necessary = False\\n+\\n+        if 'tags' not in task_attributes:\\n+            task_attributes['tags'] = []\\n+\\n+        for tag_id in tags:\\n+            tag = self.session.query(Tag).get(tag_id)\\n+            if tag is None:\\n+                tag = Tag(id=tag_id, description='')\\n+                self.session.add(tag)\\n+                commit_necessary = True\\n+            task_attributes['tags'].append(tag)\\n+\\n+        if commit_necessary:\\n+            self.session.commit()\\n+\\n     def _set(\\n         self,\\n         id=None,\\n@@ -405,7 +435,6 @@ def _set(\\n \\n         self._set_project(task_attributes, project_id)\\n \\n-        # Define tags\\n         if id is not None:\\n             fulid = self._get_fulid(id)\\n \\n@@ -422,14 +451,7 @@ def _set(\\n             fulid = None\\n             task_attributes['tags'] = []\\n \\n-        for tag_id in tags:\\n-            tag = self.session.query(Tag).get(tag_id)\\n-            if tag is None:\\n-                tag = Tag(id=tag_id, description='')\\n-                self.session.add(tag)\\n-            task_attributes['tags'].append(tag)\\n-\\n-        self.session.commit()\\n+        self._set_tags(task_attributes, tags)\\n \\n         # Test the task attributes are into the available choices\\n         if agile is not None and \\\\\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 8d43915..90a41e6 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -407,6 +407,31 @@ def _set_tags(\\n         if commit_necessary:\\n             self.session.commit()\\n \\n+    def _set_agile(\\n+        self,\\n+        task_attributes,\\n+        agile=None\\n+    ):\\n+        \\\"\\\"\\\"\\n+        Method to set the agile attribute.\\n+\\n+        If the agile tag value isn't between the specified ones,\\n+        a `ValueError` will be raised.\\n+\\n+        Arguments:\\n+            task_attributes (dict): Dictionary with the attributes of the task.\\n+            agile (str): Task agile state.\\n+        \\\"\\\"\\\"\\n+        if agile is not None and \\\\\\n+                agile not in self.config.get('task.agile.states').split(', '):\\n+            raise ValueError(\\n+                'Agile state {} is not between the specified '\\n+                'by task.agile.states'.format(agile)\\n+            )\\n+\\n+        if agile is not None:\\n+            task_attributes['agile'] = agile\\n+\\n     def _set(\\n         self,\\n         id=None,\\n@@ -452,17 +477,7 @@ def _set(\\n             task_attributes['tags'] = []\\n \\n         self._set_tags(task_attributes, tags)\\n-\\n-        # Test the task attributes are into the available choices\\n-        if agile is not None and \\\\\\n-                agile not in self.config.get('task.agile.states').split(', '):\\n-            raise ValueError(\\n-                'Agile state {} is not between the specified '\\n-                'by task.agile.states'.format(agile)\\n-            )\\n-\\n-        if agile is not None:\\n-            task_attributes['agile'] = agile\\n+        self._set_agile(task_attributes, agile)\\n \\n         for key, value in kwargs.items():\\n             task_attributes[key] = value\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 90a41e6..e5dc547 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -456,6 +456,7 @@ def _set(\\n             fulid (str): fulid that matches the sulid.\\n             task_attributes (dict): Dictionary with the attributes of the task.\\n         \\\"\\\"\\\"\\n+        fulid = None\\n         task_attributes = {}\\n \\n         self._set_project(task_attributes, project_id)\\n@@ -472,9 +473,6 @@ def _set(\\n                     tag = Tag(id=tag_id, description='')\\n                     self.session.add(tag)\\n                 task_attributes['tags'].remove(tag)\\n-        else:\\n-            fulid = None\\n-            task_attributes['tags'] = []\\n \\n         self._set_tags(task_attributes, tags)\\n         self._set_agile(task_attributes, agile)\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex e5dc547..8e87d9a 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -407,6 +407,24 @@ def _set_tags(\\n         if commit_necessary:\\n             self.session.commit()\\n \\n+    def _rm_tags(\\n+        self,\\n+        task_attributes,\\n+        tags_rm=[]\\n+    ):\\n+        \\\"\\\"\\\"\\n+        Method to delete tags from the Task attributes.\\n+\\n+        Arguments:\\n+            task_attributes (dict): Dictionary with the attributes of the task.\\n+            tags_rm (list): List of tag ids to remove.\\n+        \\\"\\\"\\\"\\n+        for tag_id in tags_rm:\\n+            tag = self.session.query(Tag).get(tag_id)\\n+            if tag is None:\\n+                raise ValueError(\\\"The tag doesn't exist\\\")\\n+            task_attributes['tags'].remove(tag)\\n+\\n     def _set_agile(\\n         self,\\n         task_attributes,\\n@@ -467,12 +485,7 @@ def _set(\\n             task = self.session.query(Task).get(fulid)\\n             task_attributes['tags'] = task.tags\\n \\n-            for tag_id in tags_rm:\\n-                tag = self.session.query(Tag).get(tag_id)\\n-                if tag is None:\\n-                    tag = Tag(id=tag_id, description='')\\n-                    self.session.add(tag)\\n-                task_attributes['tags'].remove(tag)\\n+            self._rm_tags(task_attributes, tags_rm)\\n \\n         self._set_tags(task_attributes, tags)\\n         self._set_agile(task_attributes, agile)\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 8e87d9a..42d6498 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -209,6 +209,10 @@ class TaskManager(TableManager):\\n             attributes.\\n         _get_fulid: Method to get the task's fulid if necessary.\\n         _set: Method to set the task's attributes and get its fulid.\\n+        _set_project: Method to set the project attribute.\\n+        _set_tags: Method to set the tags attribute.\\n+        _rm_tags: Method to delete tags from the Task attributes.\\n+        _set_agile: Method to set the agile attribute.\\n \\n     Public attributes:\\n         fulid (fulid object): Fulid manager and generator object.\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 42d6498..3c4095a 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -528,11 +528,9 @@ def add(\\n \\n         new_fulid = self.fulid.new(last_fulid)\\n \\n-        fulid, task_attributes = self._set(None,\\n-                                           project_id,\\n-                                           tags,\\n-                                           None,\\n-                                           agile,\\n+        fulid, task_attributes = self._set(project_id=project_id,\\n+                                           tags=tags,\\n+                                           agile=agile,\\n                                            title=title,\\n                                            state='open',\\n                                            **kwargs)\\n\",\"diff --git a/pydo/manager.py b/pydo/manager.py\\nindex 3c4095a..7d8fb2c 100644\\n--- a/pydo/manager.py\\n+++ b/pydo/manager.py\\n@@ -359,11 +359,7 @@ def _get_fulid(self, id):\\n \\n         return fulid\\n \\n-    def _set_project(\\n-        self,\\n-        task_attributes,\\n-        project_id=None\\n-    ):\\n+    def _set_project(self, task_attributes, project_id=None):\\n         \\\"\\\"\\\"\\n         Method to set the project attribute.\\n \\n@@ -381,11 +377,7 @@ def _set_project(\\n                 self.session.commit()\\n             task_attributes['project'] = project\\n \\n-    def _set_tags(\\n-        self,\\n-        task_attributes,\\n-        tags=[]\\n-    ):\\n+    def _set_tags(self, task_attributes, tags=[]):\\n         \\\"\\\"\\\"\\n         Method to set the tags attribute.\\n \\n@@ -411,11 +403,7 @@ def _set_tags(\\n         if commit_necessary:\\n             self.session.commit()\\n \\n-    def _rm_tags(\\n-        self,\\n-        task_attributes,\\n-        tags_rm=[]\\n-    ):\\n+    def _rm_tags(self, task_attributes, tags_rm=[]):\\n         \\\"\\\"\\\"\\n         Method to delete tags from the Task attributes.\\n \\n@@ -429,15 +417,11 @@ def _rm_tags(\\n                 raise ValueError(\\\"The tag doesn't exist\\\")\\n             task_attributes['tags'].remove(tag)\\n \\n-    def _set_agile(\\n-        self,\\n-        task_attributes,\\n-        agile=None\\n-    ):\\n+    def _set_agile(self, task_attributes, agile=None):\\n         \\\"\\\"\\\"\\n         Method to set the agile attribute.\\n \\n-        If the agile tag value isn't between the specified ones,\\n+        If the agile property value isn't between the specified ones,\\n         a `ValueError` will be raised.\\n \\n         Arguments:\\n@@ -528,12 +512,14 @@ def add(\\n \\n         new_fulid = self.fulid.new(last_fulid)\\n \\n-        fulid, task_attributes = self._set(project_id=project_id,\\n-                                           tags=tags,\\n-                                           agile=agile,\\n-                                           title=title,\\n-                                           state='open',\\n-                                           **kwargs)\\n+        fulid, task_attributes = self._set(\\n+            project_id=project_id,\\n+            tags=tags,\\n+            agile=agile,\\n+            title=title,\\n+            state='open',\\n+            **kwargs,\\n+        )\\n \\n         self._add(\\n             task_attributes,\\n@@ -560,12 +546,14 @@ def modify(\\n             agile (str): Task agile state.\\n             **kwargs: (object) Other attributes (key: value).\\n         \\\"\\\"\\\"\\n-        fulid, task_attributes = self._set(id,\\n-                                           project_id,\\n-                                           tags,\\n-                                           tags_rm,\\n-                                           agile,\\n-                                           **kwargs)\\n+        fulid, task_attributes = self._set(\\n+            id,\\n+            project_id,\\n+            tags,\\n+            tags_rm,\\n+            agile,\\n+            **kwargs\\n+        )\\n \\n         self._update(\\n             fulid,\\n\"]", "test_patch": "[\"diff --git a/tests/test_cli.py b/tests/test_cli.py\\nindex 8069c0c..d3702db 100644\\n--- a/tests/test_cli.py\\n+++ b/tests/test_cli.py\\n@@ -40,6 +40,31 @@ def test_can_specify_project_in_add_subcommand(self):\\n         assert parsed.subcommand == arguments[0]\\n         assert parsed.add_argument == arguments[1:3]\\n \\n+    def test_can_specify_modify_subcommand(self):\\n+        arguments = [\\n+            'modify',\\n+            self.fake.word(),\\n+            self.fake.sentence(),\\n+        ]\\n+        parsed = self.parser.parse_args(arguments)\\n+        assert parsed.subcommand == arguments[0]\\n+        assert parsed.ulid == arguments[1]\\n+        assert parsed.modify_argument == [arguments[2]]\\n+\\n+    def test_can_specify_project_in_modify_subcommand(self):\\n+        description = self.fake.sentence()\\n+        project_id = self.fake.word()\\n+        arguments = [\\n+            'modify',\\n+            self.fake.word(),\\n+            description,\\n+            'pro:{}'.format(project_id),\\n+        ]\\n+        parsed = self.parser.parse_args(arguments)\\n+        assert parsed.subcommand == arguments[0]\\n+        assert parsed.ulid == arguments[1]\\n+        assert parsed.modify_argument == arguments[2:4]\\n+\\n     def test_can_specify_done_subcommand(self):\\n         arguments = [\\n             'done',\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex b1feca3..0f0a555 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -507,6 +507,177 @@ def test_add_task_assigns_due_if_exist(self):\\n         generated_task = self.session.query(Task).one()\\n         assert generated_task.due == due\\n \\n+    def test_modify_task_modifies_project(self):\\n+        old_project = ProjectFactory.create()\\n+        new_project = ProjectFactory.create()\\n+        task = self.factory.create(state='open')\\n+        task.project = old_project\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            project_id=new_project.id\\n+        )\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.project is new_project\\n+\\n+    def test_modify_task_generates_project_if_doesnt_exist(self):\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            project_id='non_existent')\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+        project = self.session.query(Project).get('non_existent')\\n+\\n+        assert modified_task.project is project\\n+        assert isinstance(project, Project)\\n+\\n+    def test_modify_task_adds_tags(self):\\n+        tag_1 = TagFactory.create()\\n+        tag_2 = TagFactory.create()\\n+        task = self.factory.create(state='open')\\n+        task.tags = [tag_1]\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            tags=[tag_2.id])\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+        assert modified_task.tags == [tag_1, tag_2]\\n+\\n+    def test_modify_task_removes_tags(self):\\n+        tag = TagFactory.create()\\n+        task = self.factory.create(state='open')\\n+        task.tags = [tag]\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            tags_rm=[tag.id])\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+        assert modified_task.tags == []\\n+\\n+    def test_modify_task_generates_tag_if_doesnt_exist(self):\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            tags=['non_existent'])\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+        tag = self.session.query(Tag).get('non_existent')\\n+\\n+        assert modified_task.tags == [tag]\\n+        assert isinstance(tag, Tag)\\n+\\n+    def test_modify_task_modifies_priority(self):\\n+        priority = self.fake.random_number()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            priority=priority)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.priority == priority\\n+\\n+    def test_modify_task_modifies_value(self):\\n+        value = self.fake.random_number()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            value=value)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.value == value\\n+\\n+    def test_modify_task_modifies_willpower(self):\\n+        willpower = self.fake.random_number()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            willpower=willpower)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.willpower == willpower\\n+\\n+    def test_modify_task_modifies_fun(self):\\n+        fun = self.fake.random_number()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            fun=fun)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.fun == fun\\n+\\n+    def test_modify_task_modifies_estimate(self):\\n+        estimate = self.fake.random_number()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            estimate=estimate)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.estimate == estimate\\n+\\n+    def test_modify_task_modifies_body(self):\\n+        body = self.fake.sentence()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            body=body)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.body == body\\n+\\n+    def test_raise_error_if_add_task_modifies_unvalid_agile_state(self):\\n+        task = self.factory.create(state='open')\\n+        agile = self.fake.word()\\n+\\n+        with pytest.raises(ValueError):\\n+            self.manager.modify(\\n+                fulid().fulid_to_sulid(task.id, [task.id]),\\n+                agile=agile)\\n+\\n+    def test_add_task_modifies_agile(self):\\n+        agile = 'todo'\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            agile=agile)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.agile == agile\\n+\\n+    def test_add_task_modifies_due(self):\\n+        due = self.fake.date_time()\\n+        task = self.factory.create(state='open')\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            due=due)\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.due == due\\n+\\n     def test_delete_task_by_sulid(self):\\n         task = self.factory.create(state='open')\\n         closed = self.fake.date_time()\\n\",\"diff --git a/tests/test_cli.py b/tests/test_cli.py\\nindex d3702db..9215a41 100644\\n--- a/tests/test_cli.py\\n+++ b/tests/test_cli.py\\n@@ -42,7 +42,7 @@ def test_can_specify_project_in_add_subcommand(self):\\n \\n     def test_can_specify_modify_subcommand(self):\\n         arguments = [\\n-            'modify',\\n+            'mod',\\n             self.fake.word(),\\n             self.fake.sentence(),\\n         ]\\n@@ -55,7 +55,7 @@ def test_can_specify_project_in_modify_subcommand(self):\\n         description = self.fake.sentence()\\n         project_id = self.fake.word()\\n         arguments = [\\n-            'modify',\\n+            'mod',\\n             self.fake.word(),\\n             description,\\n             'pro:{}'.format(project_id),\\n\",\"diff --git a/tests/test_init.py b/tests/test_init.py\\nindex 9a461be..b8150c0 100644\\n--- a/tests/test_init.py\\n+++ b/tests/test_init.py\\n@@ -255,3 +255,23 @@ def test_tags_subcomand_prints_report(self, tagsMock):\\n             columns=self.config.get('report.tags.columns').split(', '),\\n             labels=self.config.get('report.tags.labels').split(', ')\\n         )\\n+\\n+    def test_modify_subcomand_modifies_task(self):\\n+        arguments = [\\n+            'mod',\\n+            ulid.new().str,\\n+            'pro:test',\\n+        ]\\n+        self.parser_args.subcommand = arguments[0]\\n+        self.parser_args.ulid = arguments[1]\\n+        self.parser_args.modify_argument = arguments[2]\\n+        self.tm.return_value._parse_arguments.return_value = {\\n+            'project': 'test',\\n+        }\\n+\\n+        main()\\n+\\n+        self.tm.return_value.modify.assert_called_once_with(\\n+            arguments[1],\\n+            project='test',\\n+        )\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 0f0a555..84d9ef1 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -151,6 +151,21 @@ def test_parse_arguments_extracts_tags(self):\\n         assert attributes['title'] == title\\n         assert attributes['tags'] == tags\\n \\n+    def test_parse_arguments_extracts_tags_to_remove(self):\\n+        title = self.fake.sentence()\\n+        tags = [self.fake.word(), self.fake.word()]\\n+\\n+        add_arguments = [\\n+            title,\\n+            '-{}'.format(tags[0]),\\n+            '-{}'.format(tags[1]),\\n+        ]\\n+\\n+        attributes = self.manager._parse_arguments(add_arguments)\\n+\\n+        assert attributes['title'] == title\\n+        assert attributes['tags_rm'] == tags\\n+\\n     def test_parse_arguments_extracts_priority_in_short_representation(self):\\n         title = self.fake.sentence()\\n         priority = self.fake.random_number()\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 84d9ef1..25a72db 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -522,6 +522,19 @@ def test_add_task_assigns_due_if_exist(self):\\n         generated_task = self.session.query(Task).one()\\n         assert generated_task.due == due\\n \\n+    def test_modify_task_modifies_arbitrary_attribute(self):\\n+        task = self.factory.create(state='open')\\n+        non_existent_attribute_value = self.fake.word()\\n+\\n+        self.manager.modify(\\n+            fulid().fulid_to_sulid(task.id, [task.id]),\\n+            non_existent=non_existent_attribute_value\\n+        )\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.non_existent is non_existent_attribute_value\\n+\\n     def test_modify_task_modifies_project(self):\\n         old_project = ProjectFactory.create()\\n         new_project = ProjectFactory.create()\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 25a72db..28e2c2e 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -66,6 +66,23 @@ def test_get_raises_valueerror_if_property_doesnt_exist(self):\\n         with pytest.raises(ValueError):\\n             self.manager._get('unexistent_property')\\n \\n+    def test_update_table_element_method_exists(self):\\n+        assert '_update' in dir(self.manager)\\n+\\n+    def test_update_element(self):\\n+        element = self.factory.create()\\n+\\n+        attribute_value = self.fake.sentence()\\n+        object_values = {'arbitrary_key': attribute_value}\\n+        self.manager._update(element.id, object_values)\\n+\\n+        assert element.arbitrary_key == attribute_value\\n+\\n+    def test_update_raises_valueerror_if_element_doesnt_exist(self):\\n+        fake_element_id = self.fake.word()\\n+\\n+        with pytest.raises(ValueError):\\n+            self.manager._update(fake_element_id)\\n \\n @pytest.mark.usefixtures('base_setup')\\n class TestTaskManager(ManagerBaseTest):\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 28e2c2e..4352c3b 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -84,6 +84,7 @@ def test_update_raises_valueerror_if_element_doesnt_exist(self):\\n         with pytest.raises(ValueError):\\n             self.manager._update(fake_element_id)\\n \\n+\\n @pytest.mark.usefixtures('base_setup')\\n class TestTaskManager(ManagerBaseTest):\\n     \\\"\\\"\\\"\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 4352c3b..69fc8a9 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -84,6 +84,7 @@ def test_update_raises_valueerror_if_element_doesnt_exist(self):\\n         with pytest.raises(ValueError):\\n             self.manager._update(fake_element_id)\\n \\n+        self.session.commit()\\n \\n @pytest.mark.usefixtures('base_setup')\\n class TestTaskManager(ManagerBaseTest):\\n@@ -553,6 +554,19 @@ def test_modify_task_modifies_arbitrary_attribute(self):\\n \\n         assert modified_task.non_existent is non_existent_attribute_value\\n \\n+    def test_modify_task_modifies_arbitrary_attribute_any_state(self):\\n+        task = self.factory.create()\\n+        non_existent_attribute_value = self.fake.word()\\n+\\n+        self.manager.modify(\\n+            task.id,\\n+            non_existent=non_existent_attribute_value\\n+        )\\n+\\n+        modified_task = self.session.query(Task).get(task.id)\\n+\\n+        assert modified_task.non_existent is non_existent_attribute_value\\n+\\n     def test_modify_task_modifies_project(self):\\n         old_project = ProjectFactory.create()\\n         new_project = ProjectFactory.create()\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 69fc8a9..7cb3b29 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -86,6 +86,7 @@ def test_update_raises_valueerror_if_element_doesnt_exist(self):\\n \\n         self.session.commit()\\n \\n+\\n @pytest.mark.usefixtures('base_setup')\\n class TestTaskManager(ManagerBaseTest):\\n     \\\"\\\"\\\"\\n@@ -369,6 +370,23 @@ def test_parse_arguments_extracts_due_with_hour(self, dateMock):\\n \\n         assert attributes['due'] == dateMock.return_value.convert.return_value\\n \\n+    def test_get_fulid_from_sulid(self):\\n+        task = self.factory.create(state='open')\\n+        sulid = self.manager.fulid.fulid_to_sulid(task.id, [task.id])\\n+\\n+        assert task.id == self.manager._get_fulid(sulid)\\n+\\n+    def test_get_fulid_from_fulid(self):\\n+        task = self.factory.create(state='open')\\n+\\n+        assert task.id == self.manager._get_fulid(task.id)\\n+\\n+    def test_get_fulid_non_existent_task(self):\\n+        non_existent_id = self.fake.word()\\n+\\n+        with pytest.raises(KeyError):\\n+            self.manager._get_fulid(non_existent_id)\\n+\\n     def test_add_task(self):\\n         title = self.fake.sentence()\\n \\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 7cb3b29..3ef7027 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -387,6 +387,21 @@ def test_get_fulid_non_existent_task(self):\\n         with pytest.raises(KeyError):\\n             self.manager._get_fulid(non_existent_id)\\n \\n+    def test_set_project_existent(self):\\n+        project = ProjectFactory.create()\\n+        task_attributes = {}\\n+\\n+        self.manager._set_project(task_attributes, project.id)\\n+\\n+        assert task_attributes['project'] == project\\n+\\n+    def test_set_project_non_existent(self):\\n+        task_attributes = {}\\n+\\n+        self.manager._set_project(task_attributes, 'non_existent')\\n+\\n+        assert task_attributes['project'].id == 'non_existent'\\n+\\n     def test_add_task(self):\\n         title = self.fake.sentence()\\n \\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 3ef7027..1effdab 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -402,6 +402,22 @@ def test_set_project_non_existent(self):\\n \\n         assert task_attributes['project'].id == 'non_existent'\\n \\n+    def test_set_tags_existent(self):\\n+        tag1 = TagFactory.create()\\n+        tag2 = TagFactory.create()\\n+        task_attributes = {}\\n+\\n+        self.manager._set_tags(task_attributes, [tag1.id, tag2.id])\\n+\\n+        assert task_attributes['tags'] == [tag1, tag2]\\n+\\n+    def test_set_tags_non_existent(self):\\n+        task_attributes = {}\\n+\\n+        self.manager._set_tags(task_attributes, ['non_existent'])\\n+\\n+        assert task_attributes['tags'][0].id == 'non_existent'\\n+\\n     def test_add_task(self):\\n         title = self.fake.sentence()\\n \\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 1effdab..6f89bf3 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -418,6 +418,21 @@ def test_set_tags_non_existent(self):\\n \\n         assert task_attributes['tags'][0].id == 'non_existent'\\n \\n+    def test_set_agile_valid(self):\\n+        agile = 'todo'\\n+        task_attributes = {}\\n+\\n+        self.manager._set_agile(task_attributes, agile)\\n+\\n+        assert task_attributes['agile'] == agile\\n+\\n+    def test_set_agile_unvalid(self):\\n+        agile = self.fake.word()\\n+        task_attributes = {}\\n+\\n+        with pytest.raises(ValueError):\\n+            self.manager._set_agile(task_attributes, agile)\\n+\\n     def test_add_task(self):\\n         title = self.fake.sentence()\\n \\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 6f89bf3..de742fb 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -418,6 +418,25 @@ def test_set_tags_non_existent(self):\\n \\n         assert task_attributes['tags'][0].id == 'non_existent'\\n \\n+    def test_rm_tags_existent(self):\\n+        tag1 = TagFactory.create()\\n+        tag2 = TagFactory.create()\\n+        tag3 = TagFactory.create()\\n+        task_attributes = {'tags': [tag1, tag2, tag3]}\\n+\\n+        self.manager._rm_tags(task_attributes, [tag1.id, tag2.id])\\n+\\n+        assert task_attributes['tags'] == [tag3]\\n+\\n+    def test_rm_tags_non_existent(self):\\n+        tag1 = TagFactory.create()\\n+        tag2 = TagFactory.create()\\n+        tag3 = TagFactory.create()\\n+        task_attributes = {'tags': [tag1.id, tag2.id, tag3.id]}\\n+\\n+        with pytest.raises(ValueError):\\n+            self.manager._rm_tags(task_attributes, ['tag4', 'tag5'])\\n+\\n     def test_set_agile_valid(self):\\n         agile = 'todo'\\n         task_attributes = {}\\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex de742fb..204fda3 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -452,6 +452,50 @@ def test_set_agile_unvalid(self):\\n         with pytest.raises(ValueError):\\n             self.manager._set_agile(task_attributes, agile)\\n \\n+    def test_set_existent_task(self):\\n+        task = self.factory.create()\\n+        project = ProjectFactory.create()\\n+        tag = TagFactory.create()\\n+        agile = 'todo'\\n+        arbitrary_attribute_value = self.fake.word()\\n+\\n+        fulid, task_attributes = self.manager._set(\\n+            task.id,\\n+            project.id,\\n+            [tag.id],\\n+            [],\\n+            agile,\\n+            arbitrary_attribute=arbitrary_attribute_value\\n+        )\\n+\\n+        assert fulid == task.id\\n+        assert task_attributes['project'] == project\\n+        assert task_attributes['tags'] == [tag]\\n+        assert task_attributes['agile'] == agile\\n+        assert task_attributes['arbitrary_attribute'] == \\\\\\n+            arbitrary_attribute_value\\n+\\n+    def test_set_non_existent_task(self):\\n+        project = ProjectFactory.create()\\n+        tag = TagFactory.create()\\n+        agile = 'todo'\\n+        arbitrary_attribute_value = self.fake.word()\\n+\\n+        fulid, task_attributes = self.manager._set(\\n+            None,\\n+            project.id,\\n+            [tag.id],\\n+            [],\\n+            agile,\\n+            arbitrary_attribute=arbitrary_attribute_value\\n+        )\\n+\\n+        assert task_attributes['project'] == project\\n+        assert task_attributes['tags'] == [tag]\\n+        assert task_attributes['agile'] == agile\\n+        assert task_attributes['arbitrary_attribute'] == \\\\\\n+            arbitrary_attribute_value\\n+\\n     def test_add_task(self):\\n         title = self.fake.sentence()\\n \\n\",\"diff --git a/tests/test_manager.py b/tests/test_manager.py\\nindex 204fda3..47a89b1 100644\\n--- a/tests/test_manager.py\\n+++ b/tests/test_manager.py\\n@@ -84,8 +84,6 @@ def test_update_raises_valueerror_if_element_doesnt_exist(self):\\n         with pytest.raises(ValueError):\\n             self.manager._update(fake_element_id)\\n \\n-        self.session.commit()\\n-\\n \\n @pytest.mark.usefixtures('base_setup')\\n class TestTaskManager(ManagerBaseTest):\\n@@ -432,7 +430,7 @@ def test_rm_tags_non_existent(self):\\n         tag1 = TagFactory.create()\\n         tag2 = TagFactory.create()\\n         tag3 = TagFactory.create()\\n-        task_attributes = {'tags': [tag1.id, tag2.id, tag3.id]}\\n+        task_attributes = {'tags': [tag1, tag2, tag3]}\\n \\n         with pytest.raises(ValueError):\\n             self.manager._rm_tags(task_attributes, ['tag4', 'tag5'])\"]", "hints_text": ""}
