{"instance_id": "565022679876152", "repo": "autostronomy/astrophot", "base_commit": "90ce051255fd415b7a66385592c5a6cd72a7c0e8", "problem_statement": "Creating a window with a certain WCS doesn't produce a positive shape.:\\n**Describe the bug**\\r\\nUsing a window object based on a WCS doesn't work when constructing a Target_Image object\\r\\n\\r\\nWCS\\r\\n\"\"\"\\r\\nWCS Keywords\\r\\n\\r\\nNumber of WCS axes: 2\\r\\nCTYPE : 'RA---TAN-SIP'  'DEC--TAN-SIP'  \\r\\nCRVAL : 60.1432867246932  -44.1329261633904  \\r\\nCRPIX : 2053.100183  1971.914889  \\r\\nCD1_1 CD1_2  : -5.06818049270775e-05  2.26561792162743e-05  \\r\\nCD2_1 CD2_2  : 2.26423678359844e-05  5.05664537482149e-05  \\r\\nNAXIS : 4072  4000\\r\\n\"\"\"\\r\\n\\r\\n```    \\r\\ntarget = ap.image.Target_Image(\\r\\n        data=np.array(img, dtype=np.float64),\\r\\n        variance=var,\\r\\n        zeropoint=22.5,\\r\\n        psf=psf,\\r\\n        wcs=wcs,\\r\\n    )\\r\\n```\\r\\n\\r\\nCreating `window` with\\r\\n```    \\r\\nsn = {\"ra\": 60.2901401, \"dec\": -44.142051}\\r\\nsn_coord = SkyCoord(sn[\"ra\"], sn[\"dec\"], unit=u.degree)\\r\\nwindow_size = 5\\r\\nwindow = ap.image.window_object.Window(\\r\\n    center=(sn_coord.ra.arcsecond, sn_coord.dec.arcsecond),\\r\\n    shape=(window_size, window_size),\\r\\n    projection = target.pixelscale,\\r\\n)\\r\\n```\\r\\n\\r\\nwhere `target.pixelscale` is\\r\\n \\r\\n```\\r\\ntensor([[-0.1825,  0.0816],\\r\\n        [ 0.0815,  0.1820]], dtype=torch.float64)\\r\\n```\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior:\\r\\n1. Go to '...'\\r\\n2. Click on '....'\\r\\n3. Scroll down to '....'\\r\\n4. See error\\r\\n\\r\\n**Expected behavior**\\r\\nA clear and concise description of what you expected to happen.\\r\\n\\r\\n**Screenshots**\\r\\nIf applicable, add screenshots to help explain your problem.\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: [e.g. iOS]\\r\\n - Browser [e.g. chrome, safari]\\r\\n - Version [e.g. 22]\\r\\n\\r\\n**Smartphone (please complete the following information):**\\r\\n - Device: [e.g. iPhone6]\\r\\n - OS: [e.g. iOS8.1]\\r\\n - Browser [e.g. stock browser, safari]\\r\\n - Version [e.g. 22]\\r\\n\\r\\n**Additional context**\\r\\nAdd any other context about the problem here.\\r\\n", "FAIL_TO_PASS": ["tests/test_image_list.py::TestModelImageList::test_model_image_list_creation", "tests/test_utils.py::TestFFT::test_fft", "tests/test_wcs.py::TestWPCS::test_wpcs_round_trip", "tests/test_image.py::TestJacobianImage::test_jacobian_add", "tests/test_wcs.py::TestPPCS::test_ppcs_creation", "tests/test_window.py::TestWindow::test_window_arithmetic", "tests/test_window_list.py::TestWindowList::test_windowlist_logic", "tests/test_window.py::TestWindow::test_window_state", "tests/test_image.py::TestImage::test_excersize_arithmatic", "tests/test_image.py::TestImage::test_image_wcs_roundtrip", "tests/test_window.py::TestWindow::test_window_crop", "tests/test_window.py::TestWindow::test_window_get_indices", "tests/test_utils.py::TestInterpolate::test_interpolate_functions", "tests/test_utils.py::TestConversions::test_conversion_dict_to_hdf5", "tests/test_fit.py::TestLM::test_lm_constraint", "tests/test_window.py::TestWindow::test_window_logic", "tests/test_wcs.py::TestWCS::test_wcs_creation", "tests/test_image.py::TestModelImage::test_shift", "tests/test_window_list.py::TestWindowList::test_window_arithmetic", "tests/test_image_list.py::TestImageList::test_image_creation", "tests/test_window_list.py::TestWindowList::test_windowlist_creation", "tests/test_wcs.py::TestWCS::test_wcs_repr", "tests/test_image.py::TestImage::test_image_manipulation", "tests/test_image_list.py::TestTargetImageList::test_target_image_list_creation", "tests/test_image.py::TestImage::test_image_creation", "tests/test_image_list.py::TestJacobianImageList::test_jacobian_image_list_creation", "tests/test_utils.py::TestFFT::test_fft_multi", "tests/test_wcs.py::TestWCS::test_wcs_roundtrip", "tests/test_model.py::TestModel::test_mask", "tests/test_plots.py::TestPlots::test_target_image", "tests/test_image.py::TestImage::test_image_arithmetic", "tests/test_image.py::TestTargetImage::test_psf", "tests/test_image.py::TestPSFImage::test_reducing", "tests/test_wcs.py::TestPPCS::test_ppcs_round_trip", "tests/test_image_header.py::TestImageHeader::test_image_header_creation", "tests/test_wcs.py::TestWCS::test_wcs_state", "tests/test_image_header.py::TestImageHeader::test_image_header_wcs_roundtrip", "tests/test_image.py::TestTargetImage::test_target_save_load", "tests/test_model.py::TestModel::test_model_sampling_modes", "tests/test_wcs.py::TestWPCS::test_wpcs_creation", "tests/test_image.py::TestTargetImage::test_variance", "tests/test_utils.py::TestPSF::test_make_psf", "tests/test_model.py::TestModel::test_basic_model_methods", "tests/test_image_list.py::TestImageList::test_image_list_display", "tests/test_image.py::TestTargetImage::test_mask", "tests/test_image_list.py::TestImageList::test_copy", "tests/test_plots.py::TestPlots::test_target_image_list", "tests/test_window.py::TestWindow::test_window_creation", "tests/test_image_list.py::TestImageList::test_image_arithmetic", "tests/test_image.py::TestTargetImage::test_reduce"], "PASS_TO_PASS": ["tests/test_utils.py::TestAngleOperations::test_angle_operation_functions", "tests/test_parameter.py::TestParameterGroup::test_vectors", "tests/test_parameter.py::TestParameter::test_parameter_limits", "tests/test_image.py::TestImage::test_copy", "tests/test_utils.py::TestOptimize::test_chi2", "tests/test_parameter.py::TestParameter::test_parameter_setting", "tests/test_image.py::TestModelImage::test_replace", "tests/test_parameter.py::TestParameterGroup::test_inspection", "tests/test_parameter.py::TestParameter::test_parameter_array", "tests/test_image.py::TestPSFImage::test_copying", "tests/test_utils.py::TestSegtoWindow::test_segtowindow", "tests/test_model.py::TestModel::test_AstroPhot_Model", "tests/test_utils.py::TestConversions::test_general_derivative", "tests/test_utils.py::TestConversions::test_conversions_units", "tests/test_image.py::TestImage::test_image_save_load", "tests/test_parameter.py::TestParameterGroup::test_generation", "tests/test_parameter.py::TestParameter::test_parameter_state", "tests/test_parameter.py::TestParameter::test_parameter_gradients", "tests/test_utils.py::TestConversions::test_conversion_functions"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/autostronomy_astrophot:90ce051255fd415b7a66385592c5a6cd72a7c0e8", "patch": "", "test_patch": "", "hints_text": ""}
