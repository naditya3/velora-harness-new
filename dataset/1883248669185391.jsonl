{"instance_id": "1883248669185391", "repo": "remdelaportemathurin/h-transport-materials", "base_commit": "ececfed169243ea62ef693baa673bdff47dd414e", "problem_statement": "Property.units shouldn't be dimensionless by default:\\nThe default behaviour of the units property should be returning the units of the pre-exponential factor (for ArrheniusProp)", "FAIL_TO_PASS": ["tests/test_arhenius_property.py::test_fit[data_T0-data_y0]", "tests/test_properties_group.py::test_mean[31.0-1.55]", "tests/test_fitting.py::test_fit_arhenius[D_025-E_D25]", "tests/test_arhenius_property.py::test_value[300-3-0.2]", "tests/test_fitting.py::test_fit_arhenius[D_01-E_D1]", "tests/test_fitting.py::test_fit_arhenius[D_07-E_D7]", "tests/test_fitting.py::test_fit_arhenius[D_011-E_D11]", "tests/test_fitting.py::test_fit_arhenius[D_022-E_D22]", "tests/test_fitting.py::test_fit_arhenius[D_027-E_D27]", "tests/test_properties_group.py::test_mean[60.0-3.0]", "tests/test_fitting.py::test_fit_arhenius[D_023-E_D23]", "tests/test_properties_group.py::test_mean[31.0-0.1]", "tests/test_fitting.py::test_fit_arhenius[D_015-E_D15]", "tests/test_arhenius_property.py::test_fit[data_T13-data_y13]", "tests/test_fitting.py::test_fit_arhenius[D_024-E_D24]", "tests/test_fitting.py::test_fit_arhenius[D_019-E_D19]", "tests/test_system.py::test_all_properties_have_required_attributes", "tests/test_arhenius_property.py::test_fit[data_T6-data_y6]", "tests/test_properties_group.py::test_mean[2.0-1.55]", "tests/test_properties_group.py::test_mean[60.0-0.1]", "tests/test_fitting.py::test_fit_arhenius[D_026-E_D26]", "tests/test_properties_group.py::test_mean[2.0-3.0]", "tests/test_arhenius_property.py::test_no_units_range_raises_warning", "tests/test_arhenius_property.py::test_fit[data_T15-data_y15]", "tests/test_arhenius_property.py::test_fit[data_T12-data_y12]", "tests/test_arhenius_property.py::test_fit[data_T9-data_y9]", "tests/test_conversion.py::test_ccSTP_to_mol", "tests/test_arhenius_property.py::test_fit[data_T5-data_y5]", "tests/test_fitting.py::test_fit_arhenius[D_010-E_D10]", "tests/test_arhenius_property.py::test_fit[data_T2-data_y2]", "tests/test_fitting.py::test_fit_arhenius[D_08-E_D8]", "tests/test_arhenius_property.py::test_fit[data_T4-data_y4]", "tests/test_properties_group.py::test_mean[31.0-3.0]", "tests/test_fitting.py::test_fit_arhenius[D_020-E_D20]", "tests/test_fitting.py::test_fit_arhenius[D_03-E_D3]", "tests/test_arhenius_property.py::test_fit[data_T11-data_y11]", "tests/test_fitting.py::test_fit_arhenius[D_014-E_D14]", "tests/test_properties_group.py::test_mean[2.0-0.1]", "tests/test_fitting.py::test_fit_arhenius[D_00-E_D0]", "tests/test_fitting.py::test_fit_arhenius[D_028-E_D28]", "tests/test_fitting.py::test_fit_arhenius[D_013-E_D13]", "tests/test_arhenius_property.py::test_fit[data_T14-data_y14]", "tests/test_fitting.py::test_fit_arhenius[D_012-E_D12]", "tests/test_arhenius_property.py::test_fit[data_T3-data_y3]", "tests/test_arhenius_property.py::test_fit[data_T10-data_y10]", "tests/test_properties_group.py::test_mean[60.0-1.55]", "tests/test_fitting.py::test_fit_arhenius[D_017-E_D17]", "tests/test_fitting.py::test_fit_arhenius[D_018-E_D18]", "tests/test_fitting.py::test_fit_arhenius[D_09-E_D9]", "tests/test_arhenius_property.py::test_fit[data_T1-data_y1]", "tests/test_properties_group.py::test_export_to_json", "tests/test_fitting.py::test_fit_arhenius[D_05-E_D5]", "tests/test_fitting.py::test_fit_arhenius[D_04-E_D4]", "tests/test_arhenius_property.py::test_value[205-6-0.8]", "tests/test_fitting.py::test_fit_arhenius[D_021-E_D21]", "tests/test_diffusivity.py::test_pre_exp_can_be_quantity", "tests/test_fitting.py::test_fit_arhenius[D_06-E_D6]", "tests/test_fitting.py::test_fit_arhenius[D_029-E_D29]", "tests/test_fitting.py::test_fit_arhenius[D_02-E_D2]", "tests/test_arhenius_property.py::test_fit[data_T7-data_y7]", "tests/test_fitting.py::test_fit_arhenius[D_016-E_D16]", "tests/test_arhenius_property.py::test_value[600-100000.0-1.2]", "tests/test_arhenius_property.py::test_fit_creates_temp_range", "tests/test_arhenius_property.py::test_fit[data_T8-data_y8]"], "PASS_TO_PASS": ["tests/test_system.py::test_that_groups_are_not_empty", "tests/test_properties_group.py::test_units_property", "tests/test_arhenius_property.py::test_act_energy_getter_fit", "tests/test_properties_group.py::test_filter_author_lower_case", "tests/test_materials.py::test_units_wrong_value[tungsten]", "tests/test_plotting.py::test_plot_group", "tests/test_property.py::test_bibdata_raises_error_when_bibsource_is_none", "tests/test_system.py::test_all_dissociations_are_dissociationncoeff", "tests/test_materials.py::test_units_wrong_value[cucrzr]", "tests/test_solubility.py::test_units_wrong_value[mol", "tests/test_property.py::test_bibdata[@article{article-minimal,\\n", "tests/test_plotting.py::test_plot", "tests/test_diffusivity.py::test_fit_with_units_data_T", "tests/test_diffusivity.py::test_fit_with_units_data_y", "tests/test_materials.py::test_units_wrong_value[lipb]", "tests/test_arhenius_property.py::test_data_y_removes_nan[data0]", "tests/test_property.py::test_nb_citations", "tests/test_properties_group.py::test_bibdata", "tests/test_arhenius_property.py::test_data_y_removes_nan[data1]", "tests/test_arhenius_property.py::test_no_units_T_in_value_raises_warning", "tests/test_system.py::test_all_diffusivities_are_diffusivity", "tests/test_arhenius_property.py::test_data_T_removes_nan[data0]", "tests/test_materials.py::test_units_wrong_value[flinak]", "tests/test_properties_group.py::test_iterable", "tests/test_properties_group.py::test_export_bib", "tests/test_solubility.py::test_units_wrong_value[1]", "tests/test_properties_group.py::test_filter_isotope_lower_case", "tests/test_materials.py::test_units_wrong_value[flibe]", "tests/test_property.py::test_nb_citations_no_citations_with_unknown_source", "tests/test_properties_group.py::test_adding_two_groups", "tests/test_plotting.py::test_plot_group_with_mixed_units", "tests/test_system.py::test_all_properties_have_references", "tests/test_arhenius_property.py::test_pre_exp_getter_fit", "tests/test_solubility.py::test_units_wrong_value[0]", "tests/test_arhenius_property.py::test_value_returns_pint_quantity", "tests/test_diffusivity.py::test_act_energy_can_be_quantity", "tests/test_property.py::test_bibdata[alberro_experimental_2015]", "tests/test_arhenius_property.py::test_no_units_act_energy_raises_warning", "tests/test_property.py::test_warning_overwriting_year", "tests/test_property.py::test_range_cannot_be_negative", "tests/test_solubility.py::test_units_wrong_value[coucou]", "tests/test_properties_group.py::test_filter_warns_when_no_props", "tests/test_system.py::test_all_recomb_are_recombinationcoeff", "tests/test_property.py::test_export_bib", "tests/test_property.py::test_author_year_from_bib_file", "tests/test_properties_group.py::test_mean_is_type_arrhenius_property", "tests/test_property.py::test_author_year_from_bib_source", "tests/test_solubility.py::test_units_wrong_value[True]", "tests/test_plotting.py::test_plot_without_inverse_temp", "tests/test_materials.py::test_units_wrong_value[copper]", "tests/test_property.py::test_has_doi", "tests/test_property.py::test_warning_overwriting_author", "tests/test_arhenius_property.py::test_no_units_preexp_raises_warning", "tests/test_system.py::test_all_solubilities_are_solubility", "tests/test_arhenius_property.py::test_data_T_removes_nan[data1]"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/remdelaportemathurin_h-transport-materials:ececfed169243ea62ef693baa673bdff47dd414e", "patch": "", "test_patch": "[\"diff --git a/tests/test_diffusivity.py b/tests/test_diffusivity.py\\nindex 50bfbab5..3107344f 100644\\n--- a/tests/test_diffusivity.py\\n+++ b/tests/test_diffusivity.py\\n@@ -7,7 +7,7 @@ def test_pre_exp_can_be_quantity():\\n         E_D=0.5 * htm.ureg.eV * htm.ureg.particle**-1,\\n     )\\n \\n-    assert prop.pre_exp == 1e-4\\n+    assert prop.pre_exp == 1e-4 * htm.ureg.m**2 * htm.ureg.second**-1\\n \\n \\n def test_act_energy_can_be_quantity():\\n\",\"diff --git a/tests/test_properties_group.py b/tests/test_properties_group.py\\nindex 648df79c..e4565df7 100644\\n--- a/tests/test_properties_group.py\\n+++ b/tests/test_properties_group.py\\n@@ -160,6 +160,8 @@ def test_export_to_json():\\n                 else:\\n                     if key == \\\"units\\\":\\n                         assert f\\\"{getattr(prop_ref, key):~}\\\" == val\\n+                    elif key == \\\"pre_exp\\\":\\n+                        assert getattr(prop_ref, key).magnitude == val\\n                     else:\\n                         assert getattr(prop_ref, key) == val\\n \\n\",\"diff --git a/tests/test_system.py b/tests/test_system.py\\nindex 0b8278d2..eeaef8cf 100644\\n--- a/tests/test_system.py\\n+++ b/tests/test_system.py\\n@@ -1,5 +1,7 @@\\n import h_transport_materials as htm\\n \\n+import pint\\n+\\n \\n def test_that_groups_are_not_empty():\\n     for group in [htm.diffusivities, htm.solubilities, htm.recombination_coeffs]:\\n@@ -29,7 +31,7 @@ def test_all_dissociations_are_dissociationncoeff():\\n def test_all_properties_have_required_attributes():\\n     for prop in htm.database:\\n         assert prop.material\\n-        assert isinstance(prop.pre_exp, (float, int))\\n+        assert isinstance(prop.pre_exp, pint.Quantity)\\n         assert isinstance(prop.act_energy, (float, int))\\n         assert prop.isotope\\n \\n\",\"diff --git a/tests/test_arhenius_property.py b/tests/test_arhenius_property.py\\nindex a80fe9ac..eb856a1d 100644\\n--- a/tests/test_arhenius_property.py\\n+++ b/tests/test_arhenius_property.py\\n@@ -26,7 +26,7 @@ def test_fit(data_T, data_y):\\n     )\\n \\n     my_prop.fit()\\n-    computed_values = my_prop.pre_exp, my_prop.act_energy\\n+    computed_values = my_prop.pre_exp.magnitude, my_prop.act_energy.magnitude\\n     assert expected_values == computed_values\\n \\n \\n\",\"diff --git a/tests/test_properties_group.py b/tests/test_properties_group.py\\nindex e4565df7..a6dcbc4b 100644\\n--- a/tests/test_properties_group.py\\n+++ b/tests/test_properties_group.py\\n@@ -89,7 +89,7 @@ def test_mean(mean_D_0, mean_E_D):\\n \\n     # test\\n     assert mean_prop.pre_exp == pytest.approx(mean_D_0, rel=0.2)\\n-    assert mean_prop.act_energy == pytest.approx(mean_E_D, rel=0.2)\\n+    assert mean_prop.act_energy.magnitude == pytest.approx(mean_E_D, rel=0.2)\\n \\n \\n def test_mean_is_type_arrhenius_property():\\n@@ -160,7 +160,7 @@ def test_export_to_json():\\n                 else:\\n                     if key == \\\"units\\\":\\n                         assert f\\\"{getattr(prop_ref, key):~}\\\" == val\\n-                    elif key == \\\"pre_exp\\\":\\n+                    elif key in [\\\"pre_exp\\\", \\\"act_energy\\\"]:\\n                         assert getattr(prop_ref, key).magnitude == val\\n                     else:\\n                         assert getattr(prop_ref, key) == val\\n\",\"diff --git a/tests/test_system.py b/tests/test_system.py\\nindex eeaef8cf..c67e5738 100644\\n--- a/tests/test_system.py\\n+++ b/tests/test_system.py\\n@@ -32,7 +32,7 @@ def test_all_properties_have_required_attributes():\\n     for prop in htm.database:\\n         assert prop.material\\n         assert isinstance(prop.pre_exp, pint.Quantity)\\n-        assert isinstance(prop.act_energy, (float, int))\\n+        assert isinstance(prop.act_energy, pint.Quantity)\\n         assert prop.isotope\\n \\n \\n\",\"diff --git a/tests/test_arhenius_property.py b/tests/test_arhenius_property.py\\nindex eb856a1d..0602310a 100644\\n--- a/tests/test_arhenius_property.py\\n+++ b/tests/test_arhenius_property.py\\n@@ -62,12 +62,12 @@ def test_act_energy_getter_fit():\\n     \\\"T,pre_exp,act_energy\\\", [(300, 3, 0.2), (205, 6, 0.8), (600, 1e5, 1.2)]\\n )\\n def test_value(T, pre_exp, act_energy):\\n-    my_prop = htm.ArrheniusProperty(\\n-        pre_exp=pre_exp * htm.ureg.dimensionless,\\n-        act_energy=act_energy * htm.ureg.eV * htm.ureg.particle**-1,\\n-    )\\n+    pre_exp *= htm.ureg.dimensionless\\n+    act_energy *= htm.ureg.eV * htm.ureg.particle**-1\\n+    T *= htm.ureg.K\\n+    my_prop = htm.ArrheniusProperty(pre_exp=pre_exp, act_energy=act_energy)\\n \\n-    computed_value = my_prop.value(T=T * htm.ureg.K)\\n+    computed_value = my_prop.value(T=T)\\n     expected_value = pre_exp * np.exp(-act_energy / htm.k_B / T)\\n     assert expected_value == computed_value\\n \\n\",\"diff --git a/tests/test_conversion.py b/tests/test_conversion.py\\nindex 8a211802..b7853e50 100644\\n--- a/tests/test_conversion.py\\n+++ b/tests/test_conversion.py\\n@@ -5,7 +5,7 @@\\n def test_ccSTP_to_mol():\\n     P = 101.35e3  # Pa\\n     T = 273.15  # K\\n-    R = htm.Rg\\n+    R = htm.Rg.magnitude\\n \\n     V_cm3 = 1.5  # cm3\\n     V_m3 = V_cm3 * 1e-6  # m3\\n\",\"diff --git a/tests/test_fitting.py b/tests/test_fitting.py\\nindex 90faf6c9..5b11a774 100644\\n--- a/tests/test_fitting.py\\n+++ b/tests/test_fitting.py\\n@@ -10,8 +10,8 @@\\n             D_0,\\n             E_D,\\n         )\\n-        for D_0 in np.logspace(-7, 20, num=6)\\n-        for E_D in np.linspace(0.1, 1.5, num=5)\\n+        for D_0 in np.logspace(-7, 20, num=6) * htm.ureg.dimensionless\\n+        for E_D in np.linspace(0.1, 1.5, num=5) * htm.ureg.eV * htm.ureg.particle**-1\\n     ],\\n )\\n def test_fit_arhenius(D_0, E_D):\\n@@ -19,7 +19,7 @@ def test_fit_arhenius(D_0, E_D):\\n     Fits the noisy data with an Arhenius law and compares the\\n     computed coefficients with the expected ones.\\n     \\\"\\\"\\\"\\n-    T = np.linspace(300, 1200)\\n+    T = np.linspace(300, 1200) * htm.ureg.K\\n     D = D_0 * np.exp(-E_D / htm.k_B / T)\\n \\n     # add noise\\n\",\"diff --git a/tests/test_arhenius_property.py b/tests/test_arhenius_property.py\\nindex 0602310a..ca743a97 100644\\n--- a/tests/test_arhenius_property.py\\n+++ b/tests/test_arhenius_property.py\\n@@ -19,11 +19,10 @@\\n     ],\\n )\\n def test_fit(data_T, data_y):\\n+    data_y *= htm.ureg.dimensionless\\n     expected_values = htm.fitting.fit_arhenius(data_y, data_T)\\n \\n-    my_prop = htm.ArrheniusProperty(\\n-        data_T=data_T * htm.ureg.K, data_y=data_y * htm.ureg.dimensionless\\n-    )\\n+    my_prop = htm.ArrheniusProperty(data_T=data_T * htm.ureg.K, data_y=data_y)\\n \\n     my_prop.fit()\\n     computed_values = my_prop.pre_exp.magnitude, my_prop.act_energy.magnitude\\n\",\"diff --git a/tests/test_arhenius_property.py b/tests/test_arhenius_property.py\\nindex ca743a97..eaa07df1 100644\\n--- a/tests/test_arhenius_property.py\\n+++ b/tests/test_arhenius_property.py\\n@@ -20,9 +20,10 @@\\n )\\n def test_fit(data_T, data_y):\\n     data_y *= htm.ureg.dimensionless\\n+    data_T *= htm.ureg.K\\n     expected_values = htm.fitting.fit_arhenius(data_y, data_T)\\n \\n-    my_prop = htm.ArrheniusProperty(data_T=data_T * htm.ureg.K, data_y=data_y)\\n+    my_prop = htm.ArrheniusProperty(data_T=data_T, data_y=data_y)\\n \\n     my_prop.fit()\\n     computed_values = my_prop.pre_exp.magnitude, my_prop.act_energy.magnitude\\n\",\"diff --git a/tests/test_arhenius_property.py b/tests/test_arhenius_property.py\\nindex eaa07df1..96624a5f 100644\\n--- a/tests/test_arhenius_property.py\\n+++ b/tests/test_arhenius_property.py\\n@@ -80,7 +80,7 @@ def test_fit_creates_temp_range():\\n         data_y=[1, 2, 3] * htm.ureg.dimensionless,\\n     )\\n \\n-    assert my_prop.range == (300, 500)\\n+    assert my_prop.range == (300 * htm.ureg.K, 500 * htm.ureg.K)\\n \\n \\n @pytest.mark.parametrize(\\\"data\\\", [[1, 2, 3, np.nan], np.array([1, 2, 3, np.nan])])\\n\",\"diff --git a/tests/test_properties_group.py b/tests/test_properties_group.py\\nindex a6dcbc4b..62c503ba 100644\\n--- a/tests/test_properties_group.py\\n+++ b/tests/test_properties_group.py\\n@@ -155,8 +155,12 @@ def test_export_to_json():\\n         for key, val in prop_file.items():\\n             if hasattr(prop_ref, key):\\n                 if isinstance(val, list):\\n-                    for item1, item2 in zip(val, getattr(prop_ref, key)):\\n-                        assert item1 == item2\\n+                    if key == \\\"range\\\":\\n+                        prop_range = getattr(prop_ref, key)\\n+                        assert [prop_range[0].magnitude, prop_range[1].magnitude] == val\\n+                    else:\\n+                        for item1, item2 in zip(val, getattr(prop_ref, key)):\\n+                            assert item1 == item2\\n                 else:\\n                     if key == \\\"units\\\":\\n                         assert f\\\"{getattr(prop_ref, key):~}\\\" == val\\n\",\"diff --git a/tests/test_fitting.py b/tests/test_fitting.py\\nindex 5b11a774..1a8e2645 100644\\n--- a/tests/test_fitting.py\\n+++ b/tests/test_fitting.py\\n@@ -27,5 +27,5 @@ def test_fit_arhenius(D_0, E_D):\\n     noisy_D = D * 10**noise\\n \\n     computed_D_0, computed_E_D = htm.fitting.fit_arhenius(noisy_D, T)\\n-    assert computed_D_0 == pytest.approx(D_0, rel=0.3)\\n-    assert computed_E_D == pytest.approx(E_D, rel=0.3)\\n+    assert computed_D_0 == pytest.approx(D_0.magnitude, rel=0.3)\\n+    assert computed_E_D == pytest.approx(E_D.magnitude, rel=0.3)\\n\",\"diff --git a/tests/test_arhenius_property.py b/tests/test_arhenius_property.py\\nindex 96624a5f..cfd89a98 100644\\n--- a/tests/test_arhenius_property.py\\n+++ b/tests/test_arhenius_property.py\\n@@ -123,6 +123,36 @@ def test_no_units_T_in_value_raises_warning():\\n         prop.value(T=2)\\n \\n \\n+def test_no_units_range_raises_warning():\\n+    with pytest.warns(UserWarning, match=\\\"no units were given with temperature range\\\"):\\n+        htm.ArrheniusProperty(\\n+            0.1 * htm.ureg.m**2 * htm.ureg.s**-1,\\n+            act_energy=0.1 * htm.ureg.eV * htm.ureg.particle**-1,\\n+            range=(100, 200),\\n+        )\\n+\\n+\\n+def test_no_units_data_T_raises_warning():\\n+    with pytest.warns(UserWarning, match=\\\"no units were given with data_T\\\"):\\n+        htm.ArrheniusProperty(\\n+            data_T=[100, 200],\\n+            data_y=[\\n+                100,\\n+                200,\\n+            ]\\n+            * htm.ureg.m**2\\n+            * htm.ureg.s**-1,\\n+        )\\n+\\n+\\n+def test_no_units_data_y_raises_warning():\\n+    with pytest.warns(UserWarning, match=\\\"no units were given with data_y\\\"):\\n+        htm.ArrheniusProperty(\\n+            data_T=[100, 200] * htm.ureg.K,\\n+            data_y=[100, 200],\\n+        )\\n+\\n+\\n def test_no_units_preexp_raises_warning():\\n     with pytest.warns(\\n         UserWarning, match=\\\"no units were given with pre-exponential factor\\\"\"]", "hints_text": ""}
