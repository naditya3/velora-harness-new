{"instance_id": "1455368579033521", "repo": "fairmat-nfdi/nexus_definitions", "base_commit": "84443709fb403b296413715ee146116ab406656f", "problem_statement": "Fetching changes from NAIC PR1303 to FAIRmat:\\nFetch code from NIAC PR [1303](https://github.com/nexusformat/definitions/pull/1303) into fairmat branch.\\n- Rebase on `fairmat` branch\\n- Modify small keywords that are related with branches so that the ci/cd pass properly. \\n", "FAIL_TO_PASS": ["dev_tools/tests/test_nyaml2nxdl.py::test_conversion"], "PASS_TO_PASS": [], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/fairmat-nfdi_nexus_definitions:84443709fb403b296413715ee146116ab406656f", "patch": "", "test_patch": "[\"diff --git a/dev_tools/tests/test_nyaml2nxdl.py b/dev_tools/tests/test_nyaml2nxdl.py\\nindex 792d8d4..1a5350d 100755\\n--- a/dev_tools/tests/test_nyaml2nxdl.py\\n+++ b/dev_tools/tests/test_nyaml2nxdl.py\\n@@ -1,23 +1,21 @@\\n import os\\n+from pathlib import Path\\n \\n from click.testing import CliRunner\\n \\n from ..nyaml2nxdl import nyaml2nxdl as conv\\n from ..utils.nxdl_utils import find_definition_file\\n \\n-# import subprocess\\n-\\n \\n def test_conversion():\\n     root = find_definition_file(\\\"NXentry\\\")\\n-    # subprocess.run([\\\"python3\\\",\\\"-m\\\",\\\"dev_tools.nyaml2nxdl.nyaml2nxdl\\\",\\\"--input-file\\\",root])\\n     result = CliRunner().invoke(conv.launch_tool, [\\\"--input-file\\\", root])\\n     assert result.exit_code == 0\\n-    yaml = root[:-9] + \\\"_parsed.yaml\\\"\\n-    # subprocess.run([\\\"python3\\\",\\\"-m\\\",\\\"dev_tools.nyaml2nxdl.nyaml2nxdl\\\",\\\"--input-file\\\",yaml])\\n+    # Replace suffixes\\n+    yaml = root.parent / Path(root.with_suffix(\\\"\\\").stem + \\\"_parsed.yaml\\\")\\n     result = CliRunner().invoke(conv.launch_tool, [\\\"--input-file\\\", yaml])\\n     assert result.exit_code == 0\\n-    new_root = yaml[:-4] + \\\"nxdl.xml\\\"\\n+    new_root = yaml.with_suffix(\\\".nxdl.xml\\\")\\n     with open(root, encoding=\\\"utf-8\\\", mode=\\\"r\\\") as tmp_f:\\n         root_content = tmp_f.readlines()\\n     with open(new_root, encoding=\\\"utf-8\\\", mode=\\\"r\\\") as tmp_f:\\n\",\"diff --git a/pyproject.toml b/pyproject.toml\\ndeleted file mode 100644\\nindex 70bad9e..0000000\\n--- a/pyproject.toml\\n+++ /dev/null\\n@@ -1,43 +0,0 @@\\n-[build-system]\\n-requires = [\\\"setuptools>=64.0.1\\\", \\\"setuptools-scm[toml]>=6.2\\\"]\\n-build-backend = \\\"setuptools.build_meta\\\"\\n-\\n-[project]\\n-name = \\\"nexusdefinitions\\\"\\n-dynamic = [\\\"version\\\"]\\n-authors = [\\n-    { name = \\\"NIAC\\\" }\\n-]\\n-description = \\\"Nexus definitions\\\"\\n-readme = \\\"README.md\\\"\\n-license = { file = \\\"LGPL.txt\\\" }\\n-requires-python = \\\"\\\"\\n-classifiers = [\\n-    \\\"Operating System :: OS Independent\\\"\\n-]\\n-dependencies = [\\n-    \\\"lxml\\\",\\n-    \\\"pyyaml\\\",\\n-    \\\"click>=7.1.2\\\",\\n-    \\\"sphinx>=5\\\",\\n-    \\\"sphinx-tabs\\\",\\n-    \\\"sphinx-toolbox\\\",\\n-    \\\"sphinx_comments\\\",\\n-    \\\"pytest\\\",\\n-    \\\"black>=22.3\\\",\\n-    \\\"flake8>=4\\\",\\n-    \\\"isort>=5.10\\\",\\n-]\\n-\\n-[project.urls]\\n-\\\"Homepage\\\" = \\\"https://nexusformat.org\\\"\\n-\\n-[project.scripts]\\n-nyaml2nxdl = \\\"dev_tools.nyaml2nxdl.nyaml2nxdl:launch_tool\\\"\\n-\\n-[tools.setuptools_scm]\\n-version_scheme = \\\"guess-next-dev\\\"\\n-local_scheme = \\\"node-and-date\\\"\\n-\\n-[tool.setuptools]\\n-packages = [\\\"dev_tools\\\"]\"]", "hints_text": ""}
