{"instance_id": "725080836551892", "repo": "scailfin/flowserv-core", "base_commit": "46573c4e4030a77cd61657f4e038db734fd09cec", "problem_statement": "Environment Variable for Database WebApp flag:\\nAdd an environment variable to set the web_app flag for the global database object.", "FAIL_TO_PASS": ["tests/cli/test_cli_workflow.py::test_run_workflow", "tests/config/test_config_db.py::test_config_webapp", "tests/app/test_run_app.py::test_run_app_from_env[fsconfig0]", "tests/app/test_run_app.py::test_run_app_from_env[fsconfig1]", "tests/app/test_install_app.py::test_uninstall_app_from_env"], "PASS_TO_PASS": ["tests/service/run/test_run_arguments.py::test_check_file_argument", "tests/controller/test_post_proc_workflow.py::test_postproc_workflow[fsconfig0]", "tests/model/test_db.py::test_db_webapp[True-True]", "tests/model/group/test_group_manager.py::test_create_group[FileSystemStore]", "tests/model/workflow/test_workflow_manager.py::test_create_workflow_with_error[DiskStore]", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[C?x]]-None]", "tests/model/parameter/test_numeric_parameter.py::test_range_minmax_and_isclosed[[0,1]-True]", "tests/cli/test_read_arguments.py::test_read_file_parameter_with_uploads", "tests/model/group/test_group_files.py::test_upload_file[FileSystemStore]", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[[5,)-False-True-False]", "tests/model/files/test_file_store.py::test_store_name_and_configuration[FILE_SYSTEM]", "tests/model/parameter/test_enum_parameter.py::test_enum_parameter_value", "tests/model/test_run_manager.py::test_list_runs[FileSystemStore]", "tests/model/workflow/test_workflow_manager.py::test_get_workflow[DiskStore]", "tests/service/test_group_view.py::test_get_group_view", "tests/model/template/test_template_parameter.py::test_extract_parameter_name[name?B:C-name]", "tests/cli/test_cli_run.py::test_list_obsolete_runs", "tests/model/files/test_file_store.py::test_file_system_walk", "tests/controller/test_remote_controller.py::test_run_remote_workflow[False]", "tests/model/test_run_manager.py::test_success_run[FileSystemStore]", "tests/app/test_test_env.py::test_env_list_repository", "tests/model/test_db.py::test_missing_connect_error", "tests/app/test_run_app.py::test_run_app_error", "tests/model/parameter/test_enum_parameter.py::test_enum_parameter_from_dict", "tests/model/group/test_group_manager.py::test_delete_group[DiskStore]", "tests/cli/test_cli_workflow.py::test_list_workflows", "tests/service/test_init_backend.py::test_invalid_config", "tests/service/test_workflow_view.py::test_list_workflows_view", "tests/model/test_ranking_manager.py::test_multi_success_runs[DiskStore]", "tests/test_util.py::test_read_write_object", "tests/model/template/test_workflow_outputs.py::test_minimal_output_specification", "tests/service/test_group_view.py::test_update_group_view", "tests/model/group/test_group_manager.py::test_list_groups[DiskStore]", "tests/cli/test_read_arguments.py::test_read_string_parameters", "tests/model/user/test_authenticate.py::test_authenticate_user[DefaultAuthPolicy]", "tests/service/test_user_view.py::test_authenticate_user_view", "tests/test_util.py::test_datetime", "tests/model/workflow/test_workflow_manager.py::test_update_workflow_description", "tests/model/parameter/test_numeric_parameter.py::test_range_minmax_and_isclosed[(0,1]-False]", "tests/model/workflow/test_workflow_manager.py::test_create_workflow_with_alt_spec[FileSystemStore]", "tests/service/test_service_view.py::test_default_service_descriptor_view", "tests/model/test_validate_constraints.py::test_invalid_names[\\t]", "tests/model/user/test_user_manager.py::test_list_users", "tests/model/test_run_manager.py::test_success_run[DiskStore]", "tests/cli/test_cli_admin.py::test_config_options", "tests/config/test_config_auth.py::test_config_auth_policy", "tests/model/files/test_file_store.py::test_delete_files_and_folders[FILE_SYSTEM]", "tests/model/workflow/test_workflow_state.py::test_cancel_state", "tests/service/test_user_view.py::test_reset_password_view", "tests/model/workflow/test_workflow_manifest.py::test_invalid_manifest[doc2]", "tests/app/test_test_env.py::test_create_env_for_docker", "tests/service/run/test_list_runs.py::test_list_runs_view", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[(5,)-False-False-False]", "tests/model/workflow/test_state_serialize.py::test_error_state", "tests/model/workflow/test_workflow_manager.py::test_get_workflow[FileSystemStore]", "tests/model/template/test_template_parameter.py::test_replace_arguments", "tests/model/group/test_group_manager.py::test_list_groups[FileSystemStore]", "tests/model/parameter/test_numeric_parameter.py::test_range_errors[[a,b]]", "tests/cli/test_read_arguments.py::test_read_boolean_parameters", "tests/cli/test_cli_admin.py::test_init_without_force", "tests/controller/test_multiproc_controller.py::test_run_helloworld_async[fsconfig0-None]", "tests/model/test_run_manager.py::test_delete_run[DiskStore]", "tests/model/workflow/test_workflow_manager.py::test_create_workflow_with_alt_manifest[DiskStore]", "tests/model/files/test_file_store.py::test_store_and_copy_folder[BUCKET]", "tests/cli/test_cli_admin.py::test_basedir_argument", "tests/config/test_config_db.py::test_config_database", "tests/model/parameter/test_boolean_parameter.py::test_boolean_parameter_from_dict", "tests/model/user/test_authenticate.py::test_authenticate_user[OpenAccessAuth]", "tests/model/parameter/test_string_parameter.py::test_invalid_serialization", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[__aAfshdksdfhgks___jh_5849-True]", "tests/model/parameter/test_numeric_parameter.py::test_range_errors[[5.6,2.7]]", "tests/model/workflow/test_workflow_manager.py::test_create_workflow_with_alt_spec[DiskStore]", "tests/service/test_init_backend.py::test_get_default_backend", "tests/model/workflow/test_workflow_manager.py::test_update_workflow_name", "tests/model/template/test_template_spec.py::test_validate_arguments", "tests/model/template/test_template_parameter.py::test_extract_parameter_name[", "tests/model/test_run_manager.py::test_create_run_errors[FileSystemStore]", "tests/model/test_validate_constraints.py::test_invalid_names[None]", "tests/model/files/test_file_store.py::test_store_name_and_configuration[BUCKET]", "tests/model/template/test_workflow_outputs.py::test_maximal_output_specification", "tests/model/parameter/test_numeric_parameter.py::test_range_errors[[4,5]", "tests/service/test_user_view.py::test_register_user_view", "tests/config/test_config_auth.py::test_config_auth_ttl", "tests/model/user/test_token_timeout.py::test_login_after_timeout[OpenAccessAuth]", "tests/app/test_test_env.py::test_run_helloworld_with_diff_inputs", "tests/service/test_init_backend.py::test_get_state_engine", "tests/model/template/test_template_parameter.py::test_parameter_index_serialization", "tests/controller/test_multiproc_controller.py::test_cancel_run_helloworld", "tests/model/workflow/test_workflow_manager.py::test_delete_workflow[FileSystemStore]", "tests/model/template/test_template_parameter.py::test_expand_parameter_value[$[[A", "tests/model/parameter/test_file_parameter.py::test_invalid_serialization", "tests/model/test_run_manager.py::test_error_run[DiskStore]", "tests/model/group/test_group_files.py::test_list_files[DiskStore]", "tests/model/template/test_template_parameter.py::test_extract_parameter_name[n", "tests/config/test_config_remote.py::test_config_poll_interval", "tests/model/template/test_template_schema.py::test_result_column_type", "tests/service/postproc/test_postproc_client.py::test_workflow_postproc_client", "tests/model/parameter/test_numeric_parameter.py::test_range_errors[]", "tests/test_util.py::test_cleardir", "tests/config/test_config_api.py::test_config_host", "tests/model/workflow/test_workflow_state.py::test_success_state", "tests/config/test_config_api.py::test_config_path", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[[5,]-False-True-True]", "tests/controller/test_post_proc_workflow.py::test_postproc_workflow_errors", "tests/model/parameter/test_numeric_parameter.py::test_numeric_parameter[int-(5,]]", "tests/model/test_run_manager.py::test_cancel_run[DiskStore]", "tests/service/run/test_poll_runs.py::test_poll_active_runs_view", "tests/service/test_workflow_view.py::test_delete_workflow_view", "tests/model/parameter/test_numeric_parameter.py::test_create_numeric_parameter_error", "tests/controller/test_remote_controller.py::test_cancel_remote_workflow", "tests/controller/test_sync_controller.py::test_run_helloworld_sync[/app/repo/tests/controller/../.files/template/./hello-world.yaml-SUCCESS]", "tests/model/parameter/test_numeric_parameter.py::test_numeric_parameter[float-(5,]]", "tests/config/test_config_api.py::test_config_name", "tests/model/group/test_group_files.py::test_list_files[FileSystemStore]", "tests/model/parameter/test_file_parameter.py::test_file_parameter_value", "tests/model/workflow/test_state_serialize.py::test_invalid_object", "tests/app/test_test_env.py::test_run_helloworld_in_env[/app/repo/tests/app/../.files/benchmark/helloworld-/app/repo/tests/app/../.files/benchmark/helloworld/benchmark-with-outputs.yaml-greetings]", "tests/model/test_run_manager.py::test_delete_run[FileSystemStore]", "tests/model/parameter/test_numeric_parameter.py::test_numeric_parameter[float-None]", "tests/model/test_ranking_manager.py::test_multi_success_runs[FileSystemStore]", "tests/model/parameter/test_enum_parameter.py::test_invalid_serialization", "tests/model/files/test_file_store.py::test_load_file_and_write[BUCKET]", "tests/service/test_group_view.py::test_delete_group_view", "tests/model/workflow/test_workflow_state.py::test_running_state", "tests/model/files/test_file_store.py::test_file_size[BUCKET]", "tests/service/test_file_uploads.py::test_list_group_files_view", "tests/model/user/test_token_timeout.py::test_authenticate_after_timeout[DefaultAuthPolicy]", "tests/service/run/test_create_run.py::test_create_successful_run_view", "tests/model/parameter/test_boolean_parameter.py::test_boolean_parameter_value", "tests/model/parameter/test_numeric_parameter.py::test_range_errors[4,8]]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa-True]", "tests/model/test_db.py::test_db_webapp[False-False]", "tests/service/run/test_run_results.py::test_result_archive", "tests/service/test_user_view.py::test_list_users_view", "tests/model/parameter/test_numeric_parameter.py::test_range_minmax_and_isclosed[[0,1)-False]", "tests/config/test_config_controller.py::test_config_async_engine", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[(5,]-False-False-True]", "tests/model/group/test_group_files.py::test_get_file[FileSystemStore]", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[(,5)-False-False-False]", "tests/model/template/test_template_parameter.py::test_expand_parameter_value[$[[C]]-args4-default]", "tests/model/test_run_manager.py::test_create_run_errors[DiskStore]", "tests/model/parameter/test_numeric_parameter.py::test_range_constraint_intervals[[", "tests/service/run/test_run_results.py::test_access_run_result_files", "tests/controller/test_remote_controller.py::test_run_remote_workflow[True]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[aAfshdksdfhgksdfjh_5849-True]", "tests/model/test_run_manager.py::test_run_parameters[DiskStore]", "tests/model/template/test_workflow_outputs.py::test_error_specification", "tests/cli/test_read_arguments.py::test_read_empty_list", "tests/model/parameter/test_string_parameter.py::test_string_parameter_value", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[12345-True]", "tests/service/postproc/test_postproc_results.py::test_workflow_postproc_results", "tests/model/template/test_template_spec.py::test_template_serialization", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[[,5]-True-True-False]", "tests/config/test_config_api.py::test_config_basedir", "tests/model/template/test_template_parameter.py::test_get_parameter_value_exception[$[[B?x]]]", "tests/model/workflow/test_state_serialize.py::test_running_state", "tests/model/test_run_manager.py::test_obsolete_runs[DiskStore]", "tests/service/test_api_init.py::test_api_components", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[A?x]]-x]", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[A]]-A]", "tests/service/run/test_run_outputs.py::test_run_workflow_with_outputs", "tests/model/template/test_template_schema.py::test_sort_column_serialization", "tests/cli/test_cli_run.py::test_delete_obsolete_runs", "tests/model/workflow/test_workflow_manager.py::test_workflow_name", "tests/model/test_db.py::test_db_webapp[False-True]", "tests/model/test_validate_constraints.py::test_valid_names[", "tests/model/test_ranking_manager.py::test_empty_ranking[DiskStore]", "tests/model/test_run_manager.py::test_invalid_state_transitions[DiskStore]", "tests/model/user/test_user_manager.py::test_activate_user", "tests/model/parameter/test_boolean_parameter.py::test_invalid_serialization", "tests/service/test_group_view.py::test_create_group_view", "tests/model/workflow/test_workflow_manager.py::test_create_workflow[DiskStore-def]", "tests/model/test_run_manager.py::test_error_run[FileSystemStore]", "tests/cli/test_read_arguments.py::test_read_numeric_parameters", "tests/cli/test_cli_workflow.py::test_update_workflow", "tests/model/user/test_group_run_members.py::test_group_and_run_membership[DefaultAuthPolicy-False]", "tests/model/test_db.py::test_db_webapp[True-False]", "tests/model/test_validate_constraints.py::test_valid_names[A]", "tests/model/test_run_manager.py::test_run_parameters[FileSystemStore]", "tests/model/test_ranking_manager.py::test_empty_ranking[FileSystemStore]", "tests/model/test_run_manager.py::test_invalid_state_transitions[FileSystemStore]", "tests/model/files/test_file_store.py::test_delete_files_and_folders[BUCKET]", "tests/model/workflow/test_workflow_manifest.py::test_invalid_manifest[doc1]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[aAfshdksdfhgksdfjh-5849-False]", "tests/config/test_config_api.py::test_config_url", "tests/service/test_workflow_view.py::test_update_workflow_view", "tests/service/test_group_view.py::test_list_groups_view", "tests/model/files/test_file_store.py::test_file_size[FILE_SYSTEM]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[-False]", "tests/model/group/test_group_files.py::test_get_file[DiskStore]", "tests/model/template/test_template_parameter.py::test_expand_parameter_value[$[[A]]", "tests/model/workflow/test_workflow_manifest.py::test_getfile_for_relative_argument", "tests/model/template/test_template_schema.py::test_result_column_path", "tests/service/test_api_init.py::test_initialize_filestore_from_env", "tests/cli/test_cli_admin.py::test_create_basedir", "tests/model/test_run_manager.py::test_list_runs[DiskStore]", "tests/model/files/test_file_store.py::test_load_file_and_write[FILE_SYSTEM]", "tests/model/test_validate_constraints.py::test_invalid_names[]", "tests/model/group/test_group_files.py::test_delete_file[FileSystemStore]", "tests/config/test_config.py::test_get_variable_value", "tests/service/test_service_view.py::test_service_descriptor_with_custom_labels_view", "tests/model/template/test_template_parameter.py::test_expand_parameter_value[$[[A]]-args0-1]", "tests/controller/test_post_proc_workflow.py::test_postproc_workflow[fsconfig1]", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[C?x:y]]-y]", "tests/model/group/test_group_manager.py::test_delete_group[FileSystemStore]", "tests/model/template/test_template_parameter.py::test_get_parameter_value_exception[$[[a?x]]]", "tests/model/workflow/test_state_serialize.py::test_pending_state", "tests/model/workflow/test_workflow_manager.py::test_create_workflow[FileSystemStore-abc]", "tests/model/workflow/test_workflow_manager.py::test_create_workflow_with_alt_manifest[FileSystemStore]", "tests/model/user/test_user_manager.py::test_register_user", "tests/model/workflow/test_workflow_repository.py::test_workflow_repository_get", "tests/service/run/test_delete_runs.py::test_delete_runs_view", "tests/model/parameter/test_file_parameter.py::test_file_parameter_from_dict", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[B?x:y]]-x]", "tests/model/test_validate_constraints.py::test_invalid_names[", "tests/model/parameter/test_numeric_parameter.py::test_range_errors[[,e,]]", "tests/model/test_db.py::test_session_scope", "tests/model/user/test_group_run_members.py::test_group_and_run_membership[OpenAccessAuth-True]", "tests/model/workflow/test_state_serialize.py::test_canceled_state", "tests/model/workflow/test_workflow_state.py::test_pending_state", "tests/model/workflow/test_workflow_repository.py::test_workflow_repository_list", "tests/model/parameter/test_numeric_parameter.py::test_numeric_parameter[int-None]", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[[,5)-True-False-False]", "tests/cli/test_cli_admin.py::test_register_user", "tests/model/parameter/test_string_parameter.py::test_string_parameter_from_dict", "tests/model/workflow/test_workflow_manager.py::test_create_workflow_with_error[FileSystemStore]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[aAfshdksdfhgksdfjh#$%5849-False]", "tests/model/group/test_group_files.py::test_upload_file[DiskStore]", "tests/cli/test_cli_app.py::test_app_installation", "tests/model/user/test_user_manager.py::test_reset_request_timeout", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[.-False]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa-False]", "tests/model/parameter/test_numeric_parameter.py::test_inf_range_constraint_intervals[(,5]-False-True-False]", "tests/model/user/test_token_timeout.py::test_authenticate_after_timeout[OpenAccessAuth]", "tests/config/test_config_app.py::test_app_key", "tests/service/test_file_uploads.py::test_upload_group_file_view", "tests/app/test_run_app.py::test_app_start_run", "tests/service/test_workflow_view.py::test_get_workflow_view", "tests/controller/test_remote_controller.py::test_run_remote_workflow_with_error", "tests/model/group/test_group_manager.py::test_update_groups[FileSystemStore]", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[A?", "tests/model/user/test_token_timeout.py::test_login_after_timeout[DefaultAuthPolicy]", "tests/controller/test_multiproc_controller.py::test_run_helloworld_async[fsconfig1-somenames.txt]", "tests/model/workflow/test_workflow_state.py::test_error_state", "tests/model/parameter/test_numeric_parameter.py::test_range_minmax_and_isclosed[(0,1)-False]", "tests/model/files/test_file_store.py::test_store_and_copy_folder[FILE_SYSTEM]", "tests/service/run/test_cancel_runs.py::test_cancel_runs_view", "tests/model/template/test_template_parameter.py::test_get_parameter_value_exception[$[[B?x:y]]]", "tests/test_util.py::test_jquery", "tests/controller/test_sync_controller.py::test_run_helloworld_sync[/app/repo/tests/controller/../.files/template/./template-invalid-cmd.yaml-ERROR]", "tests/model/workflow/test_workflow_manager.py::test_list_workflow", "tests/cli/test_cli_admin.py::test_config_error", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[A?x:y]]-x]", "tests/cli/test_cli_admin.py::test_list_repository", "tests/config/test_config_app.py::test_engine_sync", "tests/model/user/test_user_manager.py::test_reset_password", "tests/model/template/test_template_parameter.py::test_extract_parameter_name[A-A]", "tests/model/test_validate_constraints.py::test_valid_names[A_B-C]", "tests/model/test_run_manager.py::test_obsolete_runs[FileSystemStore]", "tests/service/test_ranking.py::test_workflow_result_ranking", "tests/model/test_validate_constraints.py::test_invalid_names[XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX]", "tests/model/group/test_group_manager.py::test_create_group[DiskStore]", "tests/model/workflow/test_workflow_manifest.py::test_invalid_manifest[doc0]", "tests/model/group/test_group_files.py::test_delete_file[DiskStore]", "tests/cli/test_read_arguments.py::test_read_file_parameters", "tests/service/test_file_uploads.py::test_delete_group_file_view", "tests/model/group/test_group_manager.py::test_update_groups[DiskStore]", "tests/model/test_validate_constraints.py::test_valid_workflow_identifier[None-True]", "tests/model/template/test_template_parameter.py::test_parameter_references", "tests/service/run/test_run_arguments.py::test_deserialize_file_argument", "tests/model/workflow/test_workflow_repository.py::test_workflow_repository_load", "tests/model/parameter/test_numeric_parameter.py::test_range_constraint_intervals[(", "tests/model/template/test_template_schema.py::test_schema_serialization", "tests/model/workflow/test_state_serialize.py::test_success_state", "tests/model/test_run_manager.py::test_cancel_run[FileSystemStore]", "tests/model/template/test_template_parameter.py::test_get_parameter_value[$[[D?", "tests/service/run/test_run_arguments.py::test_deserialize_run_argument", "tests/model/workflow/test_workflow_manager.py::test_delete_workflow[DiskStore]", "tests/config/test_config_api.py::test_config_port"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/scailfin_flowserv-core:46573c4e4030a77cd61657f4e038db734fd09cec", "patch": "[\"diff --git a/docs/configuration.rst b/docs/configuration.rst\\nindex f7147c3..d542e13 100644\\n--- a/docs/configuration.rst\\n+++ b/docs/configuration.rst\\n@@ -25,7 +25,12 @@ The base URL for all API resources is composed from the values in the environmen\\n Authentication\\n --------------\\n \\n-The environment variable *FLOWSERV_AUTH_TTL* is used to specify the time period (in milliseconds) for which an issued API key is valid after a user login.\\n+**flowServ** currently supports two modes of authentication. The selected mode is defined by the environment variable *FLOWSERV_AUTH*:\\n+\\n+- OPEN: Defines an open-access policy to the API that does not require an authenticated user for API calls.\\n+- DEFAULT: The default authentication policy requires a valid user identifier to be provided for API calls.\\n+\\n+The environment variable *FLOWSERV_AUTH_TTL* is used to specify the time period (in milliseconds) for which an issued API key (used to authenticate users) is valid after a user login.\\n \\n \\n \\n@@ -114,6 +119,9 @@ The following steps are an example for creating an initial empty database for **\\n     CREATE DATABASE flowserv WITH OWNER flowserv;\\n \\n \\n+If the environment variable *FLOWSERV_WEBAPP* is set to `True` scoped database sessions are used for web applications.\\n+\\n+\\n ----------\\n File Store\\n ----------\\n\",\"diff --git a/flowserv/app/__init__.py b/flowserv/app/__init__.py\\nindex 451aa28..320d7bf 100644\\n--- a/flowserv/app/__init__.py\\n+++ b/flowserv/app/__init__.py\\n@@ -8,6 +8,23 @@\\n \\n \\\"\\\"\\\"Helper method to create instances of the flowServ application object.\\\"\\\"\\\"\\n \\n+from flowserv.app.base import App\\n from flowserv.app.base import install_app as install  # noqa: F401\\n from flowserv.app.base import open_app as open  # noqa: F401\\n from flowserv.app.base import uninstall_app as uninstall  # noqa: F401\\n+\\n+\\n+def flowapp(identifier: str) -> App:\\n+    \\\"\\\"\\\"Helper method to hide app parameters for code that references a workflow\\n+    by its identifier.\\n+\\n+    Parameters\\n+    ----------\\n+    identifier: string\\n+        Unique workflow identifier.\\n+\\n+    Returns\\n+    -------\\n+    flowserv.app.base.App\\n+    \\\"\\\"\\\"\\n+    return App(key=identifier)\\n\",\"diff --git a/flowserv/app/base.py b/flowserv/app/base.py\\nindex a0b2432..ed6ddda 100644\\n--- a/flowserv/app/base.py\\n+++ b/flowserv/app/base.py\\n@@ -69,8 +69,8 @@ class App(object):\\n         \\\"\\\"\\\"\\n         if db is None:\\n             # Use the default database object if no database is given.\\n-            from flowserv.app.database import flowdb\\n-            db = flowdb\\n+            from flowserv.service.database import database\\n+            db = database\\n         self._db = db\\n         # Set API components.\\n         if engine is None:\\n\",\"diff --git a/flowserv/app/database.py b/flowserv/app/database.py\\ndeleted file mode 100644\\nindex 05d4a8b..0000000\\n--- a/flowserv/app/database.py\\n+++ /dev/null\\n@@ -1,19 +0,0 @@\\n-# This file is part of the Reproducible Open Benchmarks for Data Analysis\\n-# Platform (ROB).\\n-#\\n-# Copyright (C) [2019-2020] NYU.\\n-#\\n-# ROB is free software; you can redistribute it and/or modify it under the\\n-# terms of the MIT License; see LICENSE file for more details.\\n-\\n-\\\"\\\"\\\"Global variable for the flowapp database instance that is to be (re-)used\\n-by all requests to the web app and API. This database instance is anticipated\\n-to be used in a web server setting. We therefore set the wep_app flag to True\\n-in order to use scoped sessions for web applications.\\n-\\\"\\\"\\\"\\n-\\n-from flowserv.model.database import DB\\n-\\n-\\n-\\\"\\\"\\\"Global database instance for all requests.\\\"\\\"\\\"\\n-flowdb = DB(web_app=True)\\n\",\"diff --git a/flowserv/app/result.py b/flowserv/app/result.py\\nindex 16f9d31..479fa11 100644\\n--- a/flowserv/app/result.py\\n+++ b/flowserv/app/result.py\\n@@ -24,7 +24,7 @@ class RunResult(object):\\n     of a successful workflow run.\\n     \\\"\\\"\\\"\\n     def __init__(self, doc: Dict, loader: Callable):\\n-        \\\"\\\"\\\"initialize the run information and the file loader function. The\\n+        \\\"\\\"\\\"Initialize the run information and the file loader function. The\\n         loader function is a callable that takes two arguments, the run\\n         identifier and the file identifier.\\n \\n@@ -49,14 +49,17 @@ class RunResult(object):\\n         \\\"\\\"\\\"\\n         return self.doc['state']\\n \\n-    def files(self) -> List[Tuple[str, str]]:\\n-        \\\"\\\"\\\"Get list of (id, name)-pairs for run result files.\\n+    def files(self) -> List[Tuple[str, str, Dict]]:\\n+        \\\"\\\"\\\"Get list of (id, name, obj)-pairs for run result files. The id and\\n+        name are extracted from the serialized file object (obj) for\\n+        convenience.\\n \\n         Returns\\n         -------\\n-        list of tuples (string, string)\\n+        list of tuples (string, string, dict)\\n         \\\"\\\"\\\"\\n-        return [(obj['id'], obj['name']) for obj in self.doc.get('files', {})]\\n+        files = self.doc.get('files', {})\\n+        return [(obj['id'], obj['name'], obj) for obj in files]\\n \\n     def get_file(\\n         self, key: str, raise_error: Optional[bool] = True\\n\",\"diff --git a/flowserv/cli/app.py b/flowserv/cli/app.py\\nindex cb88559..6492207 100644\\n--- a/flowserv/cli/app.py\\n+++ b/flowserv/cli/app.py\\n@@ -49,9 +49,16 @@ import flowserv.config.app as config\\n     required=False,\\n     help='Optional path to workflow manifest file.'\\n )\\n+@click.option(\\n+    '-g', '--ignore_postproc',\\n+    is_flag=True,\\n+    default=False,\\n+    help='Print run logs'\\n+)\\n @click.argument('template')\\n def install_application(\\n-    key, name, description, instructions, specfile, manifest, template\\n+    key, name, description, instructions, specfile, manifest, template,\\n+    ignore_postproc\\n ):\\n     \\\"\\\"\\\"Install workflow from local folder or repository.\\\"\\\"\\\"\\n     # Install the application from the given workflow template.\\n@@ -62,7 +69,8 @@ def install_application(\\n         description=description,\\n         instructions=instructions,\\n         specfile=specfile,\\n-        manifestfile=manifest\\n+        manifestfile=manifest,\\n+        ignore_postproc=ignore_postproc\\n     )\\n     click.echo('export {}={}'.format(config.FLOWSERV_APP, app_key))\\n \\n\",\"diff --git a/flowserv/cli/workflow.py b/flowserv/cli/workflow.py\\nindex 5f98f5f..8f91798 100644\\n--- a/flowserv/cli/workflow.py\\n+++ b/flowserv/cli/workflow.py\\n@@ -87,7 +87,7 @@ def run_workflow(identifier, output=None, verbose=False):\\n             click.echo(msg)\\n     else:\\n         click.echo('\\\\nRun files\\\\n---------')\\n-        for _, key in run.files():\\n+        for _, key, _ in run.files():\\n             click.echo(key)\\n             if output:\\n                 out_file = os.path.join(output, key)\\n@@ -100,7 +100,7 @@ def run_workflow(identifier, output=None, verbose=False):\\n                     click.echo(msg)\\n             else:\\n                 click.echo('\\\\nPost-Processing files\\\\n---------------------')\\n-                for _, key in postrun.files():\\n+                for _, key, _ in postrun.files():\\n                     click.echo(key)\\n                     if output:\\n                         out_file = os.path.join(output, key)\\n\",\"diff --git a/flowserv/config/database.py b/flowserv/config/database.py\\nindex 0e812b3..5493931 100644\\n--- a/flowserv/config/database.py\\n+++ b/flowserv/config/database.py\\n@@ -14,16 +14,19 @@ are in upper case to emphasize that they access configuration values that are\\n expected to remain constant throughout the lifespan of a running application.\\n \\\"\\\"\\\"\\n \\n+from typing import Optional\\n+\\n from flowserv.config.base import get_variable\\n \\n \\n \\\"\\\"\\\"Environment variable that contains the database connection string.\\\"\\\"\\\"\\n FLOWSERV_DB = 'FLOWSERV_DATABASE'\\n+FLOWSERV_WEBAPP = 'FLOWSERV_WEBAPP'\\n \\n \\n # -- Public helper method to access configuration values ----------------------\\n \\n-def DB_CONNECT(value=None):\\n+def DB_CONNECT(value: Optional[str] = None) -> str:\\n     \\\"\\\"\\\"Get the database connect string from the environment variable\\n     'FLOWSERV_DATABASE'.  If a connect string was given (e.g., by the user)\\n     that value will be returned. Otherwise, the value is retrieved from the\\n@@ -32,7 +35,7 @@ def DB_CONNECT(value=None):\\n \\n     Parameters\\n     ----------\\n-    value: bool, default=None\\n+    value: string, default=None\\n         User-provided value.\\n \\n     Returns\\n@@ -49,3 +52,33 @@ def DB_CONNECT(value=None):\\n         name=FLOWSERV_DB,\\n         raise_error=True\\n     )\\n+\\n+\\n+def WEBAPP(value: Optional[bool] = None) -> bool:\\n+    \\\"\\\"\\\"Get the value for the database as web application flag. The web_app flag\\n+    is configured using the FLOWSERV_WEBAPP environment variable. If a default\\n+    value s given that value will be returned. If the variable is not set the\\n+    returned default value is False.\\n+\\n+    Parameters\\n+    ----------\\n+    value: bool, default=None\\n+        User-provided value.\\n+\\n+    Returns\\n+    -------\\n+    bool\\n+    \\\"\\\"\\\"\\n+    if value is not None:\\n+        return value\\n+    value = get_variable(\\n+        name=FLOWSERV_WEBAPP,\\n+        default_value=None,\\n+        raise_error=False\\n+    )\\n+    if value is None:\\n+        return False\\n+    if value in ['True', 'true']:\\n+        return True\\n+    else:\\n+        return False\\n\",\"diff --git a/flowserv/controller/serial/docker.py b/flowserv/controller/serial/docker.py\\nindex 98327d6..0272c5e 100644\\n--- a/flowserv/controller/serial/docker.py\\n+++ b/flowserv/controller/serial/docker.py\\n@@ -97,7 +97,7 @@ def docker_run(run_id, rundir, state, output_files, steps):\\n         strace = util.stacktrace(ex)\\n         logging.debug('\\\\n'.join(strace))\\n         result_state = state.error(messages=strace)\\n-        return run_id, serialize.serialize_state(result_state)\\n+        return run_id, rundir, serialize.serialize_state(result_state)\\n     # Create list of output files that were generated.\\n     files = list()\\n     for relative_path in output_files:\\n\",\"diff --git a/flowserv/model/database.py b/flowserv/model/database.py\\nindex f8a35f4..6d8a3ad 100644\\n--- a/flowserv/model/database.py\\n+++ b/flowserv/model/database.py\\n@@ -10,6 +10,8 @@\\n sessions as well as to create a fresh database.\\n \\\"\\\"\\\"\\n \\n+import os\\n+\\n from sqlalchemy import create_engine\\n from sqlalchemy.orm import sessionmaker, scoped_session\\n \\n@@ -26,18 +28,18 @@ class DB(object):\\n     \\\"\\\"\\\"Wrapper to establish a database connection and create the database\\n     schema.\\n     \\\"\\\"\\\"\\n-    def __init__(self, connect_url=None, web_app=False, echo=False):\\n+    def __init__(self, connect_url=None, web_app=None, echo=False):\\n         \\\"\\\"\\\"Initialize the database connection string. If no connect string is\\n         given an attempt is made to access the value in the respective\\n         environment variable. If the variable is not set an error is raised.\\n \\n         Parameters\\n         ----------\\n-        connect_url: string, optional\\n+        connect_url: string, default=None\\n             Database connection string.\\n-        web_app: bool, optional\\n+        web_app: bool, default=None\\n             Use scoped sessions for web applications if set to True.\\n-        echo: bool, optional\\n+        echo: bool, default=False\\n             Flag that controlls whether the created engine is verbose or not.\\n \\n         Raises\\n@@ -46,6 +48,14 @@ class DB(object):\\n         \\\"\\\"\\\"\\n         # Ensure that the connection URL is set.\\n         connect_url = config.DB_CONNECT(value=connect_url)\\n+        # Get web_app flag from configuration.\\n+        web_app = config.WEBAPP(value=web_app)\\n+        # If the URL references a SQLite database ensure that the directory for\\n+        # the database file exists (Issue #68).\\n+        if connect_url.startswith('sqlite://'):\\n+            dbdir = os.path.dirname(connect_url[9:])\\n+            if dbdir:\\n+                os.makedirs(dbdir, exist_ok=True)\\n         if echo:\\n             import logging\\n             logging.info('Connect to database Url %s' % (connect_url))\\n\",\"diff --git a/flowserv/model/files/base.py b/flowserv/model/files/base.py\\nindex 5a96a82..ad16d6d 100644\\n--- a/flowserv/model/files/base.py\\n+++ b/flowserv/model/files/base.py\\n@@ -27,6 +27,7 @@ The folder structure is currently as follows:\\n \\\"\\\"\\\"\\n \\n from abc import ABCMeta, abstractmethod\\n+from io import BytesIO\\n from typing import IO, List, Tuple\\n \\n import os\\n@@ -174,6 +175,58 @@ class DatabaseFile(FileObject):\\n         self.fileobj.store(filename)\\n \\n \\n+# -- Wrapper for files that are uploaded as part of a Flask request -----------\\n+\\n+class FlaskFile(FileObject):\\n+    \\\"\\\"\\\"File object implementation for files that are uploaded via Flask\\n+    requests as werkzeug.FileStorage objects.\\n+    \\\"\\\"\\\"\\n+    def __init__(self, file):\\n+        \\\"\\\"\\\"Initialize the reference to the uploaded file object.\\n+\\n+        Parameters\\n+        ----------\\n+        file: werkzeug.FileStorage\\n+            File object that was uploaded as part of a Flask request.\\n+        \\\"\\\"\\\"\\n+        self.file = file\\n+\\n+    def open(self) -> IO:\\n+        \\\"\\\"\\\"Get file contents as a BytesIO buffer.\\n+\\n+        Returns\\n+        -------\\n+        io.BytesIO\\n+\\n+        Raises\\n+        ------\\n+        flowserv.error.UnknownFileError\\n+        \\\"\\\"\\\"\\n+        buf = BytesIO()\\n+        self.file.save(buf)\\n+        buf.seek(0)\\n+        return buf\\n+\\n+    def size(self) -> int:\\n+        \\\"\\\"\\\"Get size of the file in the number of bytes.\\n+\\n+        Returns\\n+        -------\\n+        int\\n+        \\\"\\\"\\\"\\n+        return self.file.content_length\\n+\\n+    def store(self, filename: str):\\n+        \\\"\\\"\\\"Write file content to disk.\\n+\\n+        Parameters\\n+        ----------\\n+        filename: string\\n+            Name of the file to which the content is written.\\n+        \\\"\\\"\\\"\\n+        self.file.save(filename)\\n+\\n+\\n # -- Abstract file store ------------------------------------------------------\\n \\n class FileStore(metaclass=ABCMeta):\\n\",\"diff --git a/flowserv/model/parameter/enum.py b/flowserv/model/parameter/enum.py\\nindex ca5baee..b11c818 100644\\n--- a/flowserv/model/parameter/enum.py\\n+++ b/flowserv/model/parameter/enum.py\\n@@ -152,3 +152,20 @@ class EnumParameter(ParameterBase):\\n         obj = super().to_dict()\\n         obj['values'] = self.values\\n         return obj\\n+\\n+\\n+# -- Helper Methods -----------------------------------------------------------\\n+\\n+def is_enum(para: ParameterBase) -> bool:\\n+    \\\"\\\"\\\"Test if the given parameter is of type PARA_ENUM.\\n+\\n+    Parameters\\n+    ----------\\n+    para: flowserv.model.parameter.base.ParameterBase\\n+        Template parameter definition.\\n+\\n+    Returns\\n+    -------\\n+    bool\\n+    \\\"\\\"\\\"\\n+    return para.type_id == PARA_ENUM\\n\",\"diff --git a/flowserv/model/parameter/numeric.py b/flowserv/model/parameter/numeric.py\\nindex 07ede45..8cc63ab 100644\\n--- a/flowserv/model/parameter/numeric.py\\n+++ b/flowserv/model/parameter/numeric.py\\n@@ -279,6 +279,8 @@ class NumericParameter(ParameterBase):\\n         elif self.type_id == PARA_INT:\\n             try:\\n                 value = int(value)\\n+            except OverflowError:\\n+                value = float('inf')\\n             except (TypeError, ValueError):\\n                 raise err.InvalidArgumentError(\\\"no int '{}'\\\".format(value))\\n         else:\\n@@ -337,3 +339,18 @@ def is_int(para: ParameterBase) -> bool:\\n     bool\\n     \\\"\\\"\\\"\\n     return para.type_id == PARA_INT\\n+\\n+\\n+def is_numeric(para: ParameterBase) -> bool:\\n+    \\\"\\\"\\\"Test if the given parameter is of type PARA_FLOAT or PARA_INT.\\n+\\n+    Parameters\\n+    ----------\\n+    para: flowserv.model.parameter.base.ParameterBase\\n+        Template parameter definition.\\n+\\n+    Returns\\n+    -------\\n+    bool\\n+    \\\"\\\"\\\"\\n+    return para.type_id in NUMERIC_TYPES\\n\",\"diff --git a/flowserv/version.py b/flowserv/version.py\\nindex ca19a07..4eab8ea 100644\\n--- a/flowserv/version.py\\n+++ b/flowserv/version.py\\n@@ -7,4 +7,4 @@\\n # terms of the MIT License; see LICENSE file for more details.\\n \\n \\\"\\\"\\\"Information about the current version of the flowServ package.\\\"\\\"\\\"\\n-__version__ = '0.5.0'\\n+__version__ = '0.5.1'\\n\",\"diff --git a/flowserv/view/run.py b/flowserv/view/run.py\\nindex 4497775..4ad3873 100644\\n--- a/flowserv/view/run.py\\n+++ b/flowserv/view/run.py\\n@@ -143,7 +143,7 @@ class RunSerializer(Serializer):\\n                     if fspec.widget is not None:\\n                         obj[LABELS['FILE_WIDGET']] = fspec.widget\\n                     if fspec.format is not None:\\n-                        obj[LABELS['FILE_TITLE']] = fspec.format\\n+                        obj[LABELS['FILE_FORMAT']] = fspec.format\\n                 files.append(obj)\\n             doc[LABELS['RUN_FILES']] = files\\n         return doc\\n\"]", "test_patch": "[\"diff --git a/changelog.md b/changelog.md\\nindex e4be55f..5556b1b 100644\\n--- a/changelog.md\\n+++ b/changelog.md\\n@@ -71,6 +71,18 @@\\n * Add functionality for asynchronous runs to flowserv application object.\\n * Change flowserv application run result object (\\\\#61).\\n * Configure authentication policy via environment variables.\\n-* Create separate groups for each workflow run in the app (\\\\#62)\\n-* RunResults `get_file` returns a single file object (\\\\#63)\\n-* Flowserv class for running workflows in notebook environments (\\\\#64, \\\\#65)\\n+* Create separate groups for each workflow run in the app (\\\\#62).\\n+* RunResults `get_file` returns a single file object (\\\\#63).\\n+* Flowserv class for running workflows in notebook environments (\\\\#64, \\\\#65).\\n+\\n+\\n+### 0.5.1 - 2020-10-03\\n+\\n+* Create directory for SQLite database files (\\\\#68).\\n+* Type tests for enum and numeric parameters.\\n+* Add serialized file handle to file listing in the application run result.\\n+* Fix bug in run handle serialization for output files.\\n+* Fix bug in Docker engine (return rundir in error case).\\n+* Add ignore postproc option to `flowserv install` (\\\\#69).\\n+* File object for files that are uploaded as part of Flask requests.\\n+* Make database web_app flag configurable using environment variable (\\\\#70).\\n\",\"diff --git a/flowserv/tests/files.py b/flowserv/tests/files.py\\nindex df68f18..0239fcb 100644\\n--- a/flowserv/tests/files.py\\n+++ b/flowserv/tests/files.py\\n@@ -15,12 +15,39 @@ import os\\n from io import BytesIO\\n from typing import Dict, IO, List, Optional, Union\\n \\n-from flowserv.model.files.base import IOFile\\n+from flowserv.model.files.base import FileObject, IOFile\\n \\n import flowserv.config.api as config\\n import flowserv.util as util\\n \\n \\n+class FileStorage(object):\\n+    \\\"\\\"\\\"Fake stream object that simulates a werkzeug.FileStorage object to test\\n+    the FlaskFile object. Wraps araond a given file object.\\n+    \\\"\\\"\\\"\\n+    def __init__(self, file: FileObject):\\n+        \\\"\\\"\\\"Initialize the wrapped file object.\\n+\\n+        Parameters\\n+        ----------\\n+        file: flowserv.model.files.FileObject\\n+            File data object\\n+        \\\"\\\"\\\"\\n+        self.file = file\\n+\\n+    @property\\n+    def content_length(self) -> int:\\n+        \\\"\\\"\\\"Get the size of the wrapped file.\\\"\\\"\\\"\\n+        return self.file.size()\\n+\\n+    def save(self, filename: Union[str, IO]):\\n+        \\\"\\\"\\\"Write file to disk or to a given IO buffer.\\\"\\\"\\\"\\n+        if isinstance(filename, str):\\n+            self.file.store(filename)\\n+        else:\\n+            filename.write(self.file.open().read())\\n+\\n+\\n # -- S3 Buckets ---------------------------------------------------------------\\n \\n class DiskBucket(object):\\n\",\"diff --git a/tests/.files/benchmark/helloworld/benchmark-outputs.yaml b/tests/.files/benchmark/helloworld/benchmark-outputs.yaml\\nindex 2190f13..36b833f 100644\\n--- a/tests/.files/benchmark/helloworld/benchmark-outputs.yaml\\n+++ b/tests/.files/benchmark/helloworld/benchmark-outputs.yaml\\n@@ -31,10 +31,9 @@ parameters:\\n       target: data/names.txt\\n outputs:\\n     - source: 'results/greetings.txt'\\n-      title: 'Greetings'\\n       caption: 'Say Hello to everyone'\\n       widget: 'textview'\\n       format:\\n           fontSize: 12\\n     - source: 'results/nothing.txt'\\n-      title: 'Not a file'\\n+      title: 'Greetings'\\n\",\"diff --git a/tests/.files/benchmark/helloworld/benchmark-with-outputs.yaml b/tests/.files/benchmark/helloworld/benchmark-with-outputs.yaml\\nindex 6d1806b..32b890c 100644\\n--- a/tests/.files/benchmark/helloworld/benchmark-with-outputs.yaml\\n+++ b/tests/.files/benchmark/helloworld/benchmark-with-outputs.yaml\\n@@ -50,7 +50,12 @@ outputs:\\n       key: 'greetings'\\n       title: 'Saying Hello to ...'\\n       caption: 'Greetings for all persons.'\\n+      format:\\n+          type: 'plaintext'\\n     - source: 'results/analytics.json'\\n+      title: 'Score'\\n+      format:\\n+          type: 'json'\\n results:\\n     file: 'results/analytics.json'\\n     schema:\\n\",\"diff --git a/tests/app/test_install_app.py b/tests/app/test_install_app.py\\nnew file mode 100644\\nindex 0000000..36dc0d1\\n--- /dev/null\\n+++ b/tests/app/test_install_app.py\\n@@ -0,0 +1,95 @@\\n+# This file is part of the Reproducible and Reusable Data Analysis Workflow\\n+# Server (flowServ).\\n+#\\n+# Copyright (C) 2019-2020 NYU.\\n+#\\n+# flowServ is free software; you can redistribute it and/or modify it under the\\n+# terms of the MIT License; see LICENSE file for more details.\\n+\\n+\\\"\\\"\\\"Unit tests for flowServ applications.\\\"\\\"\\\"\\n+\\n+import os\\n+import pytest\\n+\\n+from flowserv.app.base import App, install_app, uninstall_app\\n+from flowserv.config.api import FLOWSERV_API_BASEDIR\\n+from flowserv.config.database import FLOWSERV_DB\\n+from flowserv.model.files.fs import FileSystemStore\\n+from flowserv.tests.controller import StateEngine\\n+from flowserv.tests.files import DiskStore\\n+\\n+import flowserv.error as err\\n+\\n+\\n+DIR = os.path.dirname(os.path.realpath(__file__))\\n+TEMPLATE_DIR = os.path.join(DIR, '../.files/benchmark/helloworld')\\n+\\n+\\n+@pytest.mark.parametrize('fscls', [FileSystemStore, DiskStore])\\n+def test_install_app(fscls, database, tmpdir):\\n+    \\\"\\\"\\\"Install a workflow template as a flowServ application.\\\"\\\"\\\"\\n+    fs = fscls(basedir=tmpdir)\\n+    app_key = install_app(source=TEMPLATE_DIR, db=database, fs=fs)\\n+    assert app_key is not None\\n+    # Get the App instance.\\n+    app = App(db=database, engine=StateEngine(), fs=fs, key=app_key)\\n+    assert app.name() is not None\\n+    assert app.description() is None\\n+    assert app.instructions() is None\\n+    assert len(app.parameters()) == 3\\n+\\n+\\n+def test_install_app_from_env(tmpdir):\\n+    \\\"\\\"\\\"Install a workflow template as a flowServ application from the settings\\n+    in the environment variables.\\n+    \\\"\\\"\\\"\\n+    os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n+    os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n+    database.init()\\n+    app_key = install_app(source=TEMPLATE_DIR)\\n+    assert app_key is not None\\n+    # Get the App instance.\\n+    app = App(key=app_key)\\n+    assert app.name() is not None\\n+    assert app.description() is None\\n+    assert app.instructions() is None\\n+    assert len(app.parameters()) == 3\\n+    # Clean-up\\n+    del os.environ[FLOWSERV_DB]\\n+    del os.environ[FLOWSERV_API_BASEDIR]\\n+\\n+\\n+@pytest.mark.parametrize('fscls', [FileSystemStore, DiskStore])\\n+def test_uninstall_app(fscls, database, tmpdir):\\n+    \\\"\\\"\\\"Uninstall a workflow template as a flowServ application.\\\"\\\"\\\"\\n+    fs = fscls(basedir=tmpdir)\\n+    app_key = install_app(source=TEMPLATE_DIR, db=database, fs=fs)\\n+    assert app_key is not None\\n+    App(db=database, engine=StateEngine(), fs=fs, key=app_key)\\n+    uninstall_app(app_key=app_key, db=database, fs=fs)\\n+    with pytest.raises(err.UnknownWorkflowError):\\n+        App(key=app_key)\\n+\\n+\\n+def test_uninstall_app_from_env(tmpdir):\\n+    \\\"\\\"\\\"Uninstall a workflow template as a flowServ application that has been\\n+    installed from the settings in the environment variables.\\n+    \\\"\\\"\\\"\\n+    # -- Setup ----------------------------------------------------------------\\n+    os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n+    os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n+    database.init()\\n+    # -- Install and uninstall app --------------------------------------------\\n+    app_key = install_app(source=TEMPLATE_DIR)\\n+    assert app_key is not None\\n+    App(key=app_key)\\n+    uninstall_app(app_key=app_key)\\n+    with pytest.raises(err.UnknownWorkflowError):\\n+        App(key=app_key)\\n+    # -- Cleanup --------------------------------------------------------------\\n+    del os.environ[FLOWSERV_DB]\\n+    del os.environ[FLOWSERV_API_BASEDIR]\\n\",\"diff --git a/tests/app/test_run_app.py b/tests/app/test_run_app.py\\nindex ff09e27..f37e570 100644\\n--- a/tests/app/test_run_app.py\\n+++ b/tests/app/test_run_app.py\\n@@ -92,7 +92,7 @@ def test_run_app_from_env(fsconfig, tmpdir):\\n     environment variables.\\n     \\\"\\\"\\\"\\n     # -- Setup ----------------------------------------------------------------\\n-    os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n+    os.environ[FLOWSERV_DB] = 'sqlite:///{}/db/flowserv.db'.format(str(tmpdir))\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n     os.environ[FLOWSERV_AUTH] = OPEN_ACCESS\\n     os.environ[FLOWSERV_ASYNC] = 'False'\\n@@ -100,8 +100,9 @@ def test_run_app_from_env(fsconfig, tmpdir):\\n     os.environ[FLOWSERV_FILESTORE_CLASS] = fsconfig[FLOWSERV_FILESTORE_CLASS]\\n     if FLOWSERV_S3BUCKET in os.environ:\\n         del os.environ[FLOWSERV_S3BUCKET]\\n-    from flowserv.app.database import flowdb\\n-    flowdb.init()\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n+    database.init()\\n     app_key = install_app(source=TEMPLATE_DIR)\\n     # -- Run workflow ---------------------------------------------------------\\n     app = App(key=app_key)\\n\",\"diff --git a/tests/app/test_test_env.py b/tests/app/test_test_env.py\\nindex afeb9ad..42c2e49 100644\\n--- a/tests/app/test_test_env.py\\n+++ b/tests/app/test_test_env.py\\n@@ -15,8 +15,10 @@ from io import BytesIO, StringIO\\n \\n from flowserv.app.env import Flowserv\\n from flowserv.controller.serial.docker import DockerWorkflowEngine\\n+from flowserv.model.files.base import FlaskFile\\n from flowserv.model.files.fs import FSFile\\n from flowserv.model.parameter.files import InputFile\\n+from flowserv.tests.files import FileStorage\\n \\n import flowserv.error as err\\n import flowserv.model.workflow.state as st\\n@@ -72,6 +74,17 @@ def test_run_helloworld_in_env(source, specfile, filekey, tmpdir):\\n     assert not run.is_active()\\n     assert str(run) == st.STATE_SUCCESS\\n     assert len(run.files()) == 2\\n+    file_handles = dict()\\n+    for _, key, obj in run.files():\\n+        file_handles[key] = obj\\n+    assert file_handles[filekey]['name'] == filekey\\n+    assert file_handles[filekey]['title'] == 'Saying Hello to ...'\\n+    assert file_handles[filekey]['caption'] == 'Greetings for all persons.'\\n+    assert file_handles[filekey]['format'] == {'type': 'plaintext'}\\n+    assert file_handles['results/analytics.json']['name'] == 'results/analytics.json'  # noqa: E501\\n+    assert file_handles['results/analytics.json']['title'] == 'Score'\\n+    assert 'caption' not in file_handles['results/analytics.json']\\n+    assert file_handles['results/analytics.json']['format'] == {'type': 'json'}\\n     # -- Cancelling a finished run raises an error ----------------------------\\n     with pytest.raises(err.InvalidRunStateError):\\n         wf.cancel_run(run.run_id)\\n@@ -102,6 +115,7 @@ def test_run_helloworld_with_diff_inputs(tmpdir):\\n     files.append(filename)\\n     files.append(FSFile(filename))\\n     files.append(InputFile(FSFile(filename), 'output.txt'))\\n+    files.append(FlaskFile(FileStorage(FSFile(filename))))\\n     # -- Install and run the workflow -----------------------------------------\\n     wf = db.install(source=TEMPLATE_DIR, ignore_postproc=True)\\n     for file in files:\\n\",\"diff --git a/tests/cli/conftest.py b/tests/cli/conftest.py\\nindex 1aff58a..d06c2d5 100644\\n--- a/tests/cli/conftest.py\\n+++ b/tests/cli/conftest.py\\n@@ -17,7 +17,6 @@ from flowserv.cli.admin import cli\\n from flowserv.config.api import FLOWSERV_API_BASEDIR\\n from flowserv.config.database import FLOWSERV_DB\\n from flowserv.config.backend import CLEAR_BACKEND\\n-from flowserv.model.base import WorkflowHandle\\n from flowserv.service.api import service\\n \\n \\n@@ -30,17 +29,15 @@ def flowserv_cli(tmpdir):\\n     runner = CliRunner()\\n     os.environ[FLOWSERV_API_BASEDIR] = basedir\\n     os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(basedir)\\n+    # Make sure to reset the database.\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n     CLEAR_BACKEND()\\n     runner = CliRunner()\\n     runner.invoke(cli, ['init', '-f'])\\n     with service() as api:\\n         api.engine.fs = api.fs\\n     yield runner\\n-    # Using init does not seem to remove workflows from previous test runs.\\n-    # Need to delete them here explicitly:\\n-    from flowserv.service.database import database as db\\n-    with db.session() as session:\\n-        session.query(WorkflowHandle).delete()\\n     # Clear environment variables that were set for the test runner.\\n     del os.environ[FLOWSERV_API_BASEDIR]\\n     del os.environ[FLOWSERV_DB]\\n\",\"diff --git a/tests/cli/test_cli_admin.py b/tests/cli/test_cli_admin.py\\nindex 44ab4bc..8a6a73e 100644\\n--- a/tests/cli/test_cli_admin.py\\n+++ b/tests/cli/test_cli_admin.py\\n@@ -26,6 +26,9 @@ def test_basedir_argument(tmpdir):\\n     \\\"\\\"\\\"Test passing the base directory as an argument.\\\"\\\"\\\"\\n     os.environ[FLOWSERV_DB] = TEST_URL\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n+    # Make sure to reset the database.\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n     runner = CliRunner()\\n     result = runner.invoke(cli, ['init', '-f'])\\n     assert result.exit_code == 0\\n@@ -44,6 +47,8 @@ def test_create_basedir(tmpdir):\\n     basedir = os.path.join(tmpdir, 'api')\\n     os.environ[FLOWSERV_API_BASEDIR] = basedir\\n     os.environ[FLOWSERV_DB] = TEST_URL\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n     assert not os.path.isdir(basedir)\\n     runner = CliRunner()\\n     result = runner.invoke(cli, ['init', '-f'])\\n@@ -69,6 +74,8 @@ def test_init_without_force(tmpdir):\\n     \\\"\\\"\\\"\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n     os.environ[FLOWSERV_DB] = TEST_URL\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n     runner = CliRunner()\\n     result = runner.invoke(cli, ['init'])\\n     assert 'This will erase an existing database.' in result.output\\n\",\"diff --git a/tests/config/test_config_db.py b/tests/config/test_config_db.py\\nindex e09653e..4436525 100644\\n--- a/tests/config/test_config_db.py\\n+++ b/tests/config/test_config_db.py\\n@@ -28,3 +28,20 @@ def test_config_database():\\n     with pytest.raises(err.MissingConfigurationError):\\n         assert config.DB_CONNECT()\\n     assert config.DB_CONNECT(value='ABC') == 'ABC'\\n+\\n+\\n+def test_config_webapp():\\n+    \\\"\\\"\\\"Test getting the value for thw web app flag from the environment\\n+    variable FLOWSERV_WEBAPP.\\n+    \\\"\\\"\\\"\\n+    # -- Get value with environment variable set ------------------------------\\n+    os.environ[config.FLOWSERV_WEBAPP] = 'False'\\n+    assert not config.WEBAPP()\\n+    os.environ[config.FLOWSERV_WEBAPP] = 'false'\\n+    assert not config.WEBAPP()\\n+    os.environ[config.FLOWSERV_WEBAPP] = 'True'\\n+    assert config.WEBAPP()\\n+    # -- Get value if environment variable is not set -------------------------\\n+    del os.environ[config.FLOWSERV_WEBAPP]\\n+    assert not config.WEBAPP()\\n+    assert config.WEBAPP(value=True)\\n\",\"diff --git a/tests/controller/test_multiproc_controller.py b/tests/controller/test_multiproc_controller.py\\nindex 315dd18..54ee76c 100644\\n--- a/tests/controller/test_multiproc_controller.py\\n+++ b/tests/controller/test_multiproc_controller.py\\n@@ -35,11 +35,18 @@ DIR = os.path.dirname(os.path.realpath(__file__))\\n TEMPLATE_DIR = os.path.join(DIR, '../.files/benchmark/helloworld')\\n \\n \\n-def test_cancel_run_helloworld(service):\\n+def test_cancel_run_helloworld(tmpdir):\\n     \\\"\\\"\\\"Test cancelling a helloworld run.\\\"\\\"\\\"\\n     # -- Setup ----------------------------------------------------------------\\n     #\\n     # Start a new run for the workflow template.\\n+    os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n+    os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n+    os.environ[FLOWSERV_FILESTORE_MODULE] = 'flowserv.model.files.fs'\\n+    os.environ[FLOWSERV_FILESTORE_CLASS] = 'FileSystemStore'\\n+    from flowserv.service.database import database\\n+    database.__init__()\\n+    database.init()\\n     engine = SerialWorkflowEngine(is_async=True)\\n     with service(engine=engine) as api:\\n         engine.fs = api.fs\\n@@ -72,6 +79,11 @@ def test_cancel_run_helloworld(service):\\n         run = api.runs().get_run(run_id=run_id, user_id=user_id)\\n         assert run['state'] == st.STATE_CANCELED\\n         assert run['messages'][0] == 'done'\\n+    # -- Clean-up environment variables ---------------------------------------\\n+    del os.environ[FLOWSERV_DB]\\n+    del os.environ[FLOWSERV_API_BASEDIR]\\n+    del os.environ[FLOWSERV_FILESTORE_MODULE]\\n+    del os.environ[FLOWSERV_FILESTORE_CLASS]\\n \\n \\n @pytest.mark.parametrize(\\n@@ -103,6 +115,7 @@ def test_run_helloworld_async(fsconfig, target, tmpdir):\\n     os.environ[FLOWSERV_FILESTORE_MODULE] = fsconfig[FLOWSERV_FILESTORE_MODULE]\\n     os.environ[FLOWSERV_FILESTORE_CLASS] = fsconfig[FLOWSERV_FILESTORE_CLASS]\\n     from flowserv.service.database import database\\n+    database.__init__()\\n     database.init()\\n     engine = SerialWorkflowEngine(is_async=True)\\n     with service(engine=engine) as api:\\n\",\"diff --git a/tests/controller/test_post_proc_workflow.py b/tests/controller/test_post_proc_workflow.py\\nindex 4951896..17742f4 100644\\n--- a/tests/controller/test_post_proc_workflow.py\\n+++ b/tests/controller/test_post_proc_workflow.py\\n@@ -65,6 +65,7 @@ def test_postproc_workflow(fsconfig, tmpdir):\\n     os.environ[FLOWSERV_FILESTORE_CLASS] = fsconfig[FLOWSERV_FILESTORE_CLASS]\\n     DEFAULT_BACKEND()\\n     from flowserv.service.database import database\\n+    database.__init__()\\n     database.init()\\n     engine = SerialWorkflowEngine(is_async=True)\\n     with service(engine=engine) as api:\\n@@ -147,6 +148,7 @@ def test_postproc_workflow_errors(tmpdir):\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n     DEFAULT_BACKEND()\\n     from flowserv.service.database import database\\n+    database.__init__()\\n     database.init()\\n     engine = SerialWorkflowEngine(is_async=True)\\n     # Error during data preparation\\n\",\"diff --git a/tests/controller/test_remote_controller.py b/tests/controller/test_remote_controller.py\\nindex 9a21bd9..fc487cc 100644\\n--- a/tests/controller/test_remote_controller.py\\n+++ b/tests/controller/test_remote_controller.py\\n@@ -37,6 +37,7 @@ def test_cancel_remote_workflow(tmpdir):\\n     os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n     from flowserv.service.database import database\\n+    database.__init__()\\n     database.init()\\n     engine = RemoteTestController(\\n         client=RemoteTestClient(runcount=100),\\n@@ -79,6 +80,7 @@ def test_run_remote_workflow(tmpdir, is_async):\\n     os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n     from flowserv.service.database import database\\n+    database.__init__()\\n     database.init()\\n     engine = RemoteTestController(\\n         client=RemoteTestClient(runcount=3, data=['success']),\\n@@ -123,6 +125,7 @@ def test_run_remote_workflow_with_error(tmpdir):\\n     os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n     os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n     from flowserv.service.database import database\\n+    database.__init__()\\n     database.init()\\n     engine = RemoteTestController(\\n         client=RemoteTestClient(runcount=3, error='some error'),\\n\",\"diff --git a/tests/model/parameter/test_enum_parameter.py b/tests/model/parameter/test_enum_parameter.py\\nindex aaab5fb..d69cb16 100644\\n--- a/tests/model/parameter/test_enum_parameter.py\\n+++ b/tests/model/parameter/test_enum_parameter.py\\n@@ -10,7 +10,7 @@\\n \\n import pytest\\n \\n-from flowserv.model.parameter.enum import EnumParameter, PARA_ENUM\\n+from flowserv.model.parameter.enum import EnumParameter, is_enum, PARA_ENUM\\n \\n import flowserv.error as err\\n \\n@@ -66,6 +66,7 @@ def test_enum_parameter_from_dict():\\n             })\\n         )\\n     )\\n+    assert is_enum(para)\\n     assert para.para_id == '0000'\\n     assert para.type_id == PARA_ENUM\\n     assert para.name == 'Options'\\n\",\"diff --git a/tests/model/parameter/test_numeric_parameter.py b/tests/model/parameter/test_numeric_parameter.py\\nindex ac42a1b..ecddb74 100644\\n--- a/tests/model/parameter/test_numeric_parameter.py\\n+++ b/tests/model/parameter/test_numeric_parameter.py\\n@@ -12,7 +12,7 @@ import pytest\\n \\n from flowserv.model.parameter.numeric import NumericParameter, RangeConstraint\\n from flowserv.model.parameter.numeric import (\\n-    NUMERIC_TYPES, PARA_FLOAT, PARA_INT\\n+    is_numeric, NUMERIC_TYPES, PARA_FLOAT, PARA_INT\\n )\\n \\n import flowserv.error as err\\n@@ -157,6 +157,7 @@ def test_numeric_parameter(type_id, range):\\n     assert para.to_argument('6') == 6\\n     assert para.to_argument(7) == 7\\n     if type_id in NUMERIC_TYPES:\\n+        assert is_numeric(para)\\n         assert para.to_argument('inf') == float('inf')\\n     else:\\n         with pytest.raises(err.InvalidArgumentError):\\n\",\"diff --git a/tests/test_app.py b/tests/test_app.py\\ndeleted file mode 100644\\nindex dd4ea65..0000000\\n--- a/tests/test_app.py\\n+++ /dev/null\\n@@ -1,93 +0,0 @@\\n-# This file is part of the Reproducible and Reusable Data Analysis Workflow\\n-# Server (flowServ).\\n-#\\n-# Copyright (C) 2019-2020 NYU.\\n-#\\n-# flowServ is free software; you can redistribute it and/or modify it under the\\n-# terms of the MIT License; see LICENSE file for more details.\\n-\\n-\\\"\\\"\\\"Unit tests for flowServ applications.\\\"\\\"\\\"\\n-\\n-import os\\n-import pytest\\n-\\n-from flowserv.app.base import App, install_app, uninstall_app\\n-from flowserv.config.api import FLOWSERV_API_BASEDIR\\n-from flowserv.config.database import FLOWSERV_DB\\n-from flowserv.model.files.fs import FileSystemStore\\n-from flowserv.tests.controller import StateEngine\\n-from flowserv.tests.files import DiskStore\\n-\\n-import flowserv.error as err\\n-\\n-\\n-DIR = os.path.dirname(os.path.realpath(__file__))\\n-TEMPLATE_DIR = os.path.join(DIR, './.files/benchmark/helloworld')\\n-\\n-\\n-@pytest.mark.parametrize('fscls', [FileSystemStore, DiskStore])\\n-def test_install_app(fscls, database, tmpdir):\\n-    \\\"\\\"\\\"Install a workflow template as a flowServ application.\\\"\\\"\\\"\\n-    fs = fscls(basedir=tmpdir)\\n-    app_key = install_app(source=TEMPLATE_DIR, db=database, fs=fs)\\n-    assert app_key is not None\\n-    # Get the App instance.\\n-    app = App(db=database, engine=StateEngine(), fs=fs, key=app_key)\\n-    assert app.name() is not None\\n-    assert app.description() is None\\n-    assert app.instructions() is None\\n-    assert len(app.parameters()) == 3\\n-\\n-\\n-def test_install_app_from_env(tmpdir):\\n-    \\\"\\\"\\\"Install a workflow template as a flowServ application from the settings\\n-    in the environment variables.\\n-    \\\"\\\"\\\"\\n-    os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n-    os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n-    from flowserv.service.database import database\\n-    database.init()\\n-    app_key = install_app(source=TEMPLATE_DIR)\\n-    assert app_key is not None\\n-    # Get the App instance.\\n-    app = App(key=app_key)\\n-    assert app.name() is not None\\n-    assert app.description() is None\\n-    assert app.instructions() is None\\n-    assert len(app.parameters()) == 3\\n-    # Clean-up\\n-    del os.environ[FLOWSERV_DB]\\n-    del os.environ[FLOWSERV_API_BASEDIR]\\n-\\n-\\n-@pytest.mark.parametrize('fscls', [FileSystemStore, DiskStore])\\n-def test_uninstall_app(fscls, database, tmpdir):\\n-    \\\"\\\"\\\"Uninstall a workflow template as a flowServ application.\\\"\\\"\\\"\\n-    fs = fscls(basedir=tmpdir)\\n-    app_key = install_app(source=TEMPLATE_DIR, db=database, fs=fs)\\n-    assert app_key is not None\\n-    App(db=database, engine=StateEngine(), fs=fs, key=app_key)\\n-    uninstall_app(app_key=app_key, db=database, fs=fs)\\n-    with pytest.raises(err.UnknownWorkflowError):\\n-        App(key=app_key)\\n-\\n-\\n-def test_uninstall_app_from_env(tmpdir):\\n-    \\\"\\\"\\\"Uninstall a workflow template as a flowServ application that has been\\n-    installed from the settings in the environment variables.\\n-    \\\"\\\"\\\"\\n-    # -- Setup ----------------------------------------------------------------\\n-    os.environ[FLOWSERV_DB] = 'sqlite:///{}/flowserv.db'.format(str(tmpdir))\\n-    os.environ[FLOWSERV_API_BASEDIR] = str(tmpdir)\\n-    from flowserv.service.database import database\\n-    database.init()\\n-    # -- Install and uninstall app --------------------------------------------\\n-    app_key = install_app(source=TEMPLATE_DIR)\\n-    assert app_key is not None\\n-    App(key=app_key)\\n-    uninstall_app(app_key=app_key)\\n-    with pytest.raises(err.UnknownWorkflowError):\\n-        App(key=app_key)\\n-    # -- Cleanup --------------------------------------------------------------\\n-    del os.environ[FLOWSERV_DB]\\n-    del os.environ[FLOWSERV_API_BASEDIR]\"]", "hints_text": ""}
