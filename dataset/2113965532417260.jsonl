{"instance_id": "2113965532417260", "repo": "oceanprotocol/pdr-backend", "base_commit": "76a225e454a9d2a30abd2fd30db8b3960f5980ec", "problem_statement": "[UX, SW Eng] YAML & CLI:\\n# DoD 1/2: YAML\\r\\n\\r\\nppss.yaml file for everything. Therefore there's 0 friction porting the setup from sim to bots. Problem definition (pp) & solution strategy (ss) for each category as needed. Checked = done in the branch.\\r\\n\\r\\n- [ ] network specification, for each of: sapphire-testnet, sapphire-mainnet, barge-pdrbot, barge-pytest, (maybe more)\\r\\n  - network_pp: subgraph_url, rpc_url, owner_addresses, more\\r\\n  - web3_ss: (maybe): gas strategy, ..\\r\\n- [x] data\\r\\n  - data_pp: data problem definition: What feed to predict (for each timeframe: exchanges | ohlcv subset | pairs), more\\r\\n  - data_ss: data solution strategy What feeds as inputs for model (exchanges | ohlcv subset | pairs), more.\\r\\n- [x] simulation: pp & ss, as needed\\r\\n- [ ] all agents: pp & ss for each, as needed\\r\\n  - [x] predictoor 1\\r\\n  - [ ] predictoor 2\\r\\n  - [x] predictoor 3\\r\\n  - [ ] trader 1\\r\\n  - [ ] trader 2\\r\\n  - [ ] dfbuyer\\r\\n  - [ ] publisher\\r\\n  - [ ] trueval\\r\\n  - [ ] payout\\r\\n- [ ] Result: all envvars deprecated, except PRIVATE_KEY\\r\\n\\r\\n\\r\\n# DoD 2/2: CLI\\r\\n\\r\\nCLI for everything. Modeled after df-py's `dftool`. '[]' means optional. If `yaml_file` not specified, it uses the default `ppss.yaml`. \\r\\n\\r\\n- [ ] help: `pdr [help]`\\r\\n- [ ] simulation. `pdr sim [yaml_file]` (`[]` means optional)\\r\\n- [ ] all agents\\r\\n  - [ ] predictoor (instrs in predictoor.md)\\r\\n  - [ ] trader (instrs in trader.md)\\r\\n  - [ ] dfbuyer\\r\\n  - [ ] publisher\\r\\n  - [ ] trueval\\r\\n- [ ] get predictoor bot performance data (predictoor-data.md)\\r\\n- [ ] claim payout (instrs in payout.md)\\r\\n \\r\\n# Appendices\\r\\n\\r\\n### Appendix: Issues that this epic contributes to \\r\\n  \\r\\nLarger issues:\\r\\n- Contributes: [#231](https://github.com/oceanprotocol/pdr-backend/issues/231)  [Sim, Trader bot] easy sim --> trader bot flow; better backtesting\\r\\n- Contributes: [#232](https://github.com/oceanprotocol/pdr-backend/issues/232) [Sim, Pdr bot] easy sim --> pdr bot flow; better backtesting\\r\\n\\r\\nSmaller issues:\\r\\n- Closes: [#352](https://github.com/oceanprotocol/pdr-backend/issues/352) [SW eng] High DRY violation in test_predictoor_agent.py <> test_predictoor_agent3.py\\r\\n\\r\\n### Appendix: YAML design notes\\r\\n\\r\\nIntroduce new config file `ppss.yaml`\\r\\n- It has sections for data_pp, data_ss, model_ss, trade_pp, trade_ss, sim_ss. Each of those fills out as needed.\\r\\n- Use it for all of (a) sim (b) pdr bot (c) trader bot\\r\\n- Q: where to invoke?\\r\\n- A: inside (a)(b)(c). Each opens ss.yaml and use directly. \\r\\n- Analysis: This is quite clean compared to envvars; very little custom mucking around\\r\\n\\r\\nAlt approach: envvars. See appendix below.\\r\\n\\r\\n### Appendix: Prototype of ppss.yaml\\r\\n\\r\\n- Note the compact yet super-flexible way to specify `predict_feed` and `input_feeds`\\r\\n\\r\\n```yaml\\r\\ndata_pp:\\r\\n  timeframe: 1h\\r\\n  predict_feed: binance c BTC/USDT\\r\\n  test_n : 200 # sim only, not bots\\r\\n\\r\\ndata_ss:\\r\\n  st_timestr: 2019-09-13_04:00\\r\\n  fin_timestr: now\\r\\n  max_n_train: 5000\\r\\n  autoregressive_n : 10\\r\\n  input_feeds :\\r\\n    - binance ohlcv BTC/USDT\\r\\n    - binance c ETH/USDT,TRX/USDT,ADA/USDT\\r\\n#    - binance c DOT/USDT\\r\\n    - kraken ohlcv BTC/USDT\\r\\n\\r\\nmodel_ss:\\r\\n  approach: LIN\\r\\n\\r\\ntrade_pp: # sim only, not bots\\r\\n  fee_percent: 0.0\\r\\n  init_holdings:\\r\\n    - 100000 USDT\\r\\n\\r\\ntrade_ss:\\r\\n  buy_amt: 10 USDT\\r\\n\\r\\nsim_ss:\\r\\n  do_plot: True\\r\\n```\\r\\n\\r\\n### Appendix: alt option: envvars\\r\\n\\r\\nAn alt option was: have the 10+ settings as envvars. \\r\\n\\r\\n- Put settings for data_pp etc into an envvar file `.ppssrc`. Each has envvars like DATA_PP_TIMEFRAME.\\r\\n- Use it for all of (a) sim (b) pdr bot (c) trader bot\\r\\n- Q: where to invoke?\\r\\n- A: run `source .ppssrc` before running (a)(b) or (c). Then inside (a)(b) or (c) the first thing they do is read the envvars.\\r\\n-  Analysis: This was ok, but it gets sloppy for specifying which input feeds. And \\r\\n", "FAIL_TO_PASS": ["pdr_backend/util/test_noganache/test_strutil.py::testStrMixin2"], "PASS_TO_PASS": ["pdr_backend/data_eng/test/test_data_factory.py::test_create_xy__handle_nan", "pdr_backend/util/test_noganache/test_signalstr.py::test_verify_signalchar_str", "pdr_backend/data_eng/test/test_data_factory.py::test_update_csv4", "pdr_backend/util/test_noganache/test_strutil.py::testAsCurrency", "pdr_backend/util/test_noganache/test_timeutil.py::test_pretty_timestr", "pdr_backend/data_eng/test/test_pdutil.py::test_initialize_df", "pdr_backend/util/test_noganache/test_feedstr.py::test_unpack_feed_str", "pdr_backend/data_eng/test/test_pdutil.py::test_has_data", "pdr_backend/util/test_noganache/test_feedstr.py::test_verify_feed_tup", "pdr_backend/util/test_noganache/test_mathutil.py::test_round_sig", "pdr_backend/data_eng/test/test_data_factory.py::test_update_csv1", "pdr_backend/data_eng/test/test_pdutil.py::test_oldest_ut_and_newest_ut__with_data", "pdr_backend/data_eng/test/test_timeblock.py::test_timeblock", "pdr_backend/data_eng/test/test_data_factory.py::test_update_csv2", "pdr_backend/util/test_noganache/test_mathutil.py::testRandunif", "pdr_backend/util/test_noganache/test_pairstr.py::test_quote_str", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum2_Random_DoRemoveZeroes", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum1_DoRemoveZeros_zero", "pdr_backend/util/test_noganache/test_pairstr.py::test_base_str", "pdr_backend/util/test_noganache/test_timeutil.py::test_dt_to_ut_and_back", "pdr_backend/util/test_noganache/test_timeutil.py::test_ms_to_seconds", "pdr_backend/data_eng/test/test_pdutil.py::test_load_append", "pdr_backend/util/test_noganache/test_strutil.py::testDictStr", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum1_DoRemoveZeros_catchRoundoff", "pdr_backend/util/test_noganache/test_mathutil.py::testIsNumber", "pdr_backend/data_eng/test/test_pdutil.py::test_concat_next_df", "pdr_backend/data_eng/test/test_data_factory.py::test_update_csv5", "pdr_backend/data_eng/test/test_pdutil.py::test_load_filtered", "pdr_backend/util/test_noganache/test_timeutil.py::test_ut_to_timestr", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum3_Random_DontRemoveZeros", "pdr_backend/util/test_noganache/test_util_constants.py::test_util_constants", "pdr_backend/data_eng/test/test_data_factory.py::test_create_xy__1exchange_1coin_1signal", "pdr_backend/util/test_noganache/test_feedstr.py::test_unpack_feeds_str", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum1_DoRemoveZeros_decimalsNeeded", "pdr_backend/data_eng/test/test_pdutil.py::test_oldest_ut_and_newest_ut__no_data", "pdr_backend/util/test_noganache/test_signalstr.py::test_unpack_signalchar_str", "pdr_backend/data_eng/test/test_data_eng_constants.py::test_constants", "pdr_backend/util/test_noganache/test_feedstr.py::test_verify_feeds_str__and__verify_feed_str", "pdr_backend/util/test_noganache/test_timeutil.py::test_current_ut", "pdr_backend/data_eng/test/test_pdutil.py::test_load_basic", "pdr_backend/util/test_noganache/test_mathutil.py::test_fill_nans", "pdr_backend/data_eng/test/test_data_factory.py::test_create_xy__2exchanges_2coins_2signals", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum1_DoRemoveZeros_decimalsNotNeeded", "pdr_backend/util/test_noganache/test_cache.py::TestCache::test_load_nonexistent", "pdr_backend/util/test_noganache/test_cache.py::TestCache::test_save_load", "pdr_backend/util/test_noganache/test_mathutil.py::test_has_nan", "pdr_backend/util/test_noganache/test_pairstr.py::test_unpack_pair_str", "pdr_backend/util/test_noganache/test_strutil.py::testEmptyDictStr", "pdr_backend/util/test_noganache/test_mathutil.py::testRangeStr", "pdr_backend/util/test_noganache/test_env.py::test_getenv_or_exit", "pdr_backend/util/test_noganache/test_mathutil.py::testIntInStr", "pdr_backend/data_eng/test/test_data_factory.py::test_update_csv3", "pdr_backend/util/test_noganache/test_mathutil.py::testRange", "pdr_backend/data_eng/test/test_pdutil.py::test_get_last_line", "pdr_backend/util/test_noganache/test_signalstr.py::test_verify_signal_str", "pdr_backend/util/test_noganache/test_feedstr.py::test_verify_feeds_strs", "pdr_backend/util/test_noganache/test_cache.py::TestCache::test_cache_dir_creation", "pdr_backend/util/test_noganache/test_pairstr.py::test_verify_pairs_str__and__verify_pair_str", "pdr_backend/util/test_noganache/test_mathutil.py::test_nmse", "pdr_backend/util/test_noganache/test_pairstr.py::test_unpack_pairs_str", "pdr_backend/util/test_noganache/test_timeutil.py::test_timestr_to_ut", "pdr_backend/util/test_noganache/test_strutil.py::testPrettyBigNum1_DoRemoveZeros_negative", "pdr_backend/util/test_noganache/test_feedstr.py::test_unpack_feeds_strs"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/oceanprotocol_pdr-backend:76a225e454a9d2a30abd2fd30db8b3960f5980ec", "patch": "", "test_patch": "", "hints_text": ""}
