{"instance_id": "2147460475741148", "repo": "apache/libcloud", "base_commit": "90971e17bfd7b6bb97b2489986472c531cc8e140", "problem_statement": "Add Azure create node OS disk delete option:\\n## Feature Request\\r\\n\\r\\nAzure VM OS disks can be configured at the time of VM creation to be deleted when the VM is deleted. It would be helpful if libcloud supported this option. There is not an option in libcloud to do this on delete and it is convenient in some use cases to delete the disk regardless of the method (CLI, portal, libcloud, etc.).\\r\\n\\r\\nSupporting this requires a `deleteOption` of `Delete` under `OSDisk` when creating a VM.\\r\\n\\r\\nSee the [OSDisk spec](https://docs.microsoft.com/en-us/rest/api/compute/virtual-machines/create-or-update#osdisk) for details. I plan create a pull request for this functionality soon as I have implemented the changes already to support my use case.\\r\\n", "FAIL_TO_PASS": ["common.test_openstack.OpenStackBaseConnectionTest.test_request"], "PASS_TO_PASS": [], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && /usr/bin/python3 /app/repo/unittest_loader_no_traceback.py ./libcloud/test", "test_output_parser": "python/parse_log_unittest", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_python_unittest/apache_libcloud:90971e17bfd7b6bb97b2489986472c531cc8e140", "patch": "", "test_patch": "[\"diff --git a/libcloud/test/common/fixtures/google/pkey.json b/libcloud/test/common/fixtures/google/pkey.json\\nindex b3338ca1b1..330e6451ee 100644\\n--- a/libcloud/test/common/fixtures/google/pkey.json\\n+++ b/libcloud/test/common/fixtures/google/pkey.json\\n@@ -1,6 +1,6 @@\\n {\\n   \\\"private_key_id\\\": \\\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\",\\n-  \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\\nxxxxxxxxxxxxxxxxxxxxx\\\\n-----END PRIVATE KEY-----\\\\n\\\",\\n+  \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\nMIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALskegl+DrI3Msw5\\\\nZ63xnj1rgoPR0KykwBi+jZgAwHv/B0TJyhy6NuEnaf+x442L7lepOqoWQzlUGXyu\\\\naSQU9mT/vHTGZ2xM8QJJaccr4eGho0MU9HePyNCFWjWVrGKpwSEAd6CLlzC0Wiy4\\\\nkC9IoAUoS/IPjeyLTQNCddatgcARAgMBAAECgYAA/LlKJgeJUStTcpHgGD6mXjHv\\\\nnAwWJELQKDP5+tA8VAQGwBX1G5qzJDGrPGtHQ7DSqdwF4YFZtgTpZmGq1wsAjz3l\\\\nv6L4XiVsHiIPtP1B4gMxX9ogxcDzVQ7hyezXPioMAcp7Isus9Csn8HhftcL56BRa\\\\nbn6GvWqbIAy6zJcgEQJBAMlZnymKW5/jKth+wkCfqEXlPhGNPO1uq87QZUbYxwdj\\\\ntSM09J9+HMfH+WXR9ARCOL46DJ0IJfyjcdmuDDlh9IkCQQDt76up1Tmc7lkb/89I\\\\nRBu2MudGJPMEf96VCG11nmcXulyk1OLiTXfO62YpxZbgYrvlrNxEYlSG7WQMztBg\\\\nA51JAkBU2RhyJ+S+drsaaigvlVgSxCyotszi/Q0XZMgY18bfPUwanvkqsLkuEv3s\\\\nw1HB7an9t3aTQdjIIpQad/acw8OJAkEAjvmnCK21KgTbjQShtQYgNNLPwImxcjG4\\\\nOYvP4o6l2k9FHlNCZsQwSymOwWkXKYyK5g+CaKFBs7ZwmXWpJxjk6QJBAInqbm1w\\\\n3yVfGD9I2mMQi/6oDJQP3pdWU4mU4h4sdDyRgTQLpkD4yypgjOACt4mTzxifSVT9\\\\nfT+a79SkT8FFmZE=\\\\n-----END PRIVATE KEY-----\\\\n\\\",\\n   \\\"client_email\\\": \\\"foo@developer.gserviceaccount.com\\\",\\n   \\\"client_id\\\": \\\"foo.apps.googleusercontent.com\\\",\\n   \\\"type\\\": \\\"service_account\\\"\\n\",\"diff --git a/libcloud/test/common/fixtures/google/pkey.pem b/libcloud/test/common/fixtures/google/pkey.pem\\nindex 6e424862de..92357a86ec 100644\\n--- a/libcloud/test/common/fixtures/google/pkey.pem\\n+++ b/libcloud/test/common/fixtures/google/pkey.pem\\n@@ -1,15 +1,16 @@\\n------BEGIN RSA PRIVATE KEY-----\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n------END RSA PRIVATE KEY-----\\n+-----BEGIN PRIVATE KEY-----\\n+MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALskegl+DrI3Msw5\\n+Z63xnj1rgoPR0KykwBi+jZgAwHv/B0TJyhy6NuEnaf+x442L7lepOqoWQzlUGXyu\\n+aSQU9mT/vHTGZ2xM8QJJaccr4eGho0MU9HePyNCFWjWVrGKpwSEAd6CLlzC0Wiy4\\n+kC9IoAUoS/IPjeyLTQNCddatgcARAgMBAAECgYAA/LlKJgeJUStTcpHgGD6mXjHv\\n+nAwWJELQKDP5+tA8VAQGwBX1G5qzJDGrPGtHQ7DSqdwF4YFZtgTpZmGq1wsAjz3l\\n+v6L4XiVsHiIPtP1B4gMxX9ogxcDzVQ7hyezXPioMAcp7Isus9Csn8HhftcL56BRa\\n+bn6GvWqbIAy6zJcgEQJBAMlZnymKW5/jKth+wkCfqEXlPhGNPO1uq87QZUbYxwdj\\n+tSM09J9+HMfH+WXR9ARCOL46DJ0IJfyjcdmuDDlh9IkCQQDt76up1Tmc7lkb/89I\\n+RBu2MudGJPMEf96VCG11nmcXulyk1OLiTXfO62YpxZbgYrvlrNxEYlSG7WQMztBg\\n+A51JAkBU2RhyJ+S+drsaaigvlVgSxCyotszi/Q0XZMgY18bfPUwanvkqsLkuEv3s\\n+w1HB7an9t3aTQdjIIpQad/acw8OJAkEAjvmnCK21KgTbjQShtQYgNNLPwImxcjG4\\n+OYvP4o6l2k9FHlNCZsQwSymOwWkXKYyK5g+CaKFBs7ZwmXWpJxjk6QJBAInqbm1w\\n+3yVfGD9I2mMQi/6oDJQP3pdWU4mU4h4sdDyRgTQLpkD4yypgjOACt4mTzxifSVT9\\n+fT+a79SkT8FFmZE=\\n+-----END PRIVATE KEY-----\\n\",\"diff --git a/libcloud/test/common/fixtures/google/pkey_invalid.json b/libcloud/test/common/fixtures/google/pkey_invalid.json\\nnew file mode 100644\\nindex 0000000000..79f0529da0\\n--- /dev/null\\n+++ b/libcloud/test/common/fixtures/google/pkey_invalid.json\\n@@ -0,0 +1,7 @@\\n+{\\n+  \\\"private_key_id\\\": \\\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\",\\n+  \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\nMxxIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALskegl+DrI3Msw5\\\\nZ63xnj1rgoPR0KykwBi+jZgAwHv/B0TJyhy6NuEnaf+x442L7lepOqoWQzlUGXyu\\\\naSQU9mT/vHTGZ2xM8QJJaccr4eGho0MU9HePyNCFWjWVrGKpwSEAd6CLlzC0Wiy4\\\\nkC9IoAUoS/IPjeyLTQNCddatgcARAgMBAAECgYAA/LlKJgeJUStTcpHgGD6mXjHv\\\\nnAwWJELQKDP5+tA8VAQGwBX1G5qzJDGrPGtHQ7DSqdwF4YFZtgTpZmGq1wsAjz3l\\\\nv6L4XiVsHiIPtP1B4gMxX9ogxcDzVQ7hyezXPioMAcp7Isus9Csn8HhftcL56BRa\\\\nbn6GvWqbIAy6zJcgEQJBAMlZnymKW5/jKth+wkCfqEXlPhGNPO1uq87QZUbYxwdj\\\\ntSM09J9+HMfH+WXR9ARCOL46DJ0IJfyjcdmuDDlh9IkCQQDt76up1Tmc7lkb/89I\\\\nRBu2MudGJPMEf96VCG11nmcXulyk1OLiTXfO62YpxZbgYrvlrNxEYlSG7WQMztBg\\\\nA51JAkBU2RhyJ+S+drsaaigvlVgSxCyotszi/Q0XZMgY18bfPUwanvkqsLkuEv3s\\\\nw1HB7an9t3aTQdjIIpQad/acw8OJAkEAjvmnCK21KgTbjQShtQYgNNLPwImxcjG4\\\\nOYvP4o6l2k9FHlNCZsQwSymOwWkXKYyK5g+CaKFBs7ZwmXWpJxjk6QJBAInqbm1w\\\\n3yVfGD9I2mMQi/6oDJQP3pdWU4mU4h4sdDyRgTQLpkD4yypgjOACt4mTzxifSVT9\\\\nfT+a79SE=\\\\n-----END PRIVATE KEY-----\\\\n\\\",\\n+  \\\"client_email\\\": \\\"foo@developer.gserviceaccount.com\\\",\\n+  \\\"client_id\\\": \\\"foo.apps.googleusercontent.com\\\",\\n+  \\\"type\\\": \\\"service_account\\\"\\n+}\\n\",\"diff --git a/libcloud/test/common/fixtures/google/pkey_invalid.pem b/libcloud/test/common/fixtures/google/pkey_invalid.pem\\nnew file mode 100644\\nindex 0000000000..44c3cba6f8\\n--- /dev/null\\n+++ b/libcloud/test/common/fixtures/google/pkey_invalid.pem\\n@@ -0,0 +1,16 @@\\n+-----BEGIN PRIVATE KEY-----\\n+MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALskegl+DrI3Msw5\\n+Z63xnj1rgoPR0KykwBi+jZgAwHv/B0TJyhy6NuEnaf+x442L7lepOqoWQzlUGXyu\\n+aSQU9mT/vHTGZ2xM8QJJaccr4eGho0MU9HePyNCFWjWVrGKpwSEAd6CLlzC0Wiy4\\n+kC9IoAUoS/IPjeyLTQNCddatgcARAgMBAAECgYAA/LlKJgeJUStTcpHgGD6mXjHv\\n+nAwWJELQKDP5+tA8VAQGwBX1G5qzJDGrPGtHQ7DSqdwF4YFZtgTpZmGq1wsAjz3l\\n+v6L4XiVsHiIPtP1B4gMxX9ogxcDzVQ7hyezXPioMAcp7Isus9Csn8HhftcL56BRa\\n+bn6GvWqbIAy6zJcgEQJBAMlZnymKW5/jKth+wkCfqEXlPhGNPO1uq87QZUbYxwdj\\n+tSM09J9+HMfH+WXR9ARCOL46DJ0IJfyjcdmuDDlh9IkCQQDt76up1Tmc7lkb/89I\\n+RBu2MudGJPMEf96VCG11nmcXulyk1OLiTXfO62YpxZbgYrvlrNxEYlSG7WQMztBg\\n+A51JAkBU2RhyJ+S+drsaaigvlVgSxCyotszi/Q0XZMgY18bfPUwanvkqsLkuEv3s\\n+w1HB7an9t3aTQdjIIpQad/acw8OJAkEAjvmnCK21KgTbjQShtQYgNNLPwImxcjG4\\n+OYvP4o6l2k9FHlNCZsQwSymOwWkXKYyK5g+CaKFBs7ZwmXWpJxjk6QJBAInqbm1w\\n+3yVfGD9I2mMQi/6oDJQP3pdWU4mU4h4sdDyRgTQLpkD4yypgjOACt4mTzxifSVT9\\n+fT+a79SkT8Fxxx\\n+-----END PRIVATE KEY-----\\n\",\"diff --git a/libcloud/test/common/test_google.py b/libcloud/test/common/test_google.py\\nindex a02cc08ed9..b61306701c 100644\\n--- a/libcloud/test/common/test_google.py\\n+++ b/libcloud/test/common/test_google.py\\n@@ -52,6 +52,7 @@\\n SCRIPT_PATH = os.path.dirname(os.path.realpath(__file__))\\n PEM_KEY = os.path.join(SCRIPT_PATH, \\\"fixtures\\\", \\\"google\\\", \\\"pkey.pem\\\")\\n JSON_KEY = os.path.join(SCRIPT_PATH, \\\"fixtures\\\", \\\"google\\\", \\\"pkey.json\\\")\\n+JSON_KEY_INVALID = os.path.join(SCRIPT_PATH, \\\"fixtures\\\", \\\"google\\\", \\\"pkey_invalid.json\\\")\\n with open(JSON_KEY, \\\"r\\\") as f:\\n     KEY_STR = json.loads(f.read())[\\\"private_key\\\"]\\n \\n@@ -81,6 +82,40 @@\\n     # 40 base64 chars\\n     \\\"0102030405060708091011121314151617181920\\\",\\n )\\n+PEM_KEY_FILE = os.path.join(SCRIPT_PATH, \\\"fixtures\\\", \\\"google\\\", \\\"pkey.pem\\\")\\n+PEM_KEY_FILE_INVALID = os.path.join(\\n+    SCRIPT_PATH, \\\"fixtures\\\", \\\"google\\\", \\\"pkey_invalid.pem\\\"\\n+)\\n+\\n+JSON_KEY_FILE = os.path.join(SCRIPT_PATH, \\\"fixtures\\\", \\\"google\\\", \\\"pkey.json\\\")\\n+\\n+with open(JSON_KEY_FILE, \\\"r\\\") as f:\\n+    PEM_KEY_STR = json.loads(f.read())[\\\"private_key\\\"]\\n+\\n+with open(JSON_KEY_FILE, \\\"r\\\") as f:\\n+    JSON_KEY_STR = f.read()\\n+    JSON_KEY = json.loads(JSON_KEY_STR)\\n+\\n+\\n+GCE_USERID_EMAIL = \\\"email@developer.gserviceaccount.com\\\"\\n+GCE_PARAMS = (GCE_USERID_EMAIL, \\\"key\\\")\\n+GCE_PARAMS_PEM_KEY_FILE = (GCE_USERID_EMAIL, PEM_KEY_FILE)\\n+GCE_PARAMS_PEM_KEY_FILE_INVALID = (GCE_USERID_EMAIL, PEM_KEY_FILE_INVALID)\\n+GCE_PARAMS_PEM_KEY = (GCE_USERID_EMAIL, PEM_KEY_STR)\\n+GCE_PARAMS_JSON_KEY_FILE = (GCE_USERID_EMAIL, JSON_KEY_FILE)\\n+GCE_PARAMS_JSON_KEY = (GCE_USERID_EMAIL, JSON_KEY)\\n+GCE_PARAMS_JSON_KEY_INVALID = (GCE_USERID_EMAIL, JSON_KEY_INVALID)\\n+GCE_PARAMS_JSON_KEY_STR = (GCE_USERID_EMAIL, JSON_KEY_STR)\\n+GCE_PARAMS_IA = (\\\"client_id\\\", \\\"client_secret\\\")\\n+GCE_PARAMS_GCE = (\\\"foo\\\", \\\"bar\\\")\\n+GCS_S3_PARAMS_20 = (\\n+    \\\"GOOG0123456789ABCXYZ\\\",  # GOOG + 16 alphanumeric chars\\n+    \\\"0102030405060708091011121314151617181920\\\",\\n+)  # 40 base64 chars\\n+GCS_S3_PARAMS_24 = (\\n+    \\\"GOOGDF5OVRRGU4APFNSTVCXI\\\",  # GOOG + 20 alphanumeric chars\\n+    \\\"0102030405060708091011121314151617181920\\\",\\n+)  # 40 base64 chars\\n \\n STUB_UTCNOW = _utcnow()\\n \\n@@ -334,6 +369,16 @@ def test_auth_connection(self):\\n \\n         if SHA256:\\n             kwargs[\\\"auth_type\\\"] = GoogleAuthType.SA\\n+            cred1 = GoogleOAuth2Credential(*GCE_PARAMS_PEM_KEY_FILE, **kwargs)\\n+            self.assertTrue(\\n+                isinstance(cred1.oauth2_conn, GoogleServiceAcctAuthConnection)\\n+            )\\n+\\n+            cred1 = GoogleOAuth2Credential(*GCE_PARAMS_JSON_KEY_FILE, **kwargs)\\n+            self.assertTrue(\\n+                isinstance(cred1.oauth2_conn, GoogleServiceAcctAuthConnection)\\n+            )\\n+\\n             cred1 = GoogleOAuth2Credential(*GCE_PARAMS_PEM_KEY, **kwargs)\\n             self.assertTrue(\\n                 isinstance(cred1.oauth2_conn, GoogleServiceAcctAuthConnection)\\n@@ -349,6 +394,37 @@ def test_auth_connection(self):\\n                 isinstance(cred1.oauth2_conn, GoogleServiceAcctAuthConnection)\\n             )\\n \\n+            kwargs[\\\"auth_type\\\"] = GoogleAuthType.SA\\n+            cred1 = GoogleOAuth2Credential(*GCE_PARAMS_JSON_KEY_STR, **kwargs)\\n+            self.assertTrue(\\n+                isinstance(cred1.oauth2_conn, GoogleServiceAcctAuthConnection)\\n+            )\\n+\\n+            self.assertRaises(\\n+                GoogleAuthError, GoogleOAuth2Credential, *GCE_PARAMS, **kwargs\\n+            )\\n+\\n+            # Invalid pem key\\n+            kwargs[\\\"auth_type\\\"] = GoogleAuthType.SA\\n+            expected_msg = \\\"Unable to decode provided PEM key:\\\"\\n+            self.assertRaisesRegex(\\n+                GoogleAuthError,\\n+                expected_msg,\\n+                GoogleOAuth2Credential,\\n+                *GCE_PARAMS_PEM_KEY_FILE_INVALID,\\n+                **kwargs,\\n+            )\\n+\\n+            kwargs[\\\"auth_type\\\"] = GoogleAuthType.SA\\n+            expected_msg = \\\"Unable to decode provided PEM key:\\\"\\n+            self.assertRaisesRegex(\\n+                GoogleAuthError,\\n+                expected_msg,\\n+                GoogleOAuth2Credential,\\n+                *GCE_PARAMS_JSON_KEY_INVALID,\\n+                **kwargs,\\n+            )\\n+\\n         kwargs[\\\"auth_type\\\"] = GoogleAuthType.IA\\n         cred2 = GoogleOAuth2Credential(*GCE_PARAMS_IA, **kwargs)\\n         self.assertTrue(isinstance(cred2.oauth2_conn, GoogleInstalledAppAuthConnection))\\n\",\"diff --git a/libcloud/test/common/test_openstack.py b/libcloud/test/common/test_openstack.py\\nindex a5bd99dace..10f09657f4 100644\\n--- a/libcloud/test/common/test_openstack.py\\n+++ b/libcloud/test/common/test_openstack.py\\n@@ -15,6 +15,7 @@\\n \\n import sys\\n import unittest\\n+from unittest.mock import patch\\n \\n from mock import Mock\\n from libcloud.common.base import LibcloudConnection\\n@@ -41,6 +42,30 @@ def test_base_connection_timeout(self):\\n             host=\\\"127.0.0.1\\\", secure=1, port=443, timeout=10\\n         )\\n \\n+    def test_set_microversion(self):\\n+        self.connection._ex_force_microversion = \\\"2.67\\\"\\n+        headers = self.connection.add_default_headers({})\\n+        self.assertEqual(headers[\\\"OpenStack-API-Version\\\"], \\\"compute 2.67\\\")\\n+\\n+    @patch(\\\"libcloud.common.base.ConnectionUserAndKey.request\\\")\\n+    def test_request(self, mock_request):\\n+        OpenStackBaseConnection.conn_class._raw_data = \\\"\\\"\\n+        OpenStackBaseConnection.default_content_type = \\\"application/json\\\"\\n+        expected_response = Mock()\\n+        mock_request.return_value = expected_response\\n+        response = self.connection.request(\\n+            \\\"/path\\\", data=\\\"somedata\\\", headers={\\\"h1\\\": \\\"v1\\\"}, method=\\\"POST\\\"\\n+        )\\n+        self.assertEqual(response, expected_response)\\n+        mock_request.assert_called_with(\\n+            action=\\\"/path\\\",\\n+            params={},\\n+            data=\\\"somedata\\\",\\n+            method=\\\"POST\\\",\\n+            headers={\\\"h1\\\": \\\"v1\\\", \\\"Content-Type\\\": \\\"application/json\\\"},\\n+            raw=False,\\n+        )\\n+\\n \\n if __name__ == \\\"__main__\\\":\\n     sys.exit(unittest.main())\\n\",\"diff --git a/libcloud/test/compute/fixtures/ec2/describe_images.xml b/libcloud/test/compute/fixtures/ec2/describe_images.xml\\nindex 167015a369..650fb91808 100644\\n--- a/libcloud/test/compute/fixtures/ec2/describe_images.xml\\n+++ b/libcloud/test/compute/fixtures/ec2/describe_images.xml\\n@@ -36,6 +36,7 @@\\n             </blockDeviceMapping>\\n             <virtualizationType>paravirtual</virtualizationType>\\n             <hypervisor>xen</hypervisor>\\n+            <creationDate>2021-01-10T18:24:00.000Z</creationDate>\\n         </item>\\n         <item>\\n             <imageId>ami-85b2a8ae</imageId>\\n@@ -67,6 +68,38 @@\\n             </blockDeviceMapping>\\n             <virtualizationType>paravirtual</virtualizationType>\\n             <hypervisor>xen</hypervisor>\\n+            <creationDate>2021-01-10T18:25:00.000Z</creationDate>\\n+        </item>\\n+        <item>\\n+            <imageId>ami-85b2a8ac</imageId>\\n+            <imageLocation>123456788908/Test Image 3</imageLocation>\\n+            <imageState>available</imageState>\\n+            <imageOwnerId>123456788908</imageOwnerId>\\n+            <isPublic>false</isPublic>\\n+            <architecture>x86_64</architecture>\\n+            <imageType>machine</imageType>\\n+            <kernelId>aki-88aa75e1</kernelId>\\n+            <name>Test Image 3</name>\\n+            <rootDeviceType>ebs</rootDeviceType>\\n+            <rootDeviceName>/dev/sda1</rootDeviceName>\\n+            <billingProducts>\\n+                <item>\\n+                    <billingProduct>as-6dr90319</billingProduct>\\n+                </item>\\n+            </billingProducts>\\n+            <blockDeviceMapping>\\n+                <item>\\n+                    <deviceName>/dev/sda1</deviceName>\\n+                    <ebs>\\n+                        <snapshotId>snap-c0bfbbdb</snapshotId>\\n+                        <volumeSize>20</volumeSize>\\n+                        <deleteOnTermination>false</deleteOnTermination>\\n+                        <volumeType>standard</volumeType>\\n+                    </ebs>\\n+                </item>\\n+            </blockDeviceMapping>\\n+            <virtualizationType>paravirtual</virtualizationType>\\n+            <hypervisor>xen</hypervisor>\\n         </item>\\n     </imagesSet>\\n </DescribeImagesResponse>\\n\",\"diff --git a/libcloud/test/compute/fixtures/gce/global_images_paged.json b/libcloud/test/compute/fixtures/gce/global_images_paged.json\\nnew file mode 100644\\nindex 0000000000..f9c52d71e4\\n--- /dev/null\\n+++ b/libcloud/test/compute/fixtures/gce/global_images_paged.json\\n@@ -0,0 +1,48 @@\\n+{\\n+ \\\"kind\\\": \\\"compute#imageList\\\",\\n+ \\\"selfLink\\\": \\\"https://www.googleapis.com/compute/v1/projects/project_name/global/images\\\",\\n+ \\\"id\\\": \\\"projects/project_name/global/images\\\",\\n+ \\\"nextPageToken\\\" : \\\"token\\\",\\n+ \\\"items\\\": [\\n+  {\\n+    \\\"kind\\\": \\\"compute#image1\\\",\\n+    \\\"id\\\": \\\"7094983038334682861\\\",\\n+    \\\"creationTimestamp\\\": \\\"2017-10-26T07:58:38.442-07:00\\\",\\n+    \\\"name\\\": \\\"custom-image1\\\",\\n+    \\\"description\\\": \\\"a custom image 1\\\",\\n+    \\\"sourceType\\\": \\\"RAW\\\",\\n+    \\\"status\\\": \\\"READY\\\",\\n+    \\\"archiveSizeBytes\\\": \\\"1314375168\\\",\\n+    \\\"diskSizeGb\\\": \\\"10\\\",\\n+    \\\"sourceDisk\\\": \\\"projects/project_name/zones/us-central1-b/disks/custom-instance1\\\",\\n+    \\\"sourceDiskId\\\": \\\"3436116182804197834\\\",\\n+    \\\"family\\\": \\\"custom\\\",\\n+    \\\"selfLink\\\": \\\"projects/project_name/global/images/custom-image1\\\",\\n+    \\\"labelFingerprint\\\": \\\"42WmSpB8rSM=\\\",\\n+    \\\"labels\\\": {\\n+      \\\"foo\\\": \\\"bar\\\",\\n+      \\\"one\\\": \\\"1\\\",\\n+      \\\"two\\\": \\\"two\\\"\\n+    },\\n+    \\\"getResourceId\\\": {},\\n+    \\\"getDisplayName\\\": {},\\n+    \\\"getResourceType\\\": {},\\n+    \\\"getFullResourcePath\\\": {}\\n+  },\\n+  {\\n+   \\\"kind\\\": \\\"compute#image2\\\",\\n+   \\\"selfLink\\\": \\\"https://www.googleapis.com/compute/v1/projects/project_name/global/images/custom-image\\\",\\n+   \\\"id\\\": \\\"15632509721401584262\\\",\\n+   \\\"creationTimestamp\\\": \\\"2014-12-09T09:26:27.234-08:00\\\",\\n+   \\\"name\\\": \\\"custom-image2\\\",\\n+   \\\"sourceType\\\": \\\"RAW\\\",\\n+   \\\"rawDisk\\\": {\\n+    \\\"source\\\": \\\"\\\",\\n+    \\\"containerType\\\": \\\"TAR\\\"\\n+   },\\n+   \\\"status\\\": \\\"READY\\\",\\n+   \\\"archiveSizeBytes\\\": \\\"243720274\\\",\\n+   \\\"diskSizeGb\\\": \\\"10\\\"\\n+  }\\n+ ]\\n+}\\n\",\"diff --git a/libcloud/test/compute/test_azure_arm.py b/libcloud/test/compute/test_azure_arm.py\\nindex c4de33dd26..72bd69e81e 100644\\n--- a/libcloud/test/compute/test_azure_arm.py\\n+++ b/libcloud/test/compute/test_azure_arm.py\\n@@ -23,7 +23,11 @@\\n from libcloud.common.exceptions import BaseHTTPError\\n from libcloud.common.types import LibcloudError\\n from libcloud.compute.base import NodeLocation, NodeSize, VolumeSnapshot, StorageVolume\\n-from libcloud.compute.drivers.azure_arm import AzureImage, NodeAuthPassword\\n+from libcloud.compute.drivers.azure_arm import (\\n+    AzureComputeGalleryImage,\\n+    AzureImage,\\n+    NodeAuthPassword,\\n+)\\n from libcloud.compute.providers import get_driver\\n from libcloud.compute.types import (\\n     NodeState,\\n@@ -138,6 +142,7 @@ def test_create_node(self):\\n         self.assertEqual(os_profile[\\\"adminPassword\\\"], \\\"any_password\\\")\\n         self.assertTrue(\\\"managedDisk\\\" in storage_profile[\\\"osDisk\\\"])\\n         self.assertTrue(\\\"diskSizeGB\\\" not in storage_profile[\\\"osDisk\\\"])\\n+        self.assertTrue(\\\"deleteOption\\\" not in storage_profile[\\\"osDisk\\\"])\\n         self.assertTrue(\\n             storage_profile[\\\"imageReference\\\"],\\n             {\\n@@ -225,6 +230,7 @@ def test_create_node_ex_disk_size(self):\\n         self.assertEqual(os_profile[\\\"adminPassword\\\"], \\\"any_password\\\")\\n         self.assertTrue(\\\"managedDisk\\\" in storage_profile[\\\"osDisk\\\"])\\n         self.assertEqual(storage_profile[\\\"osDisk\\\"][\\\"diskSizeGB\\\"], 100)\\n+        self.assertTrue(\\\"deleteOption\\\" not in storage_profile[\\\"osDisk\\\"])\\n         self.assertTrue(\\n             storage_profile[\\\"imageReference\\\"],\\n             {\\n@@ -235,6 +241,94 @@ def test_create_node_ex_disk_size(self):\\n             },\\n         )\\n \\n+    def test_create_node_ex_os_disk_delete(self):\\n+        location = NodeLocation(\\\"any_location\\\", \\\"\\\", \\\"\\\", self.driver)\\n+        size = NodeSize(\\\"any_size\\\", \\\"\\\", 0, 0, 0, 0, driver=self.driver)\\n+        image = AzureImage(\\\"1\\\", \\\"1\\\", \\\"ubuntu\\\", \\\"pub\\\", location.id, self.driver)\\n+        auth = NodeAuthPassword(\\\"any_password\\\")\\n+\\n+        node = self.driver.create_node(\\n+            \\\"test-node-1\\\",\\n+            size,\\n+            image,\\n+            auth,\\n+            location=location,\\n+            ex_resource_group=\\\"000000\\\",\\n+            ex_storage_account=\\\"000000\\\",\\n+            ex_user_name=\\\"any_user\\\",\\n+            ex_network=\\\"000000\\\",\\n+            ex_subnet=\\\"000000\\\",\\n+            ex_use_managed_disks=True,\\n+            ex_os_disk_delete=True,\\n+        )\\n+        hardware_profile = node.extra[\\\"properties\\\"][\\\"hardwareProfile\\\"]\\n+        os_profile = node.extra[\\\"properties\\\"][\\\"osProfile\\\"]\\n+        storage_profile = node.extra[\\\"properties\\\"][\\\"storageProfile\\\"]\\n+\\n+        self.assertEqual(node.name, \\\"test-node-1\\\")\\n+        self.assertEqual(node.state, NodeState.UPDATING)\\n+        self.assertEqual(node.private_ips, [\\\"10.0.0.1\\\"])\\n+        self.assertEqual(node.public_ips, [])\\n+        self.assertEqual(node.extra[\\\"location\\\"], location.id)\\n+        self.assertEqual(hardware_profile[\\\"vmSize\\\"], size.id)\\n+        self.assertEqual(os_profile[\\\"adminUsername\\\"], \\\"any_user\\\")\\n+        self.assertEqual(os_profile[\\\"adminPassword\\\"], \\\"any_password\\\")\\n+        self.assertTrue(\\\"managedDisk\\\" in storage_profile[\\\"osDisk\\\"])\\n+        self.assertTrue(\\\"diskSizeGB\\\" not in storage_profile[\\\"osDisk\\\"])\\n+        self.assertEqual(storage_profile[\\\"osDisk\\\"][\\\"deleteOption\\\"], \\\"Delete\\\")\\n+        self.assertTrue(\\n+            storage_profile[\\\"imageReference\\\"],\\n+            {\\n+                \\\"publisher\\\": image.publisher,\\n+                \\\"offer\\\": image.offer,\\n+                \\\"sku\\\": image.sku,\\n+                \\\"version\\\": image.version,\\n+            },\\n+        )\\n+\\n+    def test_create_node_compute_gallery_image(self):\\n+        location = NodeLocation(\\\"any_location\\\", \\\"\\\", \\\"\\\", self.driver)\\n+        size = NodeSize(\\\"any_size\\\", \\\"\\\", 0, 0, 0, 0, driver=self.driver)\\n+        image = AzureComputeGalleryImage(\\n+            \\\"sub-id00\\\", \\\"resource-group00\\\", \\\"gallery00\\\", \\\"image00\\\", self.driver\\n+        )\\n+        auth = NodeAuthPassword(\\\"any_password\\\")\\n+\\n+        node = self.driver.create_node(\\n+            \\\"test-node-1\\\",\\n+            size,\\n+            image,\\n+            auth,\\n+            location=location,\\n+            ex_resource_group=\\\"000000\\\",\\n+            ex_storage_account=\\\"000000\\\",\\n+            ex_user_name=\\\"any_user\\\",\\n+            ex_network=\\\"000000\\\",\\n+            ex_subnet=\\\"000000\\\",\\n+            ex_use_managed_disks=True,\\n+        )\\n+        hardware_profile = node.extra[\\\"properties\\\"][\\\"hardwareProfile\\\"]\\n+        os_profile = node.extra[\\\"properties\\\"][\\\"osProfile\\\"]\\n+        storage_profile = node.extra[\\\"properties\\\"][\\\"storageProfile\\\"]\\n+\\n+        self.assertEqual(node.name, \\\"test-node-1\\\")\\n+        self.assertEqual(node.state, NodeState.UPDATING)\\n+        self.assertEqual(node.private_ips, [\\\"10.0.0.1\\\"])\\n+        self.assertEqual(node.public_ips, [])\\n+        self.assertEqual(node.extra[\\\"location\\\"], location.id)\\n+        self.assertEqual(hardware_profile[\\\"vmSize\\\"], size.id)\\n+        self.assertEqual(os_profile[\\\"adminUsername\\\"], \\\"any_user\\\")\\n+        self.assertEqual(os_profile[\\\"adminPassword\\\"], \\\"any_password\\\")\\n+        self.assertTrue(\\\"managedDisk\\\" in storage_profile[\\\"osDisk\\\"])\\n+        self.assertTrue(\\\"diskSizeGB\\\" not in storage_profile[\\\"osDisk\\\"])\\n+        self.assertTrue(\\\"deleteOption\\\" not in storage_profile[\\\"osDisk\\\"])\\n+        self.assertTrue(\\n+            storage_profile[\\\"imageReference\\\"],\\n+            {\\n+                \\\"id\\\": \\\"/subscriptions/sub-id00/resourceGroups/resource-group00/providers/Microsoft.Compute/galleries/gallery00/images/image00\\\"\\n+            },\\n+        )\\n+\\n     @mock.patch(\\\"time.sleep\\\", return_value=None)\\n     def test_destroy_node(self, time_sleep_mock):\\n         def error(e, **kwargs):\\n\",\"diff --git a/libcloud/test/compute/test_ec2.py b/libcloud/test/compute/test_ec2.py\\nindex 88c56ed158..240e677af5 100644\\n--- a/libcloud/test/compute/test_ec2.py\\n+++ b/libcloud/test/compute/test_ec2.py\\n@@ -129,6 +129,9 @@ def test_regions_and_signature_versions(self):\\n         driver = EC2NodeDriver(*EC2_PARAMS, region=\\\"eu-central-1\\\")\\n         self.assertEqual(driver.signature_version, \\\"4\\\")\\n \\n+        driver = EC2NodeDriver(*EC2_PARAMS, region=\\\"eu-south-1\\\")\\n+        self.assertEqual(driver.signature_version, \\\"4\\\")\\n+\\n         # Verify that signature_version can be overriden via constructor argument\\n         driver = EC2NodeDriver(*EC2_PARAMS, region=\\\"us-east-1\\\", signature_version=\\\"2\\\")\\n         self.assertEqual(driver.signature_version, \\\"2\\\")\\n@@ -574,7 +577,7 @@ def test_ex_create_node_with_ex_spot(self):\\n     def test_list_images(self):\\n         images = self.driver.list_images()\\n \\n-        self.assertEqual(len(images), 2)\\n+        self.assertEqual(len(images), 3)\\n         location = \\\"123456788908/Test Image\\\"\\n         self.assertEqual(images[0].id, \\\"ami-57ba933a\\\")\\n         self.assertEqual(images[0].name, \\\"Test Image\\\")\\n@@ -585,6 +588,7 @@ def test_list_images(self):\\n         self.assertEqual(ephemeral, \\\"ephemeral0\\\")\\n         billing_product1 = images[0].extra[\\\"billing_products\\\"][0]\\n         self.assertEqual(billing_product1, \\\"ab-5dh78019\\\")\\n+        self.assertIsInstance(images[0].extra[\\\"creation_date\\\"], datetime)\\n \\n         location = \\\"123456788908/Test Image 2\\\"\\n         self.assertEqual(images[1].id, \\\"ami-85b2a8ae\\\")\\n@@ -595,6 +599,12 @@ def test_list_images(self):\\n         billing_product2 = images[1].extra[\\\"billing_products\\\"][0]\\n         self.assertEqual(billing_product2, \\\"as-6dr90319\\\")\\n         self.assertEqual(size, 20)\\n+        self.assertIsInstance(images[1].extra[\\\"creation_date\\\"], datetime)\\n+\\n+        self.assertEqual(images[2].id, \\\"ami-85b2a8ac\\\")\\n+        self.assertEqual(images[2].name, \\\"Test Image 3\\\")\\n+        self.assertEqual(size, 20)\\n+        self.assertIsNone(images[2].extra[\\\"creation_date\\\"])\\n \\n     def test_list_images_with_image_ids(self):\\n         EC2MockHttp.type = \\\"ex_imageids\\\"\\n@@ -606,7 +616,7 @@ def test_list_images_with_image_ids(self):\\n     def test_list_images_with_executable_by(self):\\n         images = self.driver.list_images(ex_executableby=\\\"self\\\")\\n \\n-        self.assertEqual(len(images), 2)\\n+        self.assertEqual(len(images), 3)\\n \\n     def test_get_image(self):\\n         image = self.driver.get_image(\\\"ami-57ba933a\\\")\\n@@ -615,6 +625,7 @@ def test_get_image(self):\\n         self.assertEqual(image.extra[\\\"architecture\\\"], \\\"x86_64\\\")\\n         self.assertEqual(len(image.extra[\\\"block_device_mapping\\\"]), 2)\\n         self.assertEqual(image.extra[\\\"billing_products\\\"][0], \\\"ab-5dh78019\\\")\\n+        self.assertIsInstance(image.extra[\\\"creation_date\\\"], datetime)\\n \\n     def test_copy_image(self):\\n         image = self.driver.list_images()[0]\\n\",\"diff --git a/libcloud/test/compute/test_gce.py b/libcloud/test/compute/test_gce.py\\nindex 68b10b4657..97b12f9ee6 100644\\n--- a/libcloud/test/compute/test_gce.py\\n+++ b/libcloud/test/compute/test_gce.py\\n@@ -430,11 +430,12 @@ def test_list_images(self):\\n         all_deprecated_images = self.driver.list_images(ex_include_deprecated=True)\\n         debian_images = self.driver.list_images(ex_project=\\\"debian-cloud\\\")\\n         local_plus_deb = self.driver.list_images([\\\"debian-cloud\\\", \\\"project_name\\\"])\\n-        self.assertEqual(len(local_images), 50)\\n-        self.assertEqual(len(all_deprecated_images), 178)\\n+        self.assertEqual(len(local_images), 52)\\n+        self.assertEqual(len(all_deprecated_images), 180)\\n         self.assertEqual(len(debian_images), 2)\\n-        self.assertEqual(len(local_plus_deb), 4)\\n-        self.assertEqual(local_images[0].name, \\\"custom-image\\\")\\n+        self.assertEqual(len(local_plus_deb), 6)\\n+        self.assertEqual(local_images[0].name, \\\"custom-image1\\\")\\n+        self.assertEqual(local_images[2].name, \\\"custom-image\\\")\\n         self.assertEqual(debian_images[1].name, \\\"debian-7-wheezy-v20131120\\\")\\n \\n     def test_ex_destroy_instancegroup(self):\\n@@ -2820,7 +2821,11 @@ def _global_firewalls_lcfirewall_deny(self, method, url, body, headers):\\n     def _global_images(self, method, url, body, headers):\\n         if method == \\\"POST\\\":\\n             body = self.fixtures.load(\\\"global_images_post.json\\\")\\n+        elif \\\"maxResults\\\" in url and \\\"pageToken\\\" not in url:\\n+            body = self.fixtures.load(\\\"global_images_paged.json\\\")\\n         else:\\n+            if \\\"maxResults\\\" in url:\\n+                self.assertIn(\\\"pageToken=token\\\", url)\\n             body = self.fixtures.load(\\\"global_images.json\\\")\\n         return (httplib.OK, body, self.json_hdr, httplib.responses[httplib.OK])\\n \\n\",\"diff --git a/libcloud/test/compute/test_openstack.py b/libcloud/test/compute/test_openstack.py\\nindex 9eb9acc526..03cec7b3be 100644\\n--- a/libcloud/test/compute/test_openstack.py\\n+++ b/libcloud/test/compute/test_openstack.py\\n@@ -1248,6 +1248,21 @@ def test_create_node_from_bootable_volume(self):\\n         self.assertEqual(node.extra[\\\"password\\\"], \\\"racktestvJq7d3\\\")\\n         self.assertEqual(node.extra[\\\"metadata\\\"][\\\"My Server Name\\\"], \\\"Apache1\\\")\\n \\n+    def test_create_node_with_ex_files(self):\\n+        OpenStack_2_0_MockHttp.type = \\\"EX_FILES\\\"\\n+        image = NodeImage(id=11, name=\\\"Ubuntu 8.10 (intrepid)\\\", driver=self.driver)\\n+        size = NodeSize(1, \\\"256 slice\\\", None, None, None, None, driver=self.driver)\\n+        files = {\\\"/file1\\\": \\\"content1\\\", \\\"/file2\\\": \\\"content2\\\"}\\n+        node = self.driver.create_node(\\n+            name=\\\"racktest\\\", image=image, size=size, ex_files=files\\n+        )\\n+        self.assertEqual(node.id, \\\"26f7fbee-8ce1-4c28-887a-bfe8e4bb10fe\\\")\\n+        self.assertEqual(node.name, \\\"racktest\\\")\\n+        OpenStack_2_0_MockHttp.type = \\\"EX_FILES_NONE\\\"\\n+        node = self.driver.create_node(name=\\\"racktest\\\", image=image, size=size)\\n+        self.assertEqual(node.id, \\\"26f7fbee-8ce1-4c28-887a-bfe8e4bb10fe\\\")\\n+        self.assertEqual(node.name, \\\"racktest\\\")\\n+\\n     def test_destroy_node(self):\\n         self.assertTrue(self.node.destroy())\\n \\n@@ -2755,6 +2770,34 @@ def _v1_1_slug_servers_EX_DISK_CONFIG(self, method, url, body, headers):\\n                 httplib.responses[httplib.OK],\\n             )\\n \\n+    def _v1_1_slug_servers_EX_FILES(self, method, url, body, headers):\\n+        if method == \\\"POST\\\":\\n+            body = u(body)\\n+            personality = [\\n+                {\\\"path\\\": \\\"/file1\\\", \\\"contents\\\": \\\"Y29udGVudDE=\\\"},\\n+                {\\\"path\\\": \\\"/file2\\\", \\\"contents\\\": \\\"Y29udGVudDI=\\\"},\\n+            ]\\n+            self.assertEqual(json.loads(body)[\\\"server\\\"][\\\"personality\\\"], personality)\\n+            body = self.fixtures.load(\\\"_servers_create.json\\\")\\n+            return (\\n+                httplib.OK,\\n+                body,\\n+                self.json_content_headers,\\n+                httplib.responses[httplib.OK],\\n+            )\\n+\\n+    def _v1_1_slug_servers_EX_FILES_NONE(self, method, url, body, headers):\\n+        if method == \\\"POST\\\":\\n+            body = u(body)\\n+            self.assertNotIn('\\\"personality\\\"', body)\\n+            body = self.fixtures.load(\\\"_servers_create.json\\\")\\n+            return (\\n+                httplib.OK,\\n+                body,\\n+                self.json_content_headers,\\n+                httplib.responses[httplib.OK],\\n+            )\\n+\\n     def _v1_1_slug_flavors_7(self, method, url, body, headers):\\n         if method == \\\"GET\\\":\\n             body = self.fixtures.load(\\\"_flavors_7.json\\\")\\n@@ -3009,6 +3052,30 @@ def _v2_1337_servers_1c01300f_ef97_4937_8f03_ac676d6234be_os_interface(\\n         else:\\n             raise NotImplementedError()\\n \\n+    def _v2_1337_servers_26f7fbee_8ce1_4c28_887a_bfe8e4bb10fe_EX_FILES(\\n+        self, method, url, body, headers\\n+    ):\\n+        if method == \\\"GET\\\":\\n+            body = self.fixtures.load(\\n+                \\\"_servers_26f7fbee_8ce1_4c28_887a_bfe8e4bb10fe.json\\\"\\n+            )\\n+        else:\\n+            raise NotImplementedError()\\n+\\n+        return (\\n+            httplib.OK,\\n+            body,\\n+            self.json_content_headers,\\n+            httplib.responses[httplib.OK],\\n+        )\\n+\\n+    def _v2_1337_servers_26f7fbee_8ce1_4c28_887a_bfe8e4bb10fe_EX_FILES_NONE(\\n+        self, method, url, body, headers\\n+    ):\\n+        return self._v2_1337_servers_26f7fbee_8ce1_4c28_887a_bfe8e4bb10fe_EX_FILES(\\n+            method, url, body, headers\\n+        )\\n+\\n     def _v1_1_slug_servers_1c01300f_ef97_4937_8f03_ac676d6234be_os_security_groups(\\n         self, method, url, body, headers\\n     ):\\n\",\"diff --git a/libcloud/test/storage/test_scaleway.py b/libcloud/test/storage/test_scaleway.py\\nnew file mode 100644\\nindex 0000000000..2e707a15d3\\n--- /dev/null\\n+++ b/libcloud/test/storage/test_scaleway.py\\n@@ -0,0 +1,57 @@\\n+# Licensed to the Apache Software Foundation (ASF) under one or more\\n+# contributor license agreements.  See the NOTICE file distributed with\\n+# this work for additional information regarding copyright ownership.\\n+# The ASF licenses this file to You under the Apache License, Version 2.0\\n+# (the \\\"License\\\"); you may not use this file except in compliance with\\n+# the License.  You may obtain a copy of the License at\\n+#\\n+#     http://www.apache.org/licenses/LICENSE-2.0\\n+#\\n+# Unless required by applicable law or agreed to in writing, software\\n+# distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n+# See the License for the specific language governing permissions and\\n+# limitations under the License.\\n+\\n+\\n+import sys\\n+import unittest\\n+\\n+from libcloud.storage.drivers.s3 import S3SignatureV4Connection\\n+from libcloud.storage.drivers.scaleway import (\\n+    ScalewayStorageDriver,\\n+    SCW_FR_PAR_STANDARD_HOST,\\n+)\\n+from libcloud.test.storage.test_s3 import S3MockHttp, S3Tests\\n+\\n+from libcloud.test.secrets import STORAGE_S3_PARAMS\\n+\\n+\\n+class ScalewayStorageDriverTestCase(S3Tests, unittest.TestCase):\\n+    driver_type = ScalewayStorageDriver\\n+    driver_args = STORAGE_S3_PARAMS\\n+    default_host = SCW_FR_PAR_STANDARD_HOST\\n+\\n+    @classmethod\\n+    def create_driver(self):\\n+        return self.driver_type(*self.driver_args, host=self.default_host)\\n+\\n+    def setUp(self):\\n+        super(ScalewayStorageDriverTestCase, self).setUp()\\n+\\n+        ScalewayStorageDriver.connectionCls.conn_class = S3MockHttp\\n+        S3MockHttp.type = None\\n+\\n+        self.driver = self.create_driver()\\n+\\n+    def test_connection_class_type(self):\\n+        self.assertEqual(self.driver.connectionCls, S3SignatureV4Connection)\\n+\\n+    def test_connection_class_default_host(self):\\n+        self.assertEqual(self.driver.connectionCls.host, self.default_host)\\n+        self.assertEqual(self.driver.connectionCls.port, 443)\\n+        self.assertEqual(self.driver.connectionCls.secure, True)\\n+\\n+\\n+if __name__ == \\\"__main__\\\":\\n+    sys.exit(unittest.main())\\n\",\"diff --git a/tox.ini b/tox.ini\\nindex e586f1c340..7a3b92b431 100644\\n--- a/tox.ini\\n+++ b/tox.ini\\n@@ -268,11 +268,12 @@ commands = flake8 --config ./.flake8 libcloud/\\n \\n [testenv:black]\\n deps = -r{toxinidir}/requirements-tests.txt\\n-        black==21.10b0; python_version >= '3.6' and implementation_name == \\\"cpython\\\"\\n+        black==22.1.0; python_version >= '3.6' and implementation_name == \\\"cpython\\\"\\n # NOTE: We need to use bash -c otherwise black will quote the argument and it\\n # won't expand to the list of files when the command runs\\n commands =\\n            bash -c \\\"black --config pyproject.toml *.py\\\"\\n+           black --config pyproject.toml libcloud/\\n            black --config pyproject.toml docs/examples/\\n            black --config pyproject.toml demos/\\n            black --config pyproject.toml contrib/\\n@@ -280,7 +281,7 @@ commands =\\n \\n [testenv:black-check]\\n deps = -r{toxinidir}/requirements-tests.txt\\n-        black==21.10b0; python_version >= '3.6' and implementation_name == \\\"cpython\\\"\\n+        black==22.1.0; python_version >= '3.6' and implementation_name == \\\"cpython\\\"\\n # NOTE: We need to use bash -c otherwise black will quote the argument and it\\n # won't expand to the list of files when the command runs\\n commands =\"]", "hints_text": ""}
