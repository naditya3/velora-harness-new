{"instance_id": "1334829921576303", "repo": "myremylar/pygame_gui", "base_commit": "fba910923c2b4f096bbbb6a3338dbb76c6d55236", "problem_statement": "css-like theme classes assignable to UI elements:\\n**Is your feature request related to a problem? Please describe.**\\r\\nCurrently I have to describe the theme for each element individually(using prototypes) or using the class / default descriptor. In a GUI with large amount of differently themed widgets it gets cumbersome.\\r\\n\\r\\n**Describe the solution you'd like**\\r\\nI'd like to be able to assign multiple theme css-like \"classes\" directly to a UI element. \\r\\n\\r\\n**Describe alternatives you've considered**\\r\\nThe same could be achieved by allowing multiple prototypes and using them to style the element with an individual theme (via object_id), but it would require an unnecessary step.\\r\\n\\r\\n\\r\\nThis may be a bad place to ask, but it is somewhat related - is it intentional that multiple UI elements can have the same object_id?\\r\\n", "FAIL_TO_PASS": ["tests/test_elements/test_ui_drop_down_menu.py::TestUIDropDownMenu::test_class_theming_id", "tests/test_core/test_ui_appearance_theme.py::TestUIAppearanceTheme::test_use_class_id_generated", "tests/test_elements/test_ui_button.py::TestUIButton::test_class_theming_id", "tests/test_core/test_ui_appearance_theme.py::TestUIAppearanceTheme::test_build_all_combined_ids"], "PASS_TO_PASS": [], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/myremylar_pygame_gui:fba910923c2b4f096bbbb6a3338dbb76c6d55236", "patch": "", "test_patch": "[\"diff --git a/tests/data/themes/appearance_theme_class_id_test.json b/tests/data/themes/appearance_theme_class_id_test.json\\nnew file mode 100644\\nindex 0000000..59c2716\\n--- /dev/null\\n+++ b/tests/data/themes/appearance_theme_class_id_test.json\\n@@ -0,0 +1,31 @@\\n+{\\n+    \\\"button\\\":\\n+    {\\n+        \\\"misc\\\":\\n+        {\\n+            \\\"border_width\\\": \\\"2\\\",\\n+            \\\"shadow_width\\\": \\\"3\\\"\\n+        }\\n+    },\\n+    \\\"@test_class\\\":\\n+    {\\n+        \\\"misc\\\":\\n+        {\\n+            \\\"border_width\\\": \\\"3\\\"\\n+        }\\n+    },\\n+    \\\"#test_object_1\\\":\\n+    {\\n+        \\\"misc\\\":\\n+        {\\n+            \\\"border_width\\\": \\\"1\\\"\\n+        }\\n+    },\\n+    \\\"#test_object_2\\\":\\n+    {\\n+        \\\"misc\\\":\\n+        {\\n+            \\\"shadow_width\\\": \\\"0\\\"\\n+        }\\n+    }\\n+}\\n\\\\ No newline at end of file\\n\",\"diff --git a/tests/test_core/test_ui_appearance_theme.py b/tests/test_core/test_ui_appearance_theme.py\\nindex 23ffe0c..dd4a82b 100644\\n--- a/tests/test_core/test_ui_appearance_theme.py\\n+++ b/tests/test_core/test_ui_appearance_theme.py\\n@@ -103,7 +103,8 @@ class TestUIAppearanceTheme:\\n     def test_load_images_bad_path(self, _init_pygame):\\n         loader = BlockingThreadedResourceLoader()\\n         theme = UIAppearanceTheme(loader)\\n-        theme.ui_element_image_locs['button'] = {'regular_path': {'changed': True, 'path': 'not_an_image.png'}}\\n+        theme.ui_element_image_locs['button'] = {'regular_path': {'changed': True,\\n+                                                                  'path': 'not_an_image.png'}}\\n         with pytest.warns(UserWarning, match=\\\"Unable to load resource\\\"):\\n             theme._load_images()\\n             loader.start()\\n@@ -111,8 +112,11 @@ class TestUIAppearanceTheme:\\n \\n     def test_build_all_combined_ids(self, _init_pygame):\\n         theme = UIAppearanceTheme(BlockingThreadedResourceLoader())\\n-        with pytest.raises(ValueError, match=\\\"Object ID hierarchy is not equal in length to Element ID hierarchy\\\"):\\n-            theme.build_all_combined_ids(object_ids=['whut', 'the', 'heck'], element_ids=['button'])\\n+        with pytest.raises(ValueError, match=\\\"Object & class ID hierarchy is not \\\"\\n+                                             \\\"equal in length to Element ID hierarchy\\\"):\\n+            theme.build_all_combined_ids(element_ids=['button'],\\n+                                         class_ids=[None],\\n+                                         object_ids=['whut', 'the', 'heck'])\\n \\n     def test_load_theme_bad_path(self, _init_pygame):\\n         theme = UIAppearanceTheme(BlockingThreadedResourceLoader())\\n@@ -123,3 +127,58 @@ class TestUIAppearanceTheme:\\n         theme = UIAppearanceTheme(BlockingThreadedResourceLoader())\\n         with pytest.warns(UserWarning, match='Failed to load current theme file, check syntax'):\\n             theme.load_theme(os.path.join(\\\"tests\\\", \\\"data\\\", \\\"themes\\\", \\\"bad_syntax_theme.json\\\"))\\n+\\n+    def test_use_class_id_simple(self, _init_pygame):\\n+        theme = UIAppearanceTheme(BlockingThreadedResourceLoader())\\n+        theme.load_theme(PackageResource('tests.data.themes',\\n+                                         'appearance_theme_class_id_test.json'))\\n+        border_width = theme.get_misc_data(misc_data_id='border_width',\\n+                                           combined_element_ids=['#test_object_2',\\n+                                                                 '@test_class',\\n+                                                                 'button'])\\n+        assert border_width == '3'\\n+\\n+    def test_use_class_id_generated(self, _init_pygame, _display_surface_return_none: None):\\n+        theme = UIAppearanceTheme(BlockingThreadedResourceLoader())\\n+        theme.load_theme(PackageResource('tests.data.themes',\\n+                                         'appearance_theme_class_id_test.json'))\\n+\\n+        combined_ids = theme.build_all_combined_ids(element_ids=['button'],\\n+                                                    class_ids=['@test_class'],\\n+                                                    object_ids=['#test_object_2'])\\n+\\n+        assert combined_ids == ['#test_object_2', '@test_class', 'button']\\n+\\n+        border_width = theme.get_misc_data(misc_data_id='border_width',\\n+                                           combined_element_ids=combined_ids)\\n+        shadow_width = theme.get_misc_data(misc_data_id='shadow_width',\\n+                                           combined_element_ids=combined_ids)\\n+        assert shadow_width == '0'\\n+        assert border_width == '3'\\n+\\n+        combined_ids = theme.build_all_combined_ids(element_ids=['button'],\\n+                                                    class_ids=['@test_class'],\\n+                                                    object_ids=['#test_object_1'])\\n+\\n+        assert combined_ids == ['#test_object_1', '@test_class', 'button']\\n+\\n+        border_width = theme.get_misc_data(misc_data_id='border_width',\\n+                                           combined_element_ids=combined_ids)\\n+\\n+        shadow_width = theme.get_misc_data(misc_data_id='shadow_width',\\n+                                           combined_element_ids=combined_ids)\\n+        assert border_width == '1'\\n+        assert shadow_width == '3'\\n+\\n+        combined_ids = theme.build_all_combined_ids(element_ids=['button'], class_ids=[None],\\n+                                                    object_ids=['#test_object_2'])\\n+\\n+        assert combined_ids == ['#test_object_2', 'button']\\n+\\n+        border_width = theme.get_misc_data(misc_data_id='border_width',\\n+                                           combined_element_ids=combined_ids)\\n+\\n+        shadow_width = theme.get_misc_data(misc_data_id='shadow_width',\\n+                                           combined_element_ids=combined_ids)\\n+        assert border_width == '2'\\n+        assert shadow_width == '0'\\n\",\"diff --git a/tests/test_elements/test_ui_button.py b/tests/test_elements/test_ui_button.py\\nindex ab69dee..b243d67 100644\\n--- a/tests/test_elements/test_ui_button.py\\n+++ b/tests/test_elements/test_ui_button.py\\n@@ -1,4 +1,5 @@\\n import os\\n+import sys\\n import pytest\\n import pygame\\n import pygame_gui\\n@@ -10,6 +11,7 @@ from tests.shared_comparators import compare_surfaces\\n from pygame_gui.ui_manager import UIManager\\n from pygame_gui.elements.ui_button import UIButton\\n from pygame_gui.core.ui_container import UIContainer\\n+from pygame_gui import PackageResource\\n \\n try:\\n     # mouse button constants not defined in pygame 1.9.3\\n@@ -688,3 +690,46 @@ class TestUIButton:\\n         button.hide()\\n         manager.draw_ui(surface)\\n         assert compare_surfaces(empty_surface, surface)\\n+\\n+    def test_class_theming_id(self, _init_pygame, _display_surface_return_none):\\n+        manager = UIManager((800, 600),\\n+                            PackageResource('tests.data.themes',\\n+                                            'appearance_theme_class_id_test.json'))\\n+        if sys.version_info.minor >= 7:\\n+            button = UIButton(relative_rect=pygame.Rect(10, 10, 150, 30),\\n+                              text=\\\"Test Button\\\",\\n+                              manager=manager,\\n+                              object_id=pygame_gui.core.ObjectID(class_id='@test_class'))\\n+        else:\\n+            button = UIButton(relative_rect=pygame.Rect(10, 10, 150, 30),\\n+                              text=\\\"Test Button\\\",\\n+                              manager=manager,\\n+                              object_id=pygame_gui.core.ObjectID(object_id=None,\\n+                                                                 class_id='@test_class'))\\n+\\n+        assert button.combined_element_ids == ['@test_class', 'button']\\n+\\n+        button = UIButton(relative_rect=pygame.Rect(10, 10, 150, 30),\\n+                          text=\\\"Test Button\\\",\\n+                          manager=manager,\\n+                          object_id=pygame_gui.core.ObjectID(object_id='#test_object_1',\\n+                                                             class_id='@test_class'))\\n+\\n+        assert button.combined_element_ids == ['#test_object_1', '@test_class', 'button']\\n+\\n+        test_container = UIContainer(relative_rect=pygame.Rect(100, 100, 300, 60),\\n+                                     manager=manager)\\n+\\n+        button = UIButton(relative_rect=pygame.Rect(10, 10, 150, 30),\\n+                          text=\\\"Test Button\\\",\\n+                          manager=manager,\\n+                          container=test_container,\\n+                          object_id=pygame_gui.core.ObjectID(object_id='#test_object_1',\\n+                                                             class_id='@test_class'))\\n+\\n+        assert button.combined_element_ids == ['container.#test_object_1',\\n+                                               'container.@test_class',\\n+                                               'container.button',\\n+                                               '#test_object_1',\\n+                                               '@test_class',\\n+                                               'button']\\n\",\"diff --git a/tests/test_elements/test_ui_drop_down_menu.py b/tests/test_elements/test_ui_drop_down_menu.py\\nindex f6e9eae..bebc1fe 100644\\n--- a/tests/test_elements/test_ui_drop_down_menu.py\\n+++ b/tests/test_elements/test_ui_drop_down_menu.py\\n@@ -10,6 +10,7 @@ from tests.shared_comparators import compare_surfaces\\n from pygame_gui.ui_manager import UIManager\\n from pygame_gui.elements.ui_drop_down_menu import UIDropDownMenu\\n from pygame_gui.core.ui_container import UIContainer\\n+from pygame_gui import PackageResource\\n \\n try:\\n     # mouse button constants not defined in pygame 1.9.3\\n@@ -545,3 +546,45 @@ class TestUIDropDownMenu:\\n         menu.hide()\\n         manager.draw_ui(surface)\\n         assert compare_surfaces(empty_surface, surface)\\n+\\n+    def test_class_theming_id(self, _init_pygame, _display_surface_return_none):\\n+        manager = UIManager((800, 600),\\n+                            PackageResource('tests.data.themes',\\n+                                            'appearance_theme_class_id_test.json'))\\n+\\n+        menu = UIDropDownMenu(options_list=['eggs', 'flour', 'sugar'],\\n+                              starting_option='eggs',\\n+                              relative_rect=pygame.Rect(10, 10, 200, 30),\\n+                              manager=manager,\\n+                              object_id=pygame_gui.core.ObjectID(object_id=None,\\n+                                                                 class_id='@test_class')\\n+                              )\\n+\\n+        assert menu.combined_element_ids == ['@test_class', 'drop_down_menu']\\n+\\n+        menu = UIDropDownMenu(options_list=['eggs', 'flour', 'sugar'],\\n+                              starting_option='eggs',\\n+                              relative_rect=pygame.Rect(10, 10, 200, 30),\\n+                              manager=manager,\\n+                              object_id=pygame_gui.core.ObjectID(object_id='#test_object_1',\\n+                                                                 class_id='@test_class'))\\n+\\n+        assert menu.combined_element_ids == ['#test_object_1', '@test_class', 'drop_down_menu']\\n+\\n+        test_container = UIContainer(relative_rect=pygame.Rect(100, 100, 300, 60),\\n+                                     manager=manager)\\n+\\n+        menu = UIDropDownMenu(options_list=['eggs', 'flour', 'sugar'],\\n+                              starting_option='eggs',\\n+                              relative_rect=pygame.Rect(10, 10, 200, 30),\\n+                              container=test_container,\\n+                              manager=manager,\\n+                              object_id=pygame_gui.core.ObjectID(object_id='#test_object_1',\\n+                                                                 class_id='@test_class'))\\n+\\n+        assert menu.combined_element_ids == ['container.#test_object_1',\\n+                                             'container.@test_class',\\n+                                             'container.drop_down_menu',\\n+                                             '#test_object_1',\\n+                                             '@test_class',\\n+                                             'drop_down_menu']\"]", "hints_text": ""}
