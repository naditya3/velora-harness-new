{"instance_id": "1510767750294065", "repo": "aimakerspace/peekingduck", "base_commit": "5b14f676df4b0eb210391dbc65e7b483edc0808a", "problem_statement": "misnomer: \"end\" in input nodes:\\nIn [config files](https://github.com/aimakerspace/PeekingDuck/blob/dev/peekingduck/configs/output/media_writer.yml) for `output` nodes, I noted that we are indicating a placeholder `\"end\"` in the outputs, but we never used it. \\r\\n\\r\\nIn fact, its the [input nodes](https://github.com/aimakerspace/PeekingDuck/blob/95ac4d45751c813daeb38faa9ce303f8fed19a59/peekingduck/pipeline/nodes/input/recorded.py#L53) that pushes the \"end\" into the pipeline. \\r\\n\\r\\nIs there a way to address this?", "FAIL_TO_PASS": ["tests/pipeline/test_pipeline.py::TestPipeline::test_execute", "tests/pipeline/test_pipeline.py::TestPipeline::test_empty_pipeline_results"], "PASS_TO_PASS": ["tests/pipeline/nodes/heuristic/test_check_nearby_objs.py::TestCheckNearbyObjs::test_no_3D_locs", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_enough_torso_keypoints", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_preprocess_image_mobilenet[75]", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_get_valid_resolution", "tests/pipeline/nodes/model/posenetv1/test_decode.py::TestDecode::test_clip_to_indices", "tests/loaders/test_configloader.py::TestConfigLoader::test_config_loader_load_correct_yaml", "tests/pipeline/nodes/heuristic/test_check_nearby_objs.py::TestCheckNearbyObjs::test_objs_not_nearby", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_rescale_image_resnet", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_init_node_pkd", "tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py::TestBboxTo3dLoc::test_multi_bboxes", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_rescale_image_mobilenet[50]", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_resize_image", "tests/pipeline/nodes/heuristic/test_group_nearby_objs.py::TestGroupNearbyObjs::test_objs_are_nearby", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_preprocess_image_resnet", "tests/loaders/test_configloader.py::TestConfigLoader::test_config_loader_returns_correct_config_filepath", "tests/pipeline/nodes/input/test_recorded.py::TestMediaReader::test_reader_run_throws_error_on_empty_folder", "tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py::TestBboxTo3dLoc::test_formula", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_get_torso_keypoints", "tests/pipeline/nodes/heuristic/test_check_nearby_objs.py::TestCheckNearbyObjs::test_some_nearby_some_not", "tests/runner/test_runner.py::TestRunner::test_init_nodes_with_wrong_input", "tests/pipeline/nodes/model/posenetv1/test_decode.py::TestDecode::test_traverse_to_target_keypoint", "tests/pipeline/nodes/heuristic/test_bbox_to_btm_midpoint.py::TestBboxToBtmMidpoint::test_multi_bboxes", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_get_bbox", "tests/pipeline/nodes/heuristic/test_check_large_groups.py::TestCheckLargeGroups::test_no_large_groups", "tests/runner/test_runner.py::TestRunner::test_run", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_get_pipeline_error", "tests/pipeline/nodes/heuristic/test_check_large_groups.py::TestCheckLargeGroups::test_no_obj_groups", "tests/runner/test_runner.py::TestRunner::test_init_nodes_none", "tests/pipeline/nodes/heuristic/test_group_nearby_objs.py::TestGroupNearbyObjs::test_multi_separate_groups", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_one_keypoint", "tests/pipeline/nodes/heuristic/test_group_nearby_objs.py::TestGroupNearbyObjs::test_objs_not_nearby", "tests/pipeline/nodes/test_node.py::TestNode::test_node_init_raises_error", "tests/pipeline/nodes/test_node.py::TestNode::test_node_returns_correct_output", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_multi_keypoints", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_edit_node_config", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_get_3d_point_from_bbox", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_get_pipeline", "tests/runner/test_runner.py::TestRunner::test_run_delete", "tests/pipeline/nodes/output/test_media_writer.py::TestMediaWriter::test_writer_writes_multi_image", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_preprocess_image_mobilenet[50]", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_rescale_image_mobilenet[101]", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_loaded_node_list", "tests/pipeline/nodes/heuristic/test_bbox_to_btm_midpoint.py::TestBboxToBtmMidpoint::test_formula", "tests/pipeline/nodes/output/test_media_writer.py::TestMediaWriter::test_writer_writes_single_image", "tests/pipeline/nodes/heuristic/test_keypoints_to_3d_loc.py::TestKeypointsTo3dLoc::test_no_keypoints", "tests/pipeline/nodes/heuristic/test_bbox_to_btm_midpoint.py::TestBboxToBtmMidpoint::test_no_bboxes", "tests/pipeline/nodes/input/test_recorded.py::TestMediaReader::test_reader_reads_one_image", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_rescale_image_mobilenet[75]", "tests/pipeline/nodes/test_node.py::TestNode::test_node_gives_correct_outputs", "tests/pipeline/nodes/input/test_recorded.py::TestMediaReader::test_reader_reads_one_video", "tests/pipeline/nodes/test_node.py::TestNode::test_node_no_concrete_run_raises_error", "tests/pipeline/nodes/heuristic/test_group_nearby_objs.py::TestGroupNearbyObjs::test_no_3D_locs", "tests/pipeline/nodes/heuristic/test_bbox_count.py::TestBboxCount::test_multi_bboxes", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_instantiate_nodes", "tests/runner/test_runner.py::TestRunner::test_get_run_config", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_init_node_custom", "tests/pipeline/test_pipeline.py::TestPipeline::test_pipeline_wrong_order", "tests/pipeline/nodes/heuristic/test_check_nearby_objs.py::TestCheckNearbyObjs::test_objs_are_nearby", "tests/pipeline/nodes/output/test_media_writer.py::TestMediaWriter::test_cwd_starts_empty", "tests/pipeline/nodes/heuristic/test_bbox_to_3d_loc.py::TestBboxTo3dLoc::test_no_bbox", "tests/pipeline/nodes/input/test_recorded.py::TestMediaReader::test_reader_run_throws_error_on_wrong_file_path", "tests/pipeline/nodes/output/test_media_writer.py::TestMediaWriter::test_writer_writes_multi_video", "tests/pipeline/nodes/output/test_media_writer.py::TestMediaWriter::test_writer_writes_single_video", "tests/pipeline/nodes/input/test_recorded.py::TestMediaReader::test_reader_reads_multi_images", "tests/pipeline/nodes/heuristic/test_check_large_groups.py::TestCheckLargeGroups::test_multi_large_groups", "tests/pipeline/nodes/model/posenetv1/test_preprocessing.py::TestPreprocessing::test_preprocess_image_mobilenet[101]", "tests/runner/test_runner.py::TestRunner::test_init_nodes_with_instantiated_nodes", "tests/loaders/test_declarativeloader.py::TestDeclarativeLoader::test_init_node_edit", "tests/pipeline/nodes/heuristic/test_bbox_count.py::TestBboxCount::test_no_bboxes", "tests/pipeline/nodes/test_node.py::TestNode::test_node_gives_correct_inputs", "tests/pipeline/nodes/input/test_recorded.py::TestMediaReader::test_reader_reads_multiple_videos"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/aimakerspace_peekingduck:5b14f676df4b0eb210391dbc65e7b483edc0808a", "patch": "[\"diff --git a/peekingduck/configs/draw/bbox.yml b/peekingduck/configs/draw/bbox.yml\\nindex 053bfe315..6b8d3b656 100644\\n--- a/peekingduck/configs/draw/bbox.yml\\n+++ b/peekingduck/configs/draw/bbox.yml\\n@@ -1,5 +1,5 @@\\n input: [\\\"bboxes\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n \\n bbox_color: [255, 0, 255]\\n bbox_thickness: 2\\n\\\\ No newline at end of file\\n\",\"diff --git a/peekingduck/configs/draw/bbox_count.yml b/peekingduck/configs/draw/bbox_count.yml\\nindex 4ce922135..9e2a4c8fc 100644\\n--- a/peekingduck/configs/draw/bbox_count.yml\\n+++ b/peekingduck/configs/draw/bbox_count.yml\\n@@ -1,2 +1,2 @@\\n input: [\\\"count\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n\",\"diff --git a/peekingduck/configs/draw/btm_midpoint.yml b/peekingduck/configs/draw/btm_midpoint.yml\\nindex 8645d648d..126e83731 100644\\n--- a/peekingduck/configs/draw/btm_midpoint.yml\\n+++ b/peekingduck/configs/draw/btm_midpoint.yml\\n@@ -1,2 +1,2 @@\\n input: [\\\"btm_midpoint\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n\",\"diff --git a/peekingduck/configs/draw/fps.yml b/peekingduck/configs/draw/fps.yml\\nindex f2ba0972a..d4db73ed1 100644\\n--- a/peekingduck/configs/draw/fps.yml\\n+++ b/peekingduck/configs/draw/fps.yml\\n@@ -1,2 +1,2 @@\\n input: [\\\"img\\\"]\\n-output: [\\\"img\\\"]\\n\\\\ No newline at end of file\\n+output: [\\\"none\\\"]\\n\\\\ No newline at end of file\\n\",\"diff --git a/peekingduck/configs/draw/group_bbox_and_tag.yml b/peekingduck/configs/draw/group_bbox_and_tag.yml\\nindex 34c097818..424d3a990 100644\\n--- a/peekingduck/configs/draw/group_bbox_and_tag.yml\\n+++ b/peekingduck/configs/draw/group_bbox_and_tag.yml\\n@@ -1,5 +1,5 @@\\n input: [\\\"img\\\", \\\"bboxes\\\", \\\"obj_groups\\\", \\\"large_groups\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n \\n bbox_color: [0, 140, 255]\\n bbox_thickness: 4\\n\",\"diff --git a/peekingduck/configs/draw/poses.yml b/peekingduck/configs/draw/poses.yml\\nindex 46bc98037..651a32224 100644\\n--- a/peekingduck/configs/draw/poses.yml\\n+++ b/peekingduck/configs/draw/poses.yml\\n@@ -1,5 +1,5 @@\\n input: [\\\"keypoints\\\", \\\"keypoint_scores\\\", \\\"keypoint_conns\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n \\n keypoint_dot_color: [0, 255, 0]\\n keypoint_dot_radius: 5\\n\",\"diff --git a/peekingduck/configs/draw/tag.yml b/peekingduck/configs/draw/tag.yml\\nindex 561cc9674..9e4c27a34 100644\\n--- a/peekingduck/configs/draw/tag.yml\\n+++ b/peekingduck/configs/draw/tag.yml\\n@@ -1,4 +1,4 @@\\n input: [\\\"bboxes\\\", \\\"obj_tags\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n \\n tag_color: [100, 0, 255]\\n\\\\ No newline at end of file\\n\",\"diff --git a/peekingduck/configs/draw/zone_count.yml b/peekingduck/configs/draw/zone_count.yml\\nindex 891d3cb6d..88bde76ef 100644\\n--- a/peekingduck/configs/draw/zone_count.yml\\n+++ b/peekingduck/configs/draw/zone_count.yml\\n@@ -1,2 +1,2 @@\\n input: [\\\"zone_count\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n\",\"diff --git a/peekingduck/configs/draw/zones.yml b/peekingduck/configs/draw/zones.yml\\nindex 716e6f483..3c753889d 100644\\n--- a/peekingduck/configs/draw/zones.yml\\n+++ b/peekingduck/configs/draw/zones.yml\\n@@ -1,2 +1,2 @@\\n input: [\\\"zones\\\", \\\"img\\\"]\\n-output: [\\\"img\\\"]\\n+output: [\\\"none\\\"]\\n\",\"diff --git a/peekingduck/configs/input/live.yml b/peekingduck/configs/input/live.yml\\nindex 29438c78d..0373228d9 100644\\n--- a/peekingduck/configs/input/live.yml\\n+++ b/peekingduck/configs/input/live.yml\\n@@ -1,4 +1,4 @@\\n-input: [\\\"source\\\"]\\n+input: [\\\"none\\\"]\\n output: [\\\"img\\\", \\\"pipeline_end\\\", \\\"filename\\\", \\\"fps\\\"]\\n \\n fps_saved_output_video: 10   #may need to change depending on user machine performance\\n\",\"diff --git a/peekingduck/configs/input/recorded.yml b/peekingduck/configs/input/recorded.yml\\nindex 764323922..14eefd569 100644\\n--- a/peekingduck/configs/input/recorded.yml\\n+++ b/peekingduck/configs/input/recorded.yml\\n@@ -1,4 +1,4 @@\\n-input: [\\\"source\\\"]\\n+input: [\\\"none\\\"]\\n output: [\\\"img\\\", \\\"pipeline_end\\\", \\\"filename\\\", \\\"fps\\\"]\\n \\n resize: {\\n\",\"diff --git a/peekingduck/configs/output/media_writer.yml b/peekingduck/configs/output/media_writer.yml\\nindex 8833b7f33..6aeacf18b 100644\\n--- a/peekingduck/configs/output/media_writer.yml\\n+++ b/peekingduck/configs/output/media_writer.yml\\n@@ -1,4 +1,4 @@\\n input: [\\\"img\\\", \\\"filename\\\", \\\"fps\\\"]\\n-output: [\\\"end\\\"]\\n+output: [\\\"none\\\"]\\n \\n output_dir: 'PeekingDuck/data/output'\\n\\\\ No newline at end of file\\n\",\"diff --git a/peekingduck/pipeline/nodes/draw/group_bbox_and_tag.py b/peekingduck/pipeline/nodes/draw/group_bbox_and_tag.py\\nindex 044821113..1488f150e 100644\\n--- a/peekingduck/pipeline/nodes/draw/group_bbox_and_tag.py\\n+++ b/peekingduck/pipeline/nodes/draw/group_bbox_and_tag.py\\n@@ -42,7 +42,7 @@ def run(self, inputs: Dict[str, Any]) -> Dict[str, Any]:\\n                 \\\"large_groups\\\".\\n \\n         Returns:\\n-            outputs (dict): Dict with keys \\\"img\\\".\\n+            outputs (dict): Dict with keys \\\"none\\\".\\n         \\\"\\\"\\\"\\n \\n         group_bboxes = self._get_group_bbox_coords(\\n\",\"diff --git a/peekingduck/pipeline/nodes/draw/tag.py b/peekingduck/pipeline/nodes/draw/tag.py\\nindex 1bafe9bff..58b8fc972 100644\\n--- a/peekingduck/pipeline/nodes/draw/tag.py\\n+++ b/peekingduck/pipeline/nodes/draw/tag.py\\n@@ -36,7 +36,7 @@ def run(self, inputs: Dict[str, Any]) -> Dict[str, Any]:\\n             inputs (dict): Dict with keys \\\"bboxes\\\", \\\"obj_tags\\\", \\\"img\\\".\\n \\n         Returns:\\n-            outputs (dict): Dict with keys \\\"img\\\".\\n+            outputs (dict): Dict with keys \\\"none\\\".\\n         \\\"\\\"\\\"\\n \\n         draw_tags(inputs[\\\"img\\\"], inputs[\\\"bboxes\\\"],\\n\",\"diff --git a/peekingduck/pipeline/nodes/draw/zone_count.py b/peekingduck/pipeline/nodes/draw/zone_count.py\\nindex 9614a8f64..d77e1e859 100644\\n--- a/peekingduck/pipeline/nodes/draw/zone_count.py\\n+++ b/peekingduck/pipeline/nodes/draw/zone_count.py\\n@@ -34,7 +34,7 @@ def run(self, inputs: Dict[str, Any]) -> Dict[str, Any]:\\n             inputs (dict): Dict with keys \\\"btm_midpoint\\\", \\\"img\\\".\\n \\n         Returns:\\n-            outputs (dict): Dict with keys \\\"img\\\".\\n+            outputs (dict): Dict with keys \\\"none\\\".\\n         \\\"\\\"\\\"\\n \\n         draw_zone_count(inputs['img'], inputs['zone_count'])  # type: ignore\\n\",\"diff --git a/peekingduck/pipeline/nodes/draw/zones.py b/peekingduck/pipeline/nodes/draw/zones.py\\nindex e52728240..95956a74a 100644\\n--- a/peekingduck/pipeline/nodes/draw/zones.py\\n+++ b/peekingduck/pipeline/nodes/draw/zones.py\\n@@ -34,7 +34,7 @@ def run(self, inputs: Dict[str, Any]) -> Dict[str, Any]:\\n             inputs (dict): Dict with keys \\\"zones\\\", \\\"img\\\".\\n \\n         Returns:\\n-            outputs (dict): Dict with keys \\\"img\\\".\\n+            outputs (dict): Dict with keys \\\"none\\\".\\n         \\\"\\\"\\\"\\n \\n         draw_zones(inputs[\\\"img\\\"], inputs[\\\"zones\\\"])  # type: ignore\\n\",\"diff --git a/peekingduck/pipeline/nodes/input/recorded.py b/peekingduck/pipeline/nodes/input/recorded.py\\nindex ee74fc01b..ebaedc7c4 100644\\n--- a/peekingduck/pipeline/nodes/input/recorded.py\\n+++ b/peekingduck/pipeline/nodes/input/recorded.py\\n@@ -48,7 +48,7 @@ def __init__(self, config: Dict[str, Any]) -> None:\\n \\n     def run(self, inputs: Dict[str, Any]) -> Dict[str, Any]:\\n         '''\\n-        input: [\\\"source\\\"],\\n+        input: [\\\"none\\\"],\\n         output: [\\\"img\\\", \\\"pipeline_end\\\"]\\n         '''\\n         outputs = self._run_single_file()\\n\",\"diff --git a/peekingduck/pipeline/pipeline.py b/peekingduck/pipeline/pipeline.py\\nindex 9cfe95cbd..fa30e2183 100644\\n--- a/peekingduck/pipeline/pipeline.py\\n+++ b/peekingduck/pipeline/pipeline.py\\n@@ -76,7 +76,7 @@ def _check_pipe(nodes: List[AbstractNode]) -> None:\\n \\n         data_pool = []\\n \\n-        if nodes[0].inputs[0] == 'source':\\n+        if nodes[0].inputs[0] == 'none':\\n             data_pool.extend(nodes[0].outputs)\\n \\n         for node in nodes[1:]:\\n\"]", "test_patch": "[\"diff --git a/tests/pipeline/nodes/output/test_media_writer.py b/tests/pipeline/nodes/output/test_media_writer.py\\nindex ea2626386..8a8638e0b 100644\\n--- a/tests/pipeline/nodes/output/test_media_writer.py\\n+++ b/tests/pipeline/nodes/output/test_media_writer.py\\n@@ -31,7 +31,7 @@ def directory_contents():\\n def writer():\\n     media_writer = Node({\\\"output_dir\\\": OUTPUT_PATH,\\n                          \\\"input\\\": \\\"img\\\",\\n-                         \\\"output\\\": \\\"end\\\"\\n+                         \\\"output\\\": \\\"none\\\"\\n                          })\\n     return media_writer\\n \\n\",\"diff --git a/tests/pipeline/test_pipeline.py b/tests/pipeline/test_pipeline.py\\nindex 38b0bdd1b..d671d1e90 100644\\n--- a/tests/pipeline/test_pipeline.py\\n+++ b/tests/pipeline/test_pipeline.py\\n@@ -33,7 +33,7 @@ def run(self, inputs):\\n \\n @pytest.fixture\\n def config_node_input():\\n-    return {'input': [\\\"source\\\"],\\n+    return {'input': [\\\"none\\\"],\\n             'output': [\\\"test_output_1\\\"]}\\n \\n \"]", "hints_text": ""}
