{"instance_id": "1051289587101146", "repo": "compas-dev/compas_fab", "base_commit": "cec6b31a97b33b721425bb1821f70b7c15638a0d", "problem_statement": "Static API:\\nAs an autocomplete user, I want the API of COMPAS FAB to be autocompleted by Pylance because I want to be happy.\\n\\nAs done on compas core, the API should be explicitly defined at 2nd level (instead of the dynamic `__all__` imports) and ideally also unit tested (see #282)", "FAIL_TO_PASS": ["tests/api/test_api_completeness.py::test_compas_api_stubs"], "PASS_TO_PASS": ["tests/robots/test_duration.py::test_seconds", "tests/backends/ros/messages/test_std_msgs.py::test_int8_multiarray", "tests/robots/test_duration.py::test_ctor_only_takes_integers", "tests/backends/ros/messages/test_std_msgs.py::test_nested_repr", "tests/robots/test_trajectory.py::test_trajectory_points", "tests/backends/ros/messages/test_std_msgs.py::test_rosmsg_str", "tests/robots/test_semantics.py::test_disabled_collisions", "tests/backends/ros/messages/test_std_msgs.py::test_posearray", "tests/robots/test_semantics.py::test_end_effectors", "tests/backends/test_tasks.py::test_set_result_before", "tests/robots/test_semantics.py::test_panda_srdf_file", "tests/robots/test_duration.py::test_from_data", "tests/robots/test_duration.py::test_to_data", "tests/robots/test_trajectory.py::test_joint_trajectory_point_merged", "tests/robots/test_trajectory.py::test_joint_trajectory_point_serialization", "tests/backends/ros/messages/test_std_msgs.py::test_rosmsg_attributes", "tests/robots/test_duration.py::test_repr", "tests/backends/test_tasks.py::test_set_result_on_thread", "tests/robots/test_duration.py::test_equality", "tests/robots/test_semantics.py::test_passive_joints", "tests/robots/test_trajectory.py::test_serialization", "tests/backends/ros/test_local_cache_info.py::test_local_cache_from_none", "tests/robots/test_duration.py::test_inequality", "tests/backends/ros/test_local_cache_info.py::test_directory_extraction_works_cross_platform", "tests/robots/test_semantics.py::test_ur5_semantics", "tests/backends/ros/messages/test_std_msgs.py::test_float32_multiarray"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/compas-dev_compas_fab:cec6b31a97b33b721425bb1821f70b7c15638a0d", "patch": "[\"diff --git a/docs/api/compas_fab.backends.rst b/docs/api/compas_fab.backends.rst\\nnew file mode 100644\\nindex 0000000..63a31c5\\n--- /dev/null\\n+++ b/docs/api/compas_fab.backends.rst\\n@@ -0,0 +1,2 @@\\n+\\n+.. automodule:: compas_fab.backends\\n\\\\ No newline at end of file\\n\",\"diff --git a/docs/api/compas_fab.robots.rst b/docs/api/compas_fab.robots.rst\\nnew file mode 100644\\nindex 0000000..c994bd5\\n--- /dev/null\\n+++ b/docs/api/compas_fab.robots.rst\\n@@ -0,0 +1,2 @@\\n+\\n+.. automodule:: compas_fab.robots\\n\\\\ No newline at end of file\\n\",\"diff --git a/docs/api/compas_fab.rst b/docs/api/compas_fab.rst\\nnew file mode 100644\\nindex 0000000..6233080\\n--- /dev/null\\n+++ b/docs/api/compas_fab.rst\\n@@ -0,0 +1,2 @@\\n+\\n+.. automodule:: compas_fab\\n\\\\ No newline at end of file\\n\",\"diff --git a/docs/api/compas_fab.sensors.rst b/docs/api/compas_fab.sensors.rst\\nnew file mode 100644\\nindex 0000000..7b4c1ec\\n--- /dev/null\\n+++ b/docs/api/compas_fab.sensors.rst\\n@@ -0,0 +1,2 @@\\n+\\n+.. automodule:: compas_fab.sensors\\n\\\\ No newline at end of file\\n\",\"diff --git a/docs/api/compas_fab.utilities.rst b/docs/api/compas_fab.utilities.rst\\nnew file mode 100644\\nindex 0000000..f5dbfa0\\n--- /dev/null\\n+++ b/docs/api/compas_fab.utilities.rst\\n@@ -0,0 +1,2 @@\\n+\\n+.. automodule:: compas_fab.utilities\\n\\\\ No newline at end of file\\n\",\"diff --git a/docs/examples/04_backends_vrep/01_simulation_with_vrep.rst b/docs/examples/04_backends_vrep/01_simulation_with_vrep.rst\\nindex 92255ee..794b1a9 100644\\n--- a/docs/examples/04_backends_vrep/01_simulation_with_vrep.rst\\n+++ b/docs/examples/04_backends_vrep/01_simulation_with_vrep.rst\\n@@ -71,8 +71,8 @@ forward kinematics:\\n         group_a = robot_a.model.attr['index']\\n         group_b = robot_b.model.attr['index']\\n \\n-        frame_a = client.forward_kinematics(robot, None, group=group_a)\\n-        frame_b = client.forward_kinematics(robot, None, group=group_b)\\n+        frame_a = client.forward_kinematics(robot_a, None, group=group_a)\\n+        frame_b = client.forward_kinematics(robot_b, None, group=group_b)\\n         print('End effector poses: ', str(frame_a), str(frame_b))\\n \\n Inverse Kinematics\\n\",\"diff --git a/docs/examples/04_backends_vrep/files/01_complete_path_planning_example.py b/docs/examples/04_backends_vrep/files/01_complete_path_planning_example.py\\nindex 28fdfe1..b837e56 100644\\n--- a/docs/examples/04_backends_vrep/files/01_complete_path_planning_example.py\\n+++ b/docs/examples/04_backends_vrep/files/01_complete_path_planning_example.py\\n@@ -4,7 +4,6 @@ from compas.datastructures import Mesh\\n from compas.geometry import Frame\\n \\n import compas_fab\\n-from compas_fab.robots import *\\n from compas_fab.robots import rfl\\n from compas_fab.backends import VrepClient\\n \\n\",\"diff --git a/src/compas_fab/backends/__init__.py b/src/compas_fab/backends/__init__.py\\nindex de24a9f..7f49ce9 100644\\n--- a/src/compas_fab/backends/__init__.py\\n+++ b/src/compas_fab/backends/__init__.py\\n@@ -37,6 +37,7 @@ PyBullet\\n \\n     PyBulletClient\\n     PyBulletPlanner\\n+    PyBulletError\\n \\n Long-running tasks\\n ------------------\\n@@ -73,19 +74,68 @@ the :ref:`architecture` documentation.\\n \\n import compas\\n \\n-from .exceptions import *               # noqa: F401,F403\\n-from .tasks import *                    # noqa: F401,F403\\n-from .ros.client import *               # noqa: F401,F403\\n-from .ros.exceptions import *           # noqa: F401,F403\\n-from .ros.fileserver_loader import *    # noqa: F401,F403\\n-from .ros.planner import *              # noqa: F401,F403\\n-from .vrep.client import *              # noqa: F401,F403\\n-from .vrep.helpers import *             # noqa: F401,F403\\n-from .vrep.planner import *             # noqa: F401,F403\\n+from .exceptions import (\\n+    BackendError,\\n+)\\n+from .tasks import (\\n+    FutureResult,\\n+    CancellableFutureResult,\\n+)\\n+from .ros.client import (\\n+    RosClient,\\n+)\\n+from .ros.exceptions import (\\n+    RosError,\\n+    RosValidationError,\\n+)\\n+from .ros.fileserver_loader import (\\n+    RosFileServerLoader,\\n+)\\n+from .ros.planner import (\\n+    MoveItPlanner,\\n+)\\n+from .vrep.client import (\\n+    VrepClient,\\n+)\\n+from .vrep.helpers import (\\n+    VrepError,\\n+)\\n+from .vrep.planner import (\\n+    VrepPlanner,\\n+)\\n \\n if not compas.IPY:\\n-    from .pybullet.client import *            # noqa: F401,F403\\n-    from .pybullet.exceptions import *        # noqa: F401,F403\\n-    from .pybullet.planner import *           # noqa: F401,F403\\n+    from .pybullet.client import (\\n+        PyBulletClient,\\n+    )\\n+    from .pybullet.exceptions import (\\n+        CollisionError,\\n+        InverseKinematicsError,\\n+        PyBulletError,\\n+    )\\n+    from .pybullet.planner import (\\n+        PyBulletPlanner,\\n+    )\\n+\\n+__all__ = [\\n+      'BackendError',\\n+      'CancellableFutureResult',\\n+      'FutureResult',\\n+      'MoveItPlanner',\\n+      'RosClient',\\n+      'RosError',\\n+      'RosFileServerLoader',\\n+      'RosValidationError',\\n+      'VrepClient',\\n+      'VrepError',\\n+      'VrepPlanner',\\n+    ]\\n \\n-__all__ = [name for name in dir() if not name.startswith('_')]\\n+if not compas.IPY:\\n+    __all__ += [\\n+        'CollisionError',\\n+        'InverseKinematicsError',\\n+        'PyBulletClient',\\n+        'PyBulletError',\\n+        'PyBulletPlanner',\\n+    ]\\n\",\"diff --git a/src/compas_fab/backends/pybullet/planner.py b/src/compas_fab/backends/pybullet/planner.py\\nindex f6d911b..d238a76 100644\\n--- a/src/compas_fab/backends/pybullet/planner.py\\n+++ b/src/compas_fab/backends/pybullet/planner.py\\n@@ -12,6 +12,10 @@ from compas_fab.backends.pybullet.backend_features.pybullet_append_collision_mes\\n from compas_fab.backends.pybullet.backend_features.pybullet_remove_attached_collision_mesh import PyBulletRemoveAttachedCollisionMesh\\n from compas_fab.backends.pybullet.backend_features.pybullet_remove_collision_mesh import PyBulletRemoveCollisionMesh\\n \\n+__all__ = [\\n+    'PyBulletPlanner',\\n+]\\n+\\n \\n class PyBulletPlanner(PlannerInterface):\\n     \\\"\\\"\\\"Implement the planner backend interface for PyBullet.\\\"\\\"\\\"\\n\",\"diff --git a/src/compas_fab/backends/ros/planner.py b/src/compas_fab/backends/ros/planner.py\\nindex 29bd3fb..c49e043 100644\\n--- a/src/compas_fab/backends/ros/planner.py\\n+++ b/src/compas_fab/backends/ros/planner.py\\n@@ -20,6 +20,11 @@ from compas_fab.backends.ros.backend_features.move_it_remove_attached_collision_\\n from compas_fab.backends.ros.backend_features.move_it_remove_collision_mesh import MoveItRemoveCollisionMesh\\n \\n \\n+__all__ = [\\n+    'MoveItPlanner',\\n+]\\n+\\n+\\n class MoveItPlanner(PlannerInterface):\\n     \\\"\\\"\\\"Implement the planner backend interface based on MoveIt!\\n     \\\"\\\"\\\"\\n\",\"diff --git a/src/compas_fab/backends/vrep/planner.py b/src/compas_fab/backends/vrep/planner.py\\nindex fff3339..5d9c0b4 100644\\n--- a/src/compas_fab/backends/vrep/planner.py\\n+++ b/src/compas_fab/backends/vrep/planner.py\\n@@ -12,6 +12,11 @@ from compas_fab.backends.vrep.backend_features.vrep_plan_motion import VrepPlanM\\n from compas_fab.backends.vrep.backend_features.vrep_remove_collision_mesh import VrepRemoveCollisionMesh\\n \\n \\n+__all__ = [\\n+    'VrepPlanner',\\n+]\\n+\\n+\\n class VrepPlanner(PlannerInterface):\\n     \\\"\\\"\\\"Implement the planner backend interface for V-REP\\n     \\\"\\\"\\\"\\n\",\"diff --git a/src/compas_fab/robots/__init__.py b/src/compas_fab/robots/__init__.py\\nindex 852eb40..158f695 100644\\n--- a/src/compas_fab/robots/__init__.py\\n+++ b/src/compas_fab/robots/__init__.py\\n@@ -31,6 +31,7 @@ Path planning\\n     JointTrajectory\\n     JointTrajectoryPoint\\n     PathPlan\\n+    Trajectory\\n \\n Planning scene\\n --------------\\n@@ -71,17 +72,72 @@ The following functions help with converting units from one system to the other.\\n \\n \\\"\\\"\\\"\\n \\n-from .configuration import *          # noqa: F401,F403\\n-from .constraints import *            # noqa: F401,F403\\n-from .path_plan import *              # noqa: F401,F403\\n-from .planning_scene import *         # noqa: F401,F403\\n-from .units import *                  # noqa: F401,F403\\n-from .robot import *                  # noqa: F401,F403\\n-from .semantics import *              # noqa: F401,F403\\n-from .time_ import *                  # noqa: F401,F403\\n-from .tool import *                   # noqa: F401,F403\\n-from .trajectory import *             # noqa: F401,F403\\n-from .wrench import *                 # noqa: F401,F403\\n-from .inertia import *                # noqa: F401,F403\\n-\\n-__all__ = [name for name in dir() if not name.startswith('_')]\\n+from .configuration import (\\n+    Configuration\\n+)\\n+from .constraints import (\\n+    BoundingVolume,\\n+    Constraint,\\n+    JointConstraint,\\n+    OrientationConstraint,\\n+    PositionConstraint,\\n+)\\n+from .path_plan import (\\n+    PathPlan\\n+)\\n+from .planning_scene import (\\n+    AttachedCollisionMesh,\\n+    CollisionMesh,\\n+    PlanningScene,\\n+)\\n+from .units import (\\n+    to_degrees,\\n+    to_radians,\\n+)\\n+from .robot import (\\n+    Robot,\\n+)\\n+from .semantics import (\\n+    RobotSemantics,\\n+)\\n+from .time_ import (\\n+    Duration,\\n+)\\n+from .tool import (\\n+    Tool,\\n+)\\n+from .trajectory import (\\n+    JointTrajectory,\\n+    JointTrajectoryPoint,\\n+    Trajectory,\\n+)\\n+from .wrench import (\\n+    Wrench,\\n+)\\n+from .inertia import (\\n+    Inertia,\\n+)\\n+\\n+__all__ = [\\n+    'AttachedCollisionMesh',\\n+    'BoundingVolume',\\n+    'CollisionMesh',\\n+    'Configuration',\\n+    'Constraint',\\n+    'Duration',\\n+    'Inertia',\\n+    'JointConstraint',\\n+    'JointTrajectory',\\n+    'JointTrajectoryPoint',\\n+    'OrientationConstraint',\\n+    'PathPlan',\\n+    'PlanningScene',\\n+    'PositionConstraint',\\n+    'Robot',\\n+    'RobotSemantics',\\n+    'Tool',\\n+    'Trajectory',\\n+    'Wrench',\\n+    'to_degrees',\\n+    'to_radians',\\n+]\\n\",\"diff --git a/src/compas_fab/robots/inertia.py b/src/compas_fab/robots/inertia.py\\nindex 460b7e0..136634c 100644\\n--- a/src/compas_fab/robots/inertia.py\\n+++ b/src/compas_fab/robots/inertia.py\\n@@ -1,5 +1,9 @@\\n from compas.geometry import Point\\n \\n+__all__ = [\\n+    'Inertia',\\n+]\\n+\\n \\n class Inertia():\\n     \\\"\\\"\\\"The moments of inertia represent the spatial distribution of mass in a rigid body.\\n\",\"diff --git a/src/compas_fab/robots/planning_scene.py b/src/compas_fab/robots/planning_scene.py\\nindex d63dd32..1eeb40b 100644\\n--- a/src/compas_fab/robots/planning_scene.py\\n+++ b/src/compas_fab/robots/planning_scene.py\\n@@ -7,8 +7,8 @@ from compas.geometry import Frame\\n from compas.geometry import Scale\\n \\n __all__ = [\\n-    'CollisionMesh',\\n     'AttachedCollisionMesh',\\n+    'CollisionMesh',\\n     'PlanningScene',\\n ]\\n \\n\",\"diff --git a/src/compas_fab/robots/tool.py b/src/compas_fab/robots/tool.py\\nindex f04d7f5..a990c9a 100644\\n--- a/src/compas_fab/robots/tool.py\\n+++ b/src/compas_fab/robots/tool.py\\n@@ -4,12 +4,18 @@ from __future__ import print_function\\n \\n import json\\n \\n-from compas.robots import ToolModel, Geometry\\n+from compas.robots import Geometry\\n+from compas.robots import ToolModel\\n \\n from compas_fab.robots.planning_scene import AttachedCollisionMesh\\n from compas_fab.robots.planning_scene import CollisionMesh\\n \\n \\n+__all__ = [\\n+    'Tool'\\n+]\\n+\\n+\\n class Tool(object):\\n     \\\"\\\"\\\"Represents a tool to be attached to the robot's flange.\\n \\n\",\"diff --git a/src/compas_fab/robots/trajectory.py b/src/compas_fab/robots/trajectory.py\\nindex 348e5ae..1bd12fa 100644\\n--- a/src/compas_fab/robots/trajectory.py\\n+++ b/src/compas_fab/robots/trajectory.py\\n@@ -9,8 +9,8 @@ from compas_fab.robots import AttachedCollisionMesh\\n from compas_fab.robots.time_ import Duration\\n \\n __all__ = [\\n-    'JointTrajectoryPoint',\\n     'JointTrajectory',\\n+    'JointTrajectoryPoint',\\n     'Trajectory',\\n ]\\n \\n\",\"diff --git a/src/compas_fab/sensors/__init__.py b/src/compas_fab/sensors/__init__.py\\nindex ef94d0d..94a0f04 100644\\n--- a/src/compas_fab/sensors/__init__.py\\n+++ b/src/compas_fab/sensors/__init__.py\\n@@ -32,7 +32,16 @@ Baumer sensors\\n \\n \\\"\\\"\\\"\\n \\n-from .base import *         # noqa: F401,F403\\n-from .baumer import *       # noqa: F401,F403\\n-\\n-__all__ = [name for name in dir() if not name.startswith('_')]\\n+from .base import (\\n+    SerialSensor,\\n+)\\n+from .baumer import (\\n+    PosCon3D,\\n+    PosConCM,\\n+)\\n+\\n+__all__ = [\\n+    \\\"PosCon3D\\\",\\n+    \\\"PosConCM\\\",\\n+    \\\"SerialSensor\\\",\\n+]\\n\",\"diff --git a/src/compas_fab/utilities/__init__.py b/src/compas_fab/utilities/__init__.py\\nindex 3d2c48f..80be9af 100644\\n--- a/src/compas_fab/utilities/__init__.py\\n+++ b/src/compas_fab/utilities/__init__.py\\n@@ -14,10 +14,12 @@ File system functions\\n     :toctree: generated/\\n     :nosignatures:\\n \\n+    list_files_in_directory\\n     read_csv_to_dictionary\\n-    write_data_to_json\\n     read_data_from_json\\n-    list_files_in_directory\\n+    read_data_from_pickle\\n+    write_data_to_json\\n+    write_data_to_pickle\\n \\n Numerical functions\\n ===================\\n@@ -26,9 +28,12 @@ Numerical functions\\n     :toctree: generated/\\n     :nosignatures:\\n \\n-    map_range\\n-    arange\\n     allclose\\n+    arange\\n+    clamp\\n+    diffs\\n+    map_range\\n+    range_geometric_row\\n \\n Other functions\\n ===============\\n@@ -37,16 +42,58 @@ Other functions\\n     :toctree: generated/\\n     :nosignatures:\\n \\n-    sign\\n+    argmax\\n+    argmin\\n     argsort\\n     LazyLoader\\n+    sign\\n \\n \\\"\\\"\\\"\\n \\n-from .file_io import *        # noqa: F401,F403\\n-from .filesystem import *     # noqa: F401,F403\\n-from .lazy_loader import *    # noqa: F401,F403\\n-from .numbers import *        # noqa: F401,F403\\n-from .utilities import *      # noqa: F401,F403\\n+from .file_io import (\\n+    read_csv_to_dictionary,\\n+    read_data_from_json,\\n+    read_data_from_pickle,\\n+    write_data_to_json,\\n+    write_data_to_pickle,\\n+)\\n+from .filesystem import (\\n+    list_files_in_directory,\\n+)\\n+from .lazy_loader import (\\n+    LazyLoader,\\n+)\\n+from .numbers import (\\n+    allclose,\\n+    arange,\\n+    argmax,\\n+    argmin,\\n+    clamp,\\n+    diffs,\\n+    map_range,\\n+    range_geometric_row,\\n+)\\n+from .utilities import (\\n+    argsort,\\n+    sign,\\n+)\\n \\n-__all__ = [name for name in dir() if not name.startswith('_')]\\n+__all__ = [\\n+    'LazyLoader',\\n+    'allclose',\\n+    'arange',\\n+    'argmax',\\n+    'argmin',\\n+    'argsort',\\n+    'clamp',\\n+    'diffs',\\n+    'list_files_in_directory',\\n+    'map_range',\\n+    'range_geometric_row',\\n+    'read_csv_to_dictionary',\\n+    'read_data_from_json',\\n+    'read_data_from_pickle',\\n+    'sign',\\n+    'write_data_to_json',\\n+    'write_data_to_pickle',\\n+]\\n\",\"diff --git a/src/compas_fab/utilities/numbers.py b/src/compas_fab/utilities/numbers.py\\nindex 4ca4784..11c9186 100644\\n--- a/src/compas_fab/utilities/numbers.py\\n+++ b/src/compas_fab/utilities/numbers.py\\n@@ -117,7 +117,7 @@ def argmax(numbers):\\n \\n \\n def clamp(value, min_value, max_value):\\n-    \\\"\\\"\\\"Clamps a value witin the bound [min_value, max_value]\\n+    \\\"\\\"\\\"Clamps a value within the bound [min_value, max_value]\\n \\n     Returns\\n     -------\\n\"]", "test_patch": "[\"diff --git a/src/compas_fab/robots/rfl.py b/src/compas_fab/robots/rfl.py\\nindex 81f62635e..b6fdc4225 100644\\n--- a/src/compas_fab/robots/rfl.py\\n+++ b/src/compas_fab/robots/rfl.py\\n@@ -1,7 +1,7 @@\\n \\\"\\\"\\\"This module is mostly for explanatory purposes, to have a usable setup\\n to test and show features onto.\\n \\n-It needs to be explicitely imported, since it is not a fundamental part\\n+It needs to be explicitly imported, since it is not a fundamental part\\n of the compas_fab.robots package at all.\\n \\\"\\\"\\\"\\n from __future__ import absolute_import\\n\",\"diff --git a/tests/api/compas_fab_api.json b/tests/api/compas_fab_api.json\\nnew file mode 100644\\nindex 000000000..7d8e06b41\\n--- /dev/null\\n+++ b/tests/api/compas_fab_api.json\\n@@ -0,0 +1,76 @@\\n+{\\n+  \\\"metadata\\\": {\\n+    \\\"compas_fab_version\\\": \\\"0.19.1\\\",\\n+    \\\"generated_on\\\": \\\"20210728\\\"\\n+  },\\n+  \\\"modules\\\": {\\n+    \\\"compas_fab\\\": [\\n+      \\\"get\\\"\\n+    ],\\n+    \\\"compas_fab.backends\\\": [\\n+      \\\"BackendError\\\",\\n+      \\\"CancellableFutureResult\\\",\\n+      \\\"CollisionError\\\",\\n+      \\\"FutureResult\\\",\\n+      \\\"InverseKinematicsError\\\",\\n+      \\\"MoveItPlanner\\\",\\n+      \\\"PyBulletClient\\\",\\n+      \\\"PyBulletError\\\",\\n+      \\\"PyBulletPlanner\\\",\\n+      \\\"RosClient\\\",\\n+      \\\"RosError\\\",\\n+      \\\"RosFileServerLoader\\\",\\n+      \\\"RosValidationError\\\",\\n+      \\\"VrepClient\\\",\\n+      \\\"VrepError\\\",\\n+      \\\"VrepPlanner\\\"\\n+    ],\\n+    \\\"compas_fab.robots\\\": [\\n+      \\\"AttachedCollisionMesh\\\",\\n+      \\\"BoundingVolume\\\",\\n+      \\\"CollisionMesh\\\",\\n+      \\\"Configuration\\\",\\n+      \\\"Constraint\\\",\\n+      \\\"Duration\\\",\\n+      \\\"Inertia\\\",\\n+      \\\"JointConstraint\\\",\\n+      \\\"JointTrajectory\\\",\\n+      \\\"JointTrajectoryPoint\\\",\\n+      \\\"OrientationConstraint\\\",\\n+      \\\"PathPlan\\\",\\n+      \\\"PlanningScene\\\",\\n+      \\\"PositionConstraint\\\",\\n+      \\\"Robot\\\",\\n+      \\\"RobotSemantics\\\",\\n+      \\\"Tool\\\",\\n+      \\\"Trajectory\\\",\\n+      \\\"Wrench\\\",\\n+      \\\"to_degrees\\\",\\n+      \\\"to_radians\\\"\\n+    ],\\n+    \\\"compas_fab.sensors\\\": [\\n+      \\\"PosCon3D\\\",\\n+      \\\"PosConCM\\\",\\n+      \\\"SerialSensor\\\"\\n+    ],\\n+    \\\"compas_fab.utilities\\\": [\\n+      \\\"LazyLoader\\\",\\n+      \\\"allclose\\\",\\n+      \\\"arange\\\",\\n+      \\\"argmax\\\",\\n+      \\\"argmin\\\",\\n+      \\\"argsort\\\",\\n+      \\\"clamp\\\",\\n+      \\\"diffs\\\",\\n+      \\\"list_files_in_directory\\\",\\n+      \\\"map_range\\\",\\n+      \\\"range_geometric_row\\\",\\n+      \\\"read_csv_to_dictionary\\\",\\n+      \\\"read_data_from_json\\\",\\n+      \\\"read_data_from_pickle\\\",\\n+      \\\"sign\\\",\\n+      \\\"write_data_to_json\\\",\\n+      \\\"write_data_to_pickle\\\"\\n+    ]\\n+  }\\n+}\\n\\\\ No newline at end of file\\n\",\"diff --git a/tests/api/compas_fab_api_ipy.json b/tests/api/compas_fab_api_ipy.json\\nnew file mode 100644\\nindex 000000000..b9a1bafcb\\n--- /dev/null\\n+++ b/tests/api/compas_fab_api_ipy.json\\n@@ -0,0 +1,71 @@\\n+{\\n+  \\\"metadata\\\": {\\n+    \\\"compas_fab_version\\\": \\\"0.19.1\\\", \\n+    \\\"generated_on\\\": \\\"20210728\\\"\\n+  }, \\n+  \\\"modules\\\": {\\n+    \\\"compas_fab\\\": [\\n+      \\\"get\\\"\\n+    ], \\n+    \\\"compas_fab.backends\\\": [\\n+      \\\"BackendError\\\", \\n+      \\\"CancellableFutureResult\\\", \\n+      \\\"FutureResult\\\", \\n+      \\\"MoveItPlanner\\\", \\n+      \\\"RosClient\\\", \\n+      \\\"RosError\\\", \\n+      \\\"RosFileServerLoader\\\", \\n+      \\\"RosValidationError\\\", \\n+      \\\"VrepClient\\\", \\n+      \\\"VrepError\\\", \\n+      \\\"VrepPlanner\\\"\\n+    ], \\n+    \\\"compas_fab.robots\\\": [\\n+      \\\"AttachedCollisionMesh\\\", \\n+      \\\"BoundingVolume\\\", \\n+      \\\"CollisionMesh\\\", \\n+      \\\"Configuration\\\", \\n+      \\\"Constraint\\\", \\n+      \\\"Duration\\\", \\n+      \\\"Inertia\\\", \\n+      \\\"JointConstraint\\\", \\n+      \\\"JointTrajectory\\\", \\n+      \\\"JointTrajectoryPoint\\\", \\n+      \\\"OrientationConstraint\\\", \\n+      \\\"PathPlan\\\", \\n+      \\\"PlanningScene\\\", \\n+      \\\"PositionConstraint\\\", \\n+      \\\"Robot\\\", \\n+      \\\"RobotSemantics\\\", \\n+      \\\"Tool\\\", \\n+      \\\"Trajectory\\\", \\n+      \\\"Wrench\\\", \\n+      \\\"to_degrees\\\", \\n+      \\\"to_radians\\\"\\n+    ], \\n+    \\\"compas_fab.sensors\\\": [\\n+      \\\"PosCon3D\\\", \\n+      \\\"PosConCM\\\", \\n+      \\\"SerialSensor\\\"\\n+    ], \\n+    \\\"compas_fab.utilities\\\": [\\n+      \\\"LazyLoader\\\", \\n+      \\\"allclose\\\", \\n+      \\\"arange\\\", \\n+      \\\"argmax\\\", \\n+      \\\"argmin\\\", \\n+      \\\"argsort\\\", \\n+      \\\"clamp\\\", \\n+      \\\"diffs\\\", \\n+      \\\"list_files_in_directory\\\", \\n+      \\\"map_range\\\", \\n+      \\\"range_geometric_row\\\", \\n+      \\\"read_csv_to_dictionary\\\", \\n+      \\\"read_data_from_json\\\", \\n+      \\\"read_data_from_pickle\\\", \\n+      \\\"sign\\\", \\n+      \\\"write_data_to_json\\\", \\n+      \\\"write_data_to_pickle\\\"\\n+    ]\\n+  }\\n+}\\n\\\\ No newline at end of file\\n\",\"diff --git a/tests/api/test_api_completeness.py b/tests/api/test_api_completeness.py\\nnew file mode 100644\\nindex 000000000..5a76abdc6\\n--- /dev/null\\n+++ b/tests/api/test_api_completeness.py\\n@@ -0,0 +1,91 @@\\n+from __future__ import absolute_import\\n+\\n+import os\\n+import pytest\\n+import shutil\\n+import subprocess\\n+import importlib\\n+import inspect\\n+import compas\\n+\\n+\\n+def get_names_in_module(module_name):\\n+    exceptions = ['absolute_import', 'division', 'print_function']\\n+    module = importlib.import_module(module_name)\\n+    all_names = module.__all__ if hasattr(module, '__all__') else dir(module)\\n+    return sorted([i for i in all_names if not i.startswith('_') and i not in exceptions and not inspect.ismodule(getattr(module, i))])\\n+\\n+\\n+@pytest.fixture\\n+def compas_fab_api():\\n+    if compas.IPY:\\n+        return\\n+\\n+    modules = [\\n+        'compas_fab.backends',\\n+        'compas_fab.robots',\\n+        'compas_fab.sensors',\\n+        'compas_fab.utilities',\\n+    ]\\n+    api = {}\\n+    for module_name in modules:\\n+        api[module_name] = get_names_in_module(module_name)\\n+    return api\\n+\\n+\\n+@pytest.fixture\\n+def compas_fab_stubs():\\n+    if compas.IPY:\\n+        return\\n+\\n+    env = compas._os.prepare_environment()\\n+\\n+    HERE = os.path.dirname(__file__)\\n+    HOME = os.path.abspath(os.path.join(HERE, '../..'))\\n+    TEMP = os.path.abspath(os.path.join(HOME, 'temp/stubs'))\\n+    DOCS = os.path.abspath(os.path.join(HOME, 'docs'))\\n+    API = os.path.abspath(os.path.join(DOCS, 'api'))\\n+\\n+    shutil.rmtree(TEMP, ignore_errors=True)\\n+\\n+    _, _, filenames = next(os.walk(API))\\n+    for name in filenames:\\n+        if name == 'compas_fab.rst' or not name.startswith('compas_fab.'):\\n+            continue\\n+        stub = os.path.abspath(os.path.join(API, name))\\n+        subprocess.call('sphinx-autogen -o {} {}'.format(TEMP, stub), shell=True, env=env)\\n+\\n+    _, _, filenames = next(os.walk(TEMP))\\n+\\n+    # shutil.rmtree(TEMP, ignore_errors=True)\\n+\\n+    stubs = {}\\n+    for name in filenames:\\n+        parts = name.split('.')\\n+        if len(parts) != 4:\\n+            continue\\n+        package = parts[0]\\n+        module = parts[1]\\n+        item = parts[2]\\n+        if package == 'compas_fab':\\n+            packmod = \\\"{}.{}\\\".format(package, module)\\n+            if packmod not in stubs:\\n+                stubs[packmod] = []\\n+            stubs[packmod].append(item)\\n+\\n+    return stubs\\n+\\n+\\n+def test_compas_api_stubs(compas_fab_api, compas_fab_stubs):\\n+    if compas.IPY:\\n+        return\\n+\\n+    for packmod in compas_fab_api:\\n+        parts = packmod.split('.')\\n+        if len(parts) != 2:\\n+            continue\\n+        assert packmod in compas_fab_stubs\\n+        for name in compas_fab_api[packmod]:\\n+            if name in ['Configuration', 'PosCon3D', 'PosConCM']:\\n+                continue\\n+            assert name in compas_fab_stubs[packmod]\\n\",\"diff --git a/tests/api/test_api_stability.py b/tests/api/test_api_stability.py\\nnew file mode 100644\\nindex 000000000..0f274b5fd\\n--- /dev/null\\n+++ b/tests/api/test_api_stability.py\\n@@ -0,0 +1,96 @@\\n+import importlib\\n+import inspect\\n+import json\\n+import os\\n+from datetime import datetime\\n+\\n+import pytest\\n+\\n+import compas\\n+import compas_fab\\n+\\n+\\n+def test_no_removed_names_from_any_package(compas_fab_api):\\n+    generated_ver = parse_version(compas_fab_api['metadata']['compas_fab_version'])\\n+    current_ver = parse_version(compas_fab.__version__)\\n+\\n+    # Raise to indicate the API file needs to be regenerated\\n+    if current_ver['major'] != generated_ver['major']:\\n+        raise Exception('The compas_fab_api.json file needs to be regenerated for the current COMPAS_FAB major version')\\n+\\n+    mismatches = dict()\\n+    for module_name in compas_fab_api['modules']:\\n+        names_in_reference_version = compas_fab_api['modules'][module_name]\\n+        names_in_current_version = set(get_names_in_module(module_name))\\n+\\n+        for name in names_in_reference_version:\\n+            if name not in names_in_current_version:\\n+                if module_name not in mismatches:\\n+                    mismatches[module_name] = []\\n+                mismatches[module_name].append(name)\\n+\\n+    assert len(mismatches) == 0, 'The following names are missing from the API: ' + str(mismatches)\\n+\\n+\\n+@pytest.fixture\\n+def compas_fab_api():\\n+    with open(compas_fab_api_filename(), 'r') as f:\\n+        return json.load(f)\\n+\\n+\\n+def compas_fab_api_filename():\\n+    if compas.IPY:\\n+        filename = 'compas_fab_api_ipy.json'\\n+    else:\\n+        filename = 'compas_fab_api.json'\\n+    return os.path.join(os.path.dirname(__file__), filename)\\n+\\n+\\n+# could be imported form compas\\n+def parse_version(ver):\\n+    ver_major, ver_minor, ver_patch = ver.split('.')[0:3]\\n+    return dict(major=ver_major, minor=ver_minor, patch=ver_patch)\\n+\\n+\\n+# could be imported form compas\\n+def get_names_in_module(module_name):\\n+    exceptions = ['absolute_import', 'division', 'print_function']\\n+    module = importlib.import_module(module_name)\\n+    all_names = module.__all__ if hasattr(module, '__all__') else dir(module)\\n+    return sorted([i for i in all_names if not i.startswith('_') and i not in exceptions and not inspect.ismodule(getattr(module, i))])\\n+\\n+\\n+if __name__ == '__main__':\\n+    # Generate stable API dictionary file\\n+    # This file should be regenerated every time there's a major release\\n+    # Minor releases will check that nothing is missing from the second-level imports and the top compas package\\n+\\n+    modules = [\\n+        'compas_fab',\\n+        'compas_fab.backends',\\n+        'compas_fab.robots',\\n+        'compas_fab.sensors',\\n+        'compas_fab.utilities',\\n+    ]\\n+\\n+    compas_fab_version = compas_fab.__version__\\n+    # strip git hash from version\\n+    if not compas.IPY:\\n+        compas_fab_version = compas_fab_version[:-9]\\n+\\n+    compas_fab_api = dict(  # noqa: F811\\n+        metadata=dict(\\n+            generated_on=datetime.now().strftime(\\\"%Y%m%d\\\"),\\n+            compas_fab_version=compas_fab_version,\\n+        ),\\n+        modules=dict()\\n+    )\\n+\\n+    for module_name in modules:\\n+        compas_fab_api['modules'][module_name] = get_names_in_module(module_name)\\n+\\n+    fname = compas_fab_api_filename()\\n+    with open(fname, 'w') as f:\\n+        json.dump(compas_fab_api, f, indent=2, sort_keys=True)\\n+\\n+    print('Generated API file: ' + fname)\\n\",\"diff --git a/tests/api/test_api_completeness.py b/tests/api/test_api_completeness.py\\nindex 5a76abdc6..5e8e41770 100644\\n--- a/tests/api/test_api_completeness.py\\n+++ b/tests/api/test_api_completeness.py\\n@@ -57,7 +57,7 @@ def compas_fab_stubs():\\n \\n     _, _, filenames = next(os.walk(TEMP))\\n \\n-    # shutil.rmtree(TEMP, ignore_errors=True)\\n+    shutil.rmtree(TEMP, ignore_errors=True)\\n \\n     stubs = {}\\n     for name in filenames:\"]", "hints_text": ""}
