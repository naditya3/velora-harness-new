{"instance_id": "802429942220550", "repo": "cdgriffith/box", "base_commit": "9a4b108fed5a18846c8484207467058e5135b4f1", "problem_statement": "merge_update() not merging nested dictionaries or lists:\\nDoes this make sense? I need it for myself, but maybe it's not box' responsibility.\\r\\n```\\r\\n(venv) > ipython\\r\\nPython 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)]\\r\\nType 'copyright', 'credits' or 'license' for more information\\r\\nIn [1]: import box\\r\\n\\r\\nIn [2]: box.__version__\\r\\nOut[2]: '7.0.1'\\r\\n\\r\\nIn [3]: d1 = {'app': {'S3': {'S3Service': [{'bucket': 'bucket001'}]}}}\\r\\n\\r\\nIn [4]: d2 = {'app': {'S3': {'S3Service': [{'expirationDate': '2099-10-25'}]}}}\\r\\n\\r\\nIn [5]: box1 = box.Box(d1)\\r\\n\\r\\nIn [6]: box1.merge_update(d2, box_merge_lists='extend')\\r\\n\\r\\nIn [7]: box1\\r\\nOut[7]: Box({'app': {'S3': {'S3Service': [{'expirationDate': '2099-10-25'}]}}})\\r\\n\\r\\n```\\r\\n\\r\\nI was expecting:\\r\\n```\\r\\nIn [9]: box1\\r\\nOut[9]: Box({'app': {'S3': {'S3Service': [{'bucket': \"bucket001'\"}, {'expirationDate': '2099-10-25'}]}}})\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n\\r\\nCan anyone help me?\\nTwo test failures due to arguments having incorrect types:\\nI've just noticed that we weren't running the tests correctly in Gentoo, and we haven't been testing the C extension. After fixing that, I see two test failures:\\r\\n\\r\\n```pytb\\r\\nFAILED test/test_box.py::TestBox::test_box_kwargs_should_not_be_included - TypeError: Argument 'box_recast' has incorrect type (expected dict, got bool)\\r\\nFAILED test/test_box.py::TestBox::test_box_namespace - TypeError: Argument 'box_namespace' has incorrect type (expected tuple, got bool)\\r\\n```\\r\\n\\r\\nI can reproduce them with 7.0.1 release and git `develop` @ 1025c0ae23a3be2847029e1ebd29b42f7d32f73a.\\r\\n\\r\\nTo reproduce:\\r\\n\\r\\n```\\r\\npython3.10 -m venv .venv\\r\\n. .venv/bin/activate\\r\\npip install -r requirements-dev.txt -r requirements-test.txt\\r\\npip install -e .\\r\\npython -m pytest -vv\\r\\n```\\r\\n\\r\\nFull traceback:\\r\\n\\r\\n```pytb\\r\\n============================================================== FAILURES ===============================================================\\r\\n___________________________________________ TestBox.test_box_kwargs_should_not_be_included ____________________________________________\\r\\n\\r\\nself = <test.test_box.TestBox object at 0x7f1436459b70>\\r\\n\\r\\n    def test_box_kwargs_should_not_be_included(self):\\r\\n        params = {\\r\\n            \"default_box\": True,\\r\\n            \"default_box_attr\": True,\\r\\n            \"conversion_box\": True,\\r\\n            \"frozen_box\": True,\\r\\n            \"camel_killer_box\": True,\\r\\n            \"box_safe_prefix\": \"x\",\\r\\n            \"box_duplicates\": \"error\",\\r\\n            \"default_box_none_transform\": True,\\r\\n            \"box_dots\": True,\\r\\n            \"modify_tuples_box\": True,\\r\\n            \"box_intact_types\": (),\\r\\n            \"box_recast\": True,\\r\\n        }\\r\\n    \\r\\n>       bx = Box(**params)\\r\\nE       TypeError: Argument 'box_recast' has incorrect type (expected dict, got bool)\\r\\n\\r\\ntest/test_box.py:1341: TypeError\\r\\n_____________________________________________________ TestBox.test_box_namespace ______________________________________________________\\r\\n\\r\\nself = <test.test_box.TestBox object at 0x7f1436458fa0>\\r\\n\\r\\n    def test_box_namespace(self):\\r\\n        bx = Box(default_box=True)\\r\\n        assert bx._box_config[\"box_namespace\"] == ()\\r\\n        bx.a.b.c = 5\\r\\n        assert bx.a._box_config[\"box_namespace\"] == (\"a\",)\\r\\n        assert bx.a.b._box_config[\"box_namespace\"] == (\"a\", \"b\")\\r\\n        bx.x = {\"y\": {\"z\": 5}}\\r\\n        assert bx.x._box_config[\"box_namespace\"] == (\"x\",)\\r\\n        assert bx.x.y._box_config[\"box_namespace\"] == (\"x\", \"y\")\\r\\n        bx[None][1][2] = 3\\r\\n        assert bx[None][1]._box_config[\"box_namespace\"] == (None, 1)\\r\\n    \\r\\n        for modified_box in [\\r\\n            bx.a + bx.x,\\r\\n            bx.a - bx.x,\\r\\n            bx.a | bx.x,\\r\\n        ]:\\r\\n            assert modified_box._box_config[\"box_namespace\"] == ()\\r\\n            assert modified_box.b._box_config[\"box_namespace\"] == (\"b\",)\\r\\n            assert modified_box.y._box_config[\"box_namespace\"] == (\"y\",)\\r\\n    \\r\\n        bx.modified = {}\\r\\n        assert bx.modified._box_config[\"box_namespace\"] == (\"modified\",)\\r\\n        bx.modified += bx.a\\r\\n        assert bx.modified.b._box_config[\"box_namespace\"] == (\"modified\", \"b\")\\r\\n        bx.modified |= bx.x\\r\\n        assert bx.modified.y._box_config[\"box_namespace\"] == (\"modified\", \"y\")\\r\\n        bx.modified -= bx.a\\r\\n        assert bx.modified._box_config[\"box_namespace\"] == (\"modified\",)\\r\\n    \\r\\n>       bx2 = Box(box_namespace=False)\\r\\nE       TypeError: Argument 'box_namespace' has incorrect type (expected tuple, got bool)\\r\\n\\r\\ntest/test_box.py:1430: TypeError\\r\\n======================================================= short test summary info =======================================================\\r\\nFAILED test/test_box.py::TestBox::test_box_kwargs_should_not_be_included - TypeError: Argument 'box_recast' has incorrect type (expected dict, got bool)\\r\\nFAILED test/test_box.py::TestBox::test_box_namespace - TypeError: Argument 'box_namespace' has incorrect type (expected tuple, got bool)\\r\\n==================================================== 2 failed, 144 passed in 0.64s ====================================================\\r\\n```\\r\\n\\r\\nUnless I'm mistaken, it seems that the tests are passing incorrect argument types per the signatures.", "FAIL_TO_PASS": ["test/test_box_list.py::TestBoxList::test_no_recursion_errors", "test/test_box.py::TestBox::test_merge_list_options", "test/test_box_list.py::TestBoxList::test_no_circular_references"], "PASS_TO_PASS": ["test/test_box.py::TestBox::test_camel_killer_box", "test/test_box.py::TestBox::test_update_with_integer", "test/test_from_file.py::TestFromFile::test_from_all", "test/test_box.py::TestBox::test_msgpack_files", "test/test_box.py::TestBox::test_conversion_box", "test/test_box_list.py::TestBoxList::test_box_list_from_json", "test/test_box.py::TestBox::test_set_default_dict", "test/test_box.py::TestBox::test_msgpack_no_input", "test/test_box.py::TestBox::test_box_property_support", "test/test_box.py::TestBox::test_bad_inits", "test/test_box.py::TestBox::test_or_boxes", "test/test_box.py::TestBox::test_item_view", "test/test_box.py::TestBox::test_create_subdicts", "test/test_box.py::TestBox::test_key_error_popitem", "test/test_box.py::TestBox::test_error_box", "test/test_box.py::TestBox::test_box_modify_at_depth", "test/test_box.py::TestBox::test_box_set_attribs", "test/test_box.py::TestBox::test_box_inits", "test/test_box.py::TestBox::test_from_yaml_file", "test/test_converters.py::TestConverters::test_from_toml_file", "test/test_box.py::TestBox::test_dir", "test/test_box.py::TestBox::test_hashing", "test/test_box.py::TestBox::test_get", "test/test_box.py::TestBox::test_ior_boxes", "test/test_from_file.py::TestFromFile::test_bad_file", "test/test_box.py::TestBox::test_recursive_tuples", "test/test_box.py::TestBox::test_iadd_boxes", "test/test_box.py::TestBox::test_conversion_dup_only", "test/test_box.py::TestBox::test_sub_with_non_dict", "test/test_box.py::TestBox::test_merge_update", "test/test_box.py::TestBox::test_intact_types_dict", "test/test_box_list.py::TestBoxList::test_box_list_from_yaml", "test/test_box.py::TestBox::test_ror_boxes", "test/test_box.py::TestBox::test_camel_killer_hashables", "test/test_converters.py::TestConverters::test_to_toml_file", "test/test_box.py::TestBox::test_update", "test/test_box.py::TestBox::test_default_box_callable", "test/test_box.py::TestBox::test_underscore_removal", "test/test_box_list.py::TestBoxList::test_box_list", "test/test_box.py::TestBox::test_protected_box_methods", "test/test_box_list.py::TestBoxList::test_frozen_list", "test/test_box.py::TestBox::test_setdefault_dots_default", "test/test_box.py::TestBox::test_to_json_basic", "test/test_box.py::TestBox::test_default_box", "test/test_box.py::TestBox::test_set_default", "test/test_box_list.py::TestBoxList::test_box_list_from_tml", "test/test_box.py::TestBox::test_add_boxes", "test/test_box.py::TestBox::test_is_in", "test/test_box.py::TestBox::test_box_propagation", "test/test_box.py::TestBox::test_pickle_default_box", "test/test_box_list.py::TestBoxList::test_box_config_propagate", "test/test_converters.py::TestConverters::test_bad_from_toml", "test/test_box.py::TestBox::test_box_from_dict", "test/test_box.py::TestBox::test_pickle", "test/test_box.py::TestBox::test_union_frozen_box", "test/test_box.py::TestBox::test_box", "test/test_box.py::TestBox::test_box_dots", "test/test_box.py::TestBox::test_value_view", "test/test_box.py::TestBox::test_msgpack_strings_no_strick_keys", "test/test_box.py::TestBox::test_config", "test/test_box_list.py::TestBoxList::test_bad_csv", "test/test_box_list.py::TestBoxList::test_from_csv", "test/test_config_box.py::TestConfigBox::test_config_default", "test/test_box.py::TestBox::test_pop", "test/test_box.py::TestBox::test_from_json", "test/test_box.py::TestBox::test_clear", "test/test_box.py::TestBox::test_dots", "test/test_box_list.py::TestBoxList::test_box_list_to_toml", "test/test_box.py::TestBox::test_box_namespace", "test/test_box.py::TestBox::test_sub", "test/test_box.py::TestBox::test_items", "test/test_box_list.py::TestBoxList::test_box_list_to_json", "test/test_box.py::TestBox::test_box_from_bad_dict", "test/test_box_list.py::TestBoxList::test_box_list_to_yaml", "test/test_box.py::TestBox::test_type_recast", "test/test_box.py::TestBox::test_get_box_config", "test/test_box.py::TestBox::test_copy", "test/test_box.py::TestBox::test_unicode", "test/test_box.py::TestBox::test_delete_attributes", "test/test_box.py::TestBox::test_bad_args", "test/test_converters.py::TestConverters::test_from_toml", "test/test_converters.py::TestConverters::test_to_yaml", "test/test_box.py::TestBox::test_from_multiline", "test/test_box_list.py::TestBoxList::test_intact_types_list", "test/test_box.py::TestBox::test_default_box_none_transforms", "test/test_box.py::TestBox::test_through_queue", "test/test_converters.py::TestConverters::test_to_json", "test/test_box.py::TestBox::test_nontype_recast", "test/test_box.py::TestBox::test_no_key_error_pop", "test/test_box.py::TestBox::test_setdefault_simple", "test/test_box.py::TestBox::test_to_yaml_basic", "test/test_box.py::TestBox::test_pop_items", "test/test_box.py::TestBox::test_box_from_empty_yaml", "test/test_box.py::TestBox::test_default_dots", "test/test_box.py::TestBox::test_values", "test/test_box.py::TestBox::test_sub_with_frozen_box", "test/test_box.py::TestBox::test_frozen", "test/test_box.py::TestBox::test_box_modify_tuples", "test/test_box.py::TestBox::test_box_greek", "test/test_box.py::TestBox::test_default_and_camel_killer_box", "test/test_box.py::TestBox::test_bad_from_yaml", "test/test_box.py::TestBox::test_iter", "test/test_box.py::TestBox::test_basic_box", "test/test_box.py::TestBox::test_to_yaml_file", "test/test_box.py::TestBox::test_bad_recursive", "test/test_box.py::TestBox::test_functional_spaceballs", "test/test_converters.py::TestConverters::test_to_msgpack", "test/test_box.py::TestBox::test_revered", "test/test_box.py::TestBox::test_contains", "test/test_box.py::TestBox::test_duplicate_errors", "test/test_box.py::TestBox::test_default_box_restricted_calls", "test/test_box.py::TestBox::test_parameter_pass_through", "test/test_box.py::TestBox::test_custom_key_errors", "test/test_box.py::TestBox::test_set_default_box_dots", "test/test_box.py::TestBox::test_toml", "test/test_box.py::TestBox::test_box_default_not_create_on_get", "test/test_box.py::TestBox::test_safe_attrs", "test/test_box.py::TestBox::test_functional_data", "test/test_box.py::TestBox::test_to_multiline", "test/test_box.py::TestBox::test_from_yaml", "test/test_box.py::TestBox::test_box_slice", "test/test_config_box.py::TestConfigBox::test_config_box", "test/test_converters.py::TestConverters::test_to_toml", "test/test_box.py::TestBox::test_circular_references", "test/test_box.py::TestBox::test_bad_from_json", "test/test_box.py::TestBox::test_key_view", "test/test_box_list.py::TestBoxList::test_to_csv", "test/test_sbox.py::TestSBox::test_property_box", "test/test_box.py::TestBox::test_setdefault_dots", "test/test_box.py::TestBox::test_get_default_box", "test/test_box.py::TestBox::test_inheritance_copy", "test/test_box.py::TestBox::test_inheritance", "test/test_box.py::TestBox::test_camel_killer", "test/test_box.py::TestBox::test_from_json_file", "test/test_box.py::TestBox::test_msgpack_strings", "test/test_box.py::TestBox::test_auto_attr", "test/test_config_box.py::TestConfigBox::test_dir", "test/test_box.py::TestBox::test_radd_boxes", "test/test_box.py::TestBox::test_box_safe_references", "test/test_box.py::TestBox::test_box_kwargs_should_not_be_included", "test/test_from_file.py::TestFromFile::test_from_string_all", "test/test_box_list.py::TestBoxList::test_box_list_dots"], "language": "python", "test_command": "source /saved/ENV || source /saved/*/ENV && pytest --no-header -rA --tb=no -p no:cacheprovider --continue-on-collection-errors", "test_output_parser": "python/parse_log_pytest_v3", "image_storage_uri": "vmvm-registry.fbinfra.net/repomate_image_activ_pytest/cdgriffith_box:9a4b108fed5a18846c8484207467058e5135b4f1", "patch": "[\"diff --git a/AUTHORS.rst b/AUTHORS.rst\\nindex 1fb7e2d..b67a735 100644\\n--- a/AUTHORS.rst\\n+++ b/AUTHORS.rst\\n@@ -29,6 +29,8 @@ Code contributions:\\n - Ivan Pepelnjak (ipspace)\\n - Michał Górny (mgorny)\\n - Serge Lu (Serge45)\\n+- Eric Prestat (ericpre)\\n+\\n \\n \\n Suggestions and bug reporting:\\n@@ -87,3 +89,5 @@ Suggestions and bug reporting:\\n - Peter B (barmettl)\\n - Ash A. (dragonpaw)\\n - Коптев Роман Викторович (romikforest)\\n+- lei wang (191801737)\\n+- d00m514y3r\\n\",\"diff --git a/box/__init__.py b/box/__init__.py\\nindex b2225bb..64d0ca8 100644\\n--- a/box/__init__.py\\n+++ b/box/__init__.py\\n@@ -2,7 +2,7 @@\\n # -*- coding: utf-8 -*-\\n \\n __author__ = \\\"Chris Griffith\\\"\\n-__version__ = \\\"7.0.1\\\"\\n+__version__ = \\\"7.1.0\\\"\\n \\n from box.box import Box\\n from box.box_list import BoxList\\n\",\"diff --git a/box/box.py b/box/box.py\\nindex 322b313..158a55e 100644\\n--- a/box/box.py\\n+++ b/box/box.py\\n@@ -10,7 +10,7 @@\\n import warnings\\n from keyword import iskeyword\\n from os import PathLike\\n-from typing import Any, Dict, Generator, List, Optional, Tuple, Type, Union\\n+from typing import Any, Dict, Generator, List, Optional, Tuple, Type, Union, Literal\\n from inspect import signature\\n \\n try:\\n@@ -18,12 +18,6 @@\\n except ImportError:\\n     from collections.abc import Callable, Iterable, Mapping\\n \\n-try:\\n-    from IPython import get_ipython\\n-except ImportError:\\n-    ipython = False\\n-else:\\n-    ipython = True if get_ipython() else False\\n \\n import box\\n from box.converters import (\\n@@ -56,6 +50,17 @@\\n NO_NAMESPACE = object()\\n \\n \\n+def _is_ipython():\\n+    try:\\n+        from IPython import get_ipython\\n+    except ImportError:\\n+        ipython = False\\n+    else:\\n+        ipython = True if get_ipython() else False\\n+\\n+    return ipython\\n+\\n+\\n def _exception_cause(e):\\n     \\\"\\\"\\\"\\n     Unwrap BoxKeyError and BoxValueError errors to their cause.\\n@@ -201,7 +206,7 @@ def __new__(\\n         box_recast: Optional[Dict] = None,\\n         box_dots: bool = False,\\n         box_class: Optional[Union[Dict, Type[\\\"Box\\\"]]] = None,\\n-        box_namespace: Tuple[str, ...] = (),\\n+        box_namespace: Union[Tuple[str, ...], Literal[False]] = (),\\n         **kwargs: Any,\\n     ):\\n         \\\"\\\"\\\"\\n@@ -248,7 +253,7 @@ def __init__(\\n         box_recast: Optional[Dict] = None,\\n         box_dots: bool = False,\\n         box_class: Optional[Union[Dict, Type[\\\"Box\\\"]]] = None,\\n-        box_namespace: Tuple[str, ...] = (),\\n+        box_namespace: Union[Tuple[str, ...], Literal[False]] = (),\\n         **kwargs: Any,\\n     ):\\n         super().__init__()\\n@@ -380,7 +385,7 @@ def __hash__(self):\\n             return hashing\\n         raise BoxTypeError('unhashable type: \\\"Box\\\"')\\n \\n-    def __dir__(self):\\n+    def __dir__(self) -> List[str]:\\n         items = set(super().__dir__())\\n         # Only show items accessible by dot notation\\n         for key in self.keys():\\n@@ -483,7 +488,7 @@ def __setstate__(self, state):\\n         self.__dict__.update(state)\\n \\n     def __get_default(self, item, attr=False):\\n-        if ipython and item in (\\\"getdoc\\\", \\\"shape\\\"):\\n+        if item in (\\\"getdoc\\\", \\\"shape\\\") and _is_ipython():\\n             return None\\n         default_value = self._box_config[\\\"default_box_attr\\\"]\\n         if default_value in (self._box_config[\\\"box_class\\\"], dict):\\n@@ -589,6 +594,12 @@ def __getitem__(self, item, _ignore_default=False):\\n             if item == \\\"_box_config\\\":\\n                 cause = _exception_cause(err)\\n                 raise BoxKeyError(\\\"_box_config should only exist as an attribute and is never defaulted\\\") from cause\\n+            if isinstance(item, slice):\\n+                # In Python 3.12 this changes to a KeyError instead of TypeError\\n+                new_box = self._box_config[\\\"box_class\\\"](**self.__box_config())\\n+                for x in list(super().keys())[item.start : item.stop : item.step]:\\n+                    new_box[x] = self[x]\\n+                return new_box\\n             if self._box_config[\\\"box_dots\\\"] and isinstance(item, str) and (\\\".\\\" in item or \\\"[\\\" in item):\\n                 try:\\n                     first_item, children = _parse_box_dots(self, item)\\n@@ -823,7 +834,7 @@ def convert_and_set(k, v):\\n                 # in the `converted` box_config set\\n                 v = self._box_config[\\\"box_class\\\"](v, **self.__box_config(extra_namespace=k))\\n                 if k in self and isinstance(self[k], dict):\\n-                    self[k].merge_update(v)\\n+                    self[k].merge_update(v, box_merge_lists=merge_type)\\n                     return\\n             if isinstance(v, list) and not intact_type:\\n                 v = box.BoxList(v, **self.__box_config(extra_namespace=k))\\n\",\"diff --git a/box/box.pyi b/box/box.pyi\\nindex 02ba3d4..9d56ab3 100644\\n--- a/box/box.pyi\\n+++ b/box/box.pyi\\n@@ -1,10 +1,11 @@\\n+from _typeshed import Incomplete\\n from collections.abc import Mapping\\n from os import PathLike\\n-from typing import Any, Dict, Generator, List, Optional, Tuple, Union\\n+from typing import Any, Dict, Generator, List, Optional, Tuple, Type, Union, Literal\\n \\n class Box(dict):\\n     def __new__(\\n-        cls: Any,\\n+        cls,\\n         *args: Any,\\n         default_box: bool = ...,\\n         default_box_attr: Any = ...,\\n@@ -17,11 +18,12 @@ class Box(dict):\\n         box_safe_prefix: str = ...,\\n         box_duplicates: str = ...,\\n         box_intact_types: Union[Tuple, List] = ...,\\n-        box_recast: Dict = ...,\\n+        box_recast: Optional[Dict] = ...,\\n         box_dots: bool = ...,\\n-        box_class: Union[Dict, Box] = ...,\\n+        box_class: Optional[Union[Dict, Type[\\\"Box\\\"]]] = ...,\\n+        box_namespace: Union[Tuple[str, ...], Literal[False]] = ...,\\n         **kwargs: Any,\\n-    ) -> Any: ...\\n+    ): ...\\n     def __init__(\\n         self,\\n         *args: Any,\\n@@ -36,82 +38,84 @@ class Box(dict):\\n         box_safe_prefix: str = ...,\\n         box_duplicates: str = ...,\\n         box_intact_types: Union[Tuple, List] = ...,\\n-        box_recast: Dict = ...,\\n+        box_recast: Optional[Dict] = ...,\\n         box_dots: bool = ...,\\n-        box_class: Union[Dict, Box] = ...,\\n+        box_class: Optional[Union[Dict, Type[\\\"Box\\\"]]] = ...,\\n+        box_namespace: Union[Tuple[str, ...], Literal[False]] = ...,\\n         **kwargs: Any,\\n     ) -> None: ...\\n-    def __add__(self, other: Mapping[Any, Any]) -> Any: ...\\n-    def __radd__(self, other: Mapping[Any, Any]) -> Any: ...\\n-    def __iadd__(self, other: Mapping[Any, Any]) -> Any: ...\\n-    def __or__(self, other: Mapping[Any, Any]) -> Any: ...\\n-    def __ror__(self, other: Mapping[Any, Any]) -> Any: ...\\n-    def __ior__(self, other: Mapping[Any, Any]) -> Any: ...  # type: ignore[override]\\n-    def __sub__(self, other: Mapping[Any, Any]) -> Any: ...\\n-    def __hash__(self) -> Any: ...  # type: ignore[override]\\n-    def __dir__(self): ...\\n-    def keys(self, dotted: Union[bool] = ...) -> Any: ...\\n-    def items(self, dotted: Union[bool] = ...) -> Any: ...\\n-    def get(self, key: Any, default: Any = ...): ...\\n+    def __add__(self, other: Mapping[Any, Any]): ...\\n+    def __radd__(self, other: Mapping[Any, Any]): ...\\n+    def __iadd__(self, other: Mapping[Any, Any]): ...\\n+    def __or__(self, other: Mapping[Any, Any]): ...\\n+    def __ror__(self, other: Mapping[Any, Any]): ...\\n+    def __ior__(self, other: Mapping[Any, Any]): ...  # type: ignore[override]\\n+    def __sub__(self, other: Mapping[Any, Any]): ...\\n+    def __hash__(self): ...\\n+    def __dir__(self) -> List[str]: ...\\n+    def __contains__(self, item) -> bool: ...\\n+    def keys(self, dotted: Union[bool] = ...): ...\\n+    def items(self, dotted: Union[bool] = ...): ...\\n+    def get(self, key, default=...): ...\\n     def copy(self) -> Box: ...\\n     def __copy__(self) -> Box: ...\\n-    def __deepcopy__(self, memodict: Any = ...) -> Box: ...\\n-    def __getitem__(self, item: Any, _ignore_default: bool = ...) -> Any: ...\\n-    def __getattr__(self, item: Any) -> Any: ...\\n-    def __setitem__(self, key: Any, value: Any): ...\\n-    def __setattr__(self, key: Any, value: Any): ...\\n-    def __delitem__(self, key: Any): ...\\n-    def __delattr__(self, item: Any) -> None: ...\\n-    def pop(self, key: Any, *args: Any): ...\\n+    def __deepcopy__(self, memodict: Incomplete | None = ...) -> Box: ...\\n+    def __getitem__(self, item, _ignore_default: bool = ...): ...\\n+    def __getattr__(self, item): ...\\n+    def __setitem__(self, key, value): ...\\n+    def __setattr__(self, key, value): ...\\n+    def __delitem__(self, key): ...\\n+    def __delattr__(self, item) -> None: ...\\n+    def pop(self, key, *args): ...\\n     def clear(self) -> None: ...\\n     def popitem(self): ...\\n     def __iter__(self) -> Generator: ...\\n     def __reversed__(self) -> Generator: ...\\n     def to_dict(self) -> Dict: ...\\n-    def update(self, __m: Optional[Any] = ..., **kwargs: Any) -> None: ...\\n-    def merge_update(self, __m: Optional[Any] = ..., **kwargs: Any) -> None: ...\\n-    def setdefault(self, item: Any, default: Optional[Any] = ...): ...\\n+    def update(self, *args, **kwargs) -> None: ...\\n+    def merge_update(self, *args, **kwargs) -> None: ...\\n+    def setdefault(self, item, default: Incomplete | None = ...): ...\\n     def to_json(\\n-        self, filename: Union[str, PathLike] = ..., encoding: str = ..., errors: str = ..., **json_kwargs: Any\\n-    ) -> Any: ...\\n+        self, filename: Optional[Union[str, PathLike]] = ..., encoding: str = ..., errors: str = ..., **json_kwargs\\n+    ): ...\\n     @classmethod\\n     def from_json(\\n-        cls: Any,\\n-        json_string: str = ...,\\n-        filename: Union[str, PathLike] = ...,\\n+        cls,\\n+        json_string: Optional[str] = ...,\\n+        filename: Optional[Union[str, PathLike]] = ...,\\n         encoding: str = ...,\\n         errors: str = ...,\\n-        **kwargs: Any,\\n+        **kwargs,\\n     ) -> Box: ...\\n     def to_yaml(\\n         self,\\n-        filename: Union[str, PathLike] = ...,\\n+        filename: Optional[Union[str, PathLike]] = ...,\\n         default_flow_style: bool = ...,\\n         encoding: str = ...,\\n         errors: str = ...,\\n-        **yaml_kwargs: Any,\\n-    ) -> Any: ...\\n+        **yaml_kwargs,\\n+    ): ...\\n     @classmethod\\n     def from_yaml(\\n-        cls: Any,\\n-        yaml_string: str = ...,\\n-        filename: Union[str, PathLike] = ...,\\n+        cls,\\n+        yaml_string: Optional[str] = ...,\\n+        filename: Optional[Union[str, PathLike]] = ...,\\n         encoding: str = ...,\\n         errors: str = ...,\\n-        **kwargs: Any,\\n+        **kwargs,\\n     ) -> Box: ...\\n-    def to_toml(self, filename: Union[str, PathLike] = ..., encoding: str = ..., errors: str = ...) -> Any: ...\\n+    def to_toml(self, filename: Optional[Union[str, PathLike]] = ..., encoding: str = ..., errors: str = ...): ...\\n     @classmethod\\n     def from_toml(\\n-        cls: Any,\\n-        toml_string: str = ...,\\n-        filename: Union[str, PathLike] = ...,\\n+        cls,\\n+        toml_string: Optional[str] = ...,\\n+        filename: Optional[Union[str, PathLike]] = ...,\\n         encoding: str = ...,\\n         errors: str = ...,\\n-        **kwargs: Any,\\n+        **kwargs,\\n     ) -> Box: ...\\n-    def to_msgpack(self, filename: Union[str, PathLike] = ..., **kwargs: Any) -> Any: ...\\n+    def to_msgpack(self, filename: Optional[Union[str, PathLike]] = ..., **kwargs): ...\\n     @classmethod\\n     def from_msgpack(\\n-        cls: Any, msgpack_bytes: bytes = ..., filename: Union[str, PathLike] = ..., **kwargs: Any\\n+        cls, msgpack_bytes: Optional[bytes] = ..., filename: Optional[Union[str, PathLike]] = ..., **kwargs\\n     ) -> Box: ...\\n\",\"diff --git a/box/box_list.py b/box/box_list.py\\nindex 750f3f0..048b014 100644\\n--- a/box/box_list.py\\n+++ b/box/box_list.py\\n@@ -5,7 +5,7 @@\\n import copy\\n import re\\n from os import PathLike\\n-from typing import Optional, Iterable, Type, Union\\n+from typing import Optional, Iterable, Type, Union, List, Any\\n \\n import box\\n from box.converters import (\\n@@ -22,7 +22,6 @@\\n     _to_yaml,\\n     msgpack_available,\\n     toml_read_library,\\n-    toml_write_library,\\n     yaml_available,\\n )\\n from box.exceptions import BoxError, BoxTypeError\\n@@ -102,7 +101,7 @@ def _convert(self, p_object):\\n         elif isinstance(p_object, box.Box):\\n             p_object._box_config.update(self.box_options)\\n         if isinstance(p_object, list) and not self._is_intact_type(p_object):\\n-            p_object = self if id(p_object) == self.box_org_ref else self.__class__(p_object, **self.box_options)\\n+            p_object = self.__class__(p_object, **self.box_options)\\n         elif isinstance(p_object, BoxList):\\n             p_object.box_options.update(self.box_options)\\n         return p_object\\n@@ -117,7 +116,7 @@ def extend(self, iterable):\\n     def insert(self, index, p_object):\\n         super().insert(index, self._convert(p_object))\\n \\n-    def _dotted_helper(self):\\n+    def _dotted_helper(self) -> List[str]:\\n         keys = []\\n         for idx, item in enumerate(self):\\n             added = False\\n@@ -150,15 +149,15 @@ def __deepcopy__(self, memo=None):\\n             out.append(copy.deepcopy(k, memo=memo))\\n         return out\\n \\n-    def __hash__(self):\\n+    def __hash__(self) -> int:  # type: ignore[override]\\n         if self.box_options.get(\\\"frozen_box\\\"):\\n             hashing = 98765\\n             hashing ^= hash(tuple(self))\\n             return hashing\\n         raise BoxTypeError(\\\"unhashable type: 'BoxList'\\\")\\n \\n-    def to_list(self):\\n-        new_list = []\\n+    def to_list(self) -> List:\\n+        new_list: List[Any] = []\\n         for x in self:\\n             if x is self:\\n                 new_list.append(new_list)\\n\",\"diff --git a/box/box_list.pyi b/box/box_list.pyi\\nindex dbd2007..982093f 100644\\n--- a/box/box_list.pyi\\n+++ b/box/box_list.pyi\\n@@ -1,19 +1,18 @@\\n import box\\n from box.converters import (\\n-    BOX_PARAMETERS,\\n-    msgpack_available,\\n-    yaml_available,\\n-    toml_read_library,\\n-    toml_write_library,\\n+    BOX_PARAMETERS as BOX_PARAMETERS,\\n+    msgpack_available as msgpack_available,\\n+    toml_read_library as toml_read_library,\\n+    toml_write_library as toml_write_library,\\n+    yaml_available as yaml_available,\\n )\\n-from box.exceptions import BoxError as BoxError, BoxTypeError as BoxTypeError\\n from os import PathLike as PathLike\\n-from typing import Any, Iterable, Optional, Type, Union\\n+from typing import Any, Iterable, Optional, Type, Union, List\\n \\n class BoxList(list):\\n     def __new__(cls, *args: Any, **kwargs: Any): ...\\n-    box_options: Any = ...\\n-    box_org_ref: Any = ...\\n+    box_options: Any\\n+    box_org_ref: Any\\n     def __init__(self, iterable: Iterable = ..., box_class: Type[box.Box] = ..., **box_options: Any) -> None: ...\\n     def __getitem__(self, item: Any): ...\\n     def __delitem__(self, key: Any): ...\\n@@ -21,10 +20,11 @@ class BoxList(list):\\n     def append(self, p_object: Any) -> None: ...\\n     def extend(self, iterable: Any) -> None: ...\\n     def insert(self, index: Any, p_object: Any) -> None: ...\\n-    def __copy__(self): ...\\n-    def __deepcopy__(self, memo: Optional[Any] = ...): ...\\n-    def __hash__(self) -> Any: ...  # type: ignore[override]\\n-    def to_list(self): ...\\n+    def __copy__(self) -> \\\"BoxList\\\": ...\\n+    def __deepcopy__(self, memo: Optional[Any] = ...) -> \\\"BoxList\\\": ...\\n+    def __hash__(self) -> int: ...  # type: ignore[override]\\n+    def to_list(self) -> List: ...\\n+    def _dotted_helper(self) -> List[str]: ...\\n     def to_json(\\n         self,\\n         filename: Union[str, PathLike] = ...,\\n@@ -35,7 +35,7 @@ class BoxList(list):\\n     ) -> Any: ...\\n     @classmethod\\n     def from_json(\\n-        cls: Any,\\n+        cls,\\n         json_string: str = ...,\\n         filename: Union[str, PathLike] = ...,\\n         encoding: str = ...,\\n@@ -53,7 +53,7 @@ class BoxList(list):\\n     ) -> Any: ...\\n     @classmethod\\n     def from_yaml(\\n-        cls: Any,\\n+        cls,\\n         yaml_string: str = ...,\\n         filename: Union[str, PathLike] = ...,\\n         encoding: str = ...,\\n@@ -65,7 +65,7 @@ class BoxList(list):\\n     ) -> Any: ...\\n     @classmethod\\n     def from_toml(\\n-        cls: Any,\\n+        cls,\\n         toml_string: str = ...,\\n         filename: Union[str, PathLike] = ...,\\n         key_name: str = ...,\\n@@ -75,12 +75,9 @@ class BoxList(list):\\n     ) -> Any: ...\\n     def to_msgpack(self, filename: Union[str, PathLike] = ..., **kwargs: Any) -> Any: ...\\n     @classmethod\\n-    def from_msgpack(\\n-        cls: Any, msgpack_bytes: bytes = ..., filename: Union[str, PathLike] = ..., **kwargs: Any\\n-    ) -> Any: ...\\n+    def from_msgpack(cls, msgpack_bytes: bytes = ..., filename: Union[str, PathLike] = ..., **kwargs: Any) -> Any: ...\\n     def to_csv(self, filename: Union[str, PathLike] = ..., encoding: str = ..., errors: str = ...) -> Any: ...\\n     @classmethod\\n     def from_csv(\\n-        cls: Any, csv_string: str = ..., filename: Union[str, PathLike] = ..., encoding: str = ..., errors: str = ...\\n+        cls, csv_string: str = ..., filename: Union[str, PathLike] = ..., encoding: str = ..., errors: str = ...\\n     ) -> Any: ...\\n-    def _dotted_helper(self) -> Any: ...\\n\",\"diff --git a/box/config_box.py b/box/config_box.py\\nindex 0d42b3b..0202ca3 100644\\n--- a/box/config_box.py\\n+++ b/box/config_box.py\\n@@ -1,5 +1,6 @@\\n #!/usr/bin/env python\\n # -*- coding: utf-8 -*-\\n+from typing import List\\n \\n from box.box import Box\\n \\n@@ -29,7 +30,7 @@ def __getattr__(self, item):\\n         except AttributeError:\\n             return super().__getattr__(item.lower())\\n \\n-    def __dir__(self):\\n+    def __dir__(self) -> List[str]:\\n         return super().__dir__() + [\\\"bool\\\", \\\"int\\\", \\\"float\\\", \\\"list\\\", \\\"getboolean\\\", \\\"getfloat\\\", \\\"getint\\\"]\\n \\n     def bool(self, item, default=None):\\n\",\"diff --git a/box/config_box.pyi b/box/config_box.pyi\\nindex 75afb44..1022f1b 100644\\n--- a/box/config_box.pyi\\n+++ b/box/config_box.pyi\\n@@ -1,9 +1,9 @@\\n from box.box import Box as Box\\n-from typing import Any, Optional\\n+from typing import Any, Optional, List\\n \\n class ConfigBox(Box):\\n     def __getattr__(self, item: Any): ...\\n-    def __dir__(self): ...\\n+    def __dir__(self) -> List[str]: ...\\n     def bool(self, item: Any, default: Optional[Any] = ...): ...\\n     def int(self, item: Any, default: Optional[Any] = ...): ...\\n     def float(self, item: Any, default: Optional[Any] = ...): ...\\n@@ -11,5 +11,5 @@ class ConfigBox(Box):\\n     def getboolean(self, item: Any, default: Optional[Any] = ...): ...\\n     def getint(self, item: Any, default: Optional[Any] = ...): ...\\n     def getfloat(self, item: Any, default: Optional[Any] = ...): ...\\n-    def copy(self): ...\\n-    def __copy__(self): ...\\n+    def copy(self) -> \\\"ConfigBox\\\": ...\\n+    def __copy__(self) -> \\\"ConfigBox\\\": ...\\n\",\"diff --git a/box/converters.py b/box/converters.py\\nindex 29da488..3bb003b 100644\\n--- a/box/converters.py\\n+++ b/box/converters.py\\n@@ -5,7 +5,6 @@\\n \\n import csv\\n import json\\n-import sys\\n from io import StringIO\\n from os import PathLike\\n from pathlib import Path\\n@@ -34,6 +33,19 @@\\n toml_write_library: Optional[Any] = None\\n toml_decode_error: Optional[Callable] = None\\n \\n+__all__ = [\\n+    \\\"_to_json\\\",\\n+    \\\"_to_yaml\\\",\\n+    \\\"_to_toml\\\",\\n+    \\\"_to_csv\\\",\\n+    \\\"_to_msgpack\\\",\\n+    \\\"_from_json\\\",\\n+    \\\"_from_yaml\\\",\\n+    \\\"_from_toml\\\",\\n+    \\\"_from_csv\\\",\\n+    \\\"_from_msgpack\\\",\\n+]\\n+\\n \\n class BoxTomlDecodeError(BoxError):\\n     \\\"\\\"\\\"Toml Decode Error\\\"\\\"\\\"\\n\",\"diff --git a/box/converters.pyi b/box/converters.pyi\\nindex 5f94f33..43d2020 100644\\n--- a/box/converters.pyi\\n+++ b/box/converters.pyi\\n@@ -1,6 +1,5 @@\\n-from box.exceptions import BoxError as BoxError\\n-from os import PathLike as PathLike\\n-from typing import Any, Union, Optional, Dict, Callable\\n+from typing import Any, Callable, Optional, Union, Dict\\n+from os import PathLike\\n \\n yaml_available: bool\\n toml_available: bool\\n@@ -10,57 +9,52 @@ toml_read_library: Optional[Any]\\n toml_write_library: Optional[Any]\\n toml_decode_error: Optional[Callable]\\n \\n-def _exists(filename: Union[str, PathLike], create: bool = False) -> Any: ...\\n def _to_json(\\n-    obj, filename: Optional[Union[str, PathLike]] = None, encoding: str = \\\"utf-8\\\", errors: str = \\\"strict\\\", **json_kwargs\\n-) -> Any: ...\\n+    obj, filename: Optional[Union[str, PathLike]] = ..., encoding: str = ..., errors: str = ..., **json_kwargs\\n+): ...\\n def _from_json(\\n-    json_string: Optional[str] = None,\\n-    filename: Optional[Union[str, PathLike]] = None,\\n-    encoding: str = \\\"utf-8\\\",\\n-    errors: str = \\\"strict\\\",\\n-    multiline: bool = False,\\n+    json_string: Optional[str] = ...,\\n+    filename: Optional[Union[str, PathLike]] = ...,\\n+    encoding: str = ...,\\n+    errors: str = ...,\\n+    multiline: bool = ...,\\n     **kwargs,\\n-) -> Any: ...\\n+): ...\\n def _to_yaml(\\n     obj,\\n-    filename: Optional[Union[str, PathLike]] = None,\\n-    default_flow_style: bool = False,\\n-    encoding: str = \\\"utf-8\\\",\\n-    errors: str = \\\"strict\\\",\\n-    ruamel_typ: str = \\\"rt\\\",\\n-    ruamel_attrs: Optional[Dict] = None,\\n+    filename: Optional[Union[str, PathLike]] = ...,\\n+    default_flow_style: bool = ...,\\n+    encoding: str = ...,\\n+    errors: str = ...,\\n+    ruamel_typ: str = ...,\\n+    ruamel_attrs: Optional[Dict] = ...,\\n     **yaml_kwargs,\\n-) -> Any: ...\\n+): ...\\n def _from_yaml(\\n-    yaml_string: Optional[str] = None,\\n-    filename: Optional[Union[str, PathLike]] = None,\\n-    encoding: str = \\\"utf-8\\\",\\n-    errors: str = \\\"strict\\\",\\n-    ruamel_typ: str = \\\"rt\\\",\\n-    ruamel_attrs: Optional[Dict] = None,\\n+    yaml_string: Optional[str] = ...,\\n+    filename: Optional[Union[str, PathLike]] = ...,\\n+    encoding: str = ...,\\n+    errors: str = ...,\\n+    ruamel_typ: str = ...,\\n+    ruamel_attrs: Optional[Dict] = ...,\\n     **kwargs,\\n-) -> Any: ...\\n-def _to_toml(\\n-    obj, filename: Optional[Union[str, PathLike]] = None, encoding: str = \\\"utf-8\\\", errors: str = \\\"strict\\\"\\n-) -> Any: ...\\n+): ...\\n+def _to_toml(obj, filename: Optional[Union[str, PathLike]] = ..., encoding: str = ..., errors: str = ...): ...\\n def _from_toml(\\n-    toml_string: Optional[str] = None,\\n-    filename: Optional[Union[str, PathLike]] = None,\\n-    encoding: str = \\\"utf-8\\\",\\n-    errors: str = \\\"strict\\\",\\n-) -> Any: ...\\n-def _to_msgpack(obj, filename: Optional[Union[str, PathLike]] = None, **kwargs) -> Any: ...\\n-def _from_msgpack(\\n-    msgpack_bytes: Optional[bytes] = None, filename: Optional[Union[str, PathLike]] = None, **kwargs\\n-) -> Any: ...\\n+    toml_string: Optional[str] = ...,\\n+    filename: Optional[Union[str, PathLike]] = ...,\\n+    encoding: str = ...,\\n+    errors: str = ...,\\n+): ...\\n+def _to_msgpack(obj, filename: Optional[Union[str, PathLike]] = ..., **kwargs): ...\\n+def _from_msgpack(msgpack_bytes: Optional[bytes] = ..., filename: Optional[Union[str, PathLike]] = ..., **kwargs): ...\\n def _to_csv(\\n-    box_list, filename: Optional[Union[str, PathLike]] = None, encoding: str = \\\"utf-8\\\", errors: str = \\\"strict\\\", **kwargs\\n-) -> Any: ...\\n+    box_list, filename: Optional[Union[str, PathLike]] = ..., encoding: str = ..., errors: str = ..., **kwargs\\n+): ...\\n def _from_csv(\\n-    csv_string: Optional[str] = None,\\n-    filename: Optional[Union[str, PathLike]] = None,\\n-    encoding: str = \\\"utf-8\\\",\\n-    errors: str = \\\"strict\\\",\\n+    csv_string: Optional[str] = ...,\\n+    filename: Optional[Union[str, PathLike]] = ...,\\n+    encoding: str = ...,\\n+    errors: str = ...,\\n     **kwargs,\\n-) -> Any: ...\\n+): ...\\n\",\"diff --git a/box/from_file.pyi b/box/from_file.pyi\\nindex 00657eb..9e8be8a 100644\\n--- a/box/from_file.pyi\\n+++ b/box/from_file.pyi\\n@@ -1,9 +1,16 @@\\n-from box.box import Box\\n-from box.box_list import BoxList\\n+from box.box import Box as Box\\n+from box.box_list import BoxList as BoxList\\n from os import PathLike\\n from typing import Any, Union\\n \\n def box_from_file(\\n-    file: Union[str, PathLike], file_type: str = ..., encoding: str = ..., errors: str = ..., **kwargs: Any\\n+    file: Union[str, PathLike],\\n+    file_type: str = ...,\\n+    encoding: str = ...,\\n+    errors: str = ...,\\n+    **kwargs: Any,\\n+) -> Union[Box, BoxList]: ...\\n+def box_from_string(\\n+    content: str,\\n+    string_type: str = ...,\\n ) -> Union[Box, BoxList]: ...\\n-def box_from_string(content: str, string_type: str = ...) -> Union[Box, BoxList]: ...\\n\",\"diff --git a/box/shorthand_box.py b/box/shorthand_box.py\\nindex 5d24604..99dfc8d 100644\\n--- a/box/shorthand_box.py\\n+++ b/box/shorthand_box.py\\n@@ -1,5 +1,6 @@\\n #!/usr/bin/env python\\n # -*- coding: utf-8 -*-\\n+from typing import Dict\\n \\n from box.box import Box\\n \\n@@ -27,28 +28,28 @@ class SBox(Box):\\n     ]\\n \\n     @property\\n-    def dict(self):\\n+    def dict(self) -> Dict:\\n         return self.to_dict()\\n \\n     @property\\n-    def json(self):\\n+    def json(self) -> str:\\n         return self.to_json()\\n \\n     @property\\n-    def yaml(self):\\n+    def yaml(self) -> str:\\n         return self.to_yaml()\\n \\n     @property\\n-    def toml(self):\\n+    def toml(self) -> str:\\n         return self.to_toml()\\n \\n     def __repr__(self):\\n         return f\\\"SBox({self})\\\"\\n \\n-    def copy(self):\\n+    def copy(self) -> \\\"SBox\\\":\\n         return SBox(super(SBox, self).copy())\\n \\n-    def __copy__(self):\\n+    def __copy__(self) -> \\\"SBox\\\":\\n         return SBox(super(SBox, self).copy())\\n \\n \\n@@ -64,5 +65,5 @@ def __new__(cls, *args, **kwargs):\\n         obj._box_config[\\\"default_box\\\"] = True\\n         return obj\\n \\n-    def __repr__(self):\\n+    def __repr__(self) -> str:\\n         return f\\\"DDBox({self})\\\"\\n\",\"diff --git a/box/shorthand_box.pyi b/box/shorthand_box.pyi\\nindex 4b86f73..deef693 100644\\n--- a/box/shorthand_box.pyi\\n+++ b/box/shorthand_box.pyi\\n@@ -1,15 +1,17 @@\\n+from typing import Dict\\n+\\n from box.box import Box as Box\\n \\n class SBox(Box):\\n     @property\\n-    def dict(self): ...\\n+    def dict(self) -> Dict: ...\\n     @property\\n-    def json(self): ...\\n+    def json(self) -> str: ...\\n     @property\\n-    def yaml(self): ...\\n+    def yaml(self) -> str: ...\\n     @property\\n-    def toml(self): ...\\n-    def copy(self): ...\\n-    def __copy__(self): ...\\n+    def toml(self) -> str: ...\\n+    def copy(self) -> \\\"SBox\\\": ...\\n+    def __copy__(self) -> \\\"SBox\\\": ...\\n \\n class DDBox(Box): ...\\n\",\"diff --git a/requirements-dev.txt b/requirements-dev.txt\\nindex cb6ad4c..e41d73f 100644\\n--- a/requirements-dev.txt\\n+++ b/requirements-dev.txt\\n@@ -1,5 +1,5 @@\\n # Files needed for pre-commit hooks\\n black>=23.1.0\\n-Cython>=0.29\\n+Cython==3.0.0\\n mypy>=1.0.1\\n pre-commit>=2.21.0\\n\",\"diff --git a/setup.py b/setup.py\\nindex 0f0519e..3781c42 100644\\n--- a/setup.py\\n+++ b/setup.py\\n@@ -45,18 +45,17 @@\\n     py_modules=[\\\"box\\\"],\\n     packages=[\\\"box\\\"],\\n     ext_modules=extra,\\n-    python_requires=\\\">=3.7\\\",\\n+    python_requires=\\\">=3.8\\\",\\n     include_package_data=True,\\n     platforms=\\\"any\\\",\\n     classifiers=[\\n         \\\"Programming Language :: Python\\\",\\n         \\\"Programming Language :: Python :: 3\\\",\\n-        \\\"Programming Language :: Python :: 3.6\\\",\\n-        \\\"Programming Language :: Python :: 3.7\\\",\\n         \\\"Programming Language :: Python :: 3.8\\\",\\n         \\\"Programming Language :: Python :: 3.9\\\",\\n         \\\"Programming Language :: Python :: 3.10\\\",\\n         \\\"Programming Language :: Python :: 3.11\\\",\\n+        \\\"Programming Language :: Python :: 3.12\\\",\\n         \\\"Programming Language :: Python :: Implementation :: CPython\\\",\\n         \\\"Development Status :: 5 - Production/Stable\\\",\\n         \\\"Natural Language :: English\\\",\\n\"]", "test_patch": "[\"diff --git a/.github/workflows/pythonpublish.yml b/.github/workflows/pythonpublish.yml\\nindex f7d8c27..a9d01fc 100644\\n--- a/.github/workflows/pythonpublish.yml\\n+++ b/.github/workflows/pythonpublish.yml\\n@@ -18,7 +18,7 @@ jobs:\\n     - name: Set up Python\\n       uses: actions/setup-python@v4\\n       with:\\n-        python-version: '3.10'\\n+        python-version: '3.11'\\n \\n     - name: Install Dependencies\\n       run: |\\n@@ -39,7 +39,7 @@ jobs:\\n     strategy:\\n       matrix:\\n         os: [macos-11, windows-latest]\\n-        python-version: [\\\"3.7\\\", \\\"3.8\\\", \\\"3.9\\\", \\\"3.10\\\", \\\"3.11\\\"]\\n+        python-version: [\\\"3.8\\\", \\\"3.9\\\", \\\"3.10\\\", \\\"3.11\\\"]\\n     runs-on: ${{ matrix.os }}\\n \\n     steps:\\n@@ -51,7 +51,7 @@ jobs:\\n     - name: Install dependencies\\n       run: |\\n         python -m pip install --upgrade pip\\n-        pip install setuptools wheel twine Cython --upgrade\\n+        pip install setuptools wheel twine Cython==3.0.0 --upgrade\\n     - name: Build and publish\\n       env:\\n         TWINE_USERNAME: ${{ secrets.PYPI_USERNAME }}\\n@@ -64,20 +64,21 @@ jobs:\\n     runs-on: ubuntu-latest\\n     steps:\\n     - uses: actions/checkout@v3\\n-    - name: Set up Python 3.10\\n+    - name: Set up Python 3.11\\n       uses: actions/setup-python@v4\\n       with:\\n-        python-version: \\\"3.10\\\"\\n+        python-version: \\\"3.11\\\"\\n \\n-    - uses: RalfG/python-wheels-manylinux-build@v0.7.1-manylinux2010_x86_64\\n-      with:\\n-        python-versions: 'cp37-cp37m cp38-cp38 cp39-cp39 cp310-cp310'\\n-        build-requirements: 'cython'\\n-\\n-    - name: Install dependencies\\n+    - name: Build wheels\\n       run: |\\n         python -m pip install --upgrade pip\\n-        pip install twine --upgrade\\n+        pip install cibuildwheel\\n+        python -m cibuildwheel --output-dir dist\\n+      env:\\n+        CIBW_BUILD: cp38-manylinux_x86_64 cp39-manylinux_x86_64 cp310-manylinux_x86_64 cp311-manylinux_x86_64 cp311-macosx_x86_64\\n+        CIBW_BEFORE_BUILD: pip install Cython==3.0.0\\n+        CIBW_BEFORE_TEST: pip install -r requirements.txt -r requirements-test.txt setuptools wheel twine\\n+        CIBW_TEST_COMMAND: pytest {package}/test -vv\\n \\n     - name: Publish\\n       env:\\n@@ -85,3 +86,4 @@ jobs:\\n         TWINE_PASSWORD: ${{ secrets.PYPI_PASSWORD }}\\n       run: |\\n         twine upload dist/*-manylinux*.whl\\n+        twine upload dist/*-macosx*.whl\\n\",\"diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\\nindex 35eff83..db506f9 100644\\n--- a/.github/workflows/tests.yml\\n+++ b/.github/workflows/tests.yml\\n@@ -13,7 +13,7 @@ jobs:\\n   package-checks:\\n     strategy:\\n       matrix:\\n-        python-version: [\\\"3.7\\\", \\\"3.8\\\", \\\"3.9\\\", \\\"3.10\\\", \\\"3.11\\\", \\\"pypy-3.8\\\"]\\n+        python-version: [\\\"3.8\\\", \\\"3.9\\\", \\\"3.10\\\", \\\"3.11\\\", \\\"3.12-dev\\\", \\\"pypy-3.8\\\"]\\n         os: [ubuntu-latest, macos-11, windows-latest]\\n     runs-on: ${{ matrix.os }}\\n     steps:\\n@@ -31,7 +31,7 @@ jobs:\\n           python -m pip install --upgrade pip\\n           pip install -r requirements.txt\\n           pip install -r requirements-test.txt\\n-          pip install coveralls flake8 flake8-print mypy setuptools wheel twine Cython\\n+          pip install coveralls flake8 flake8-print mypy setuptools wheel twine Cython==3.0.0\\n       - name: Lint with flake8\\n         run: |\\n           # stop the build if there are Python syntax errors, undefined names or print statements\\n@@ -49,16 +49,16 @@ jobs:\\n         run: |\\n           pip install dist/*.whl\\n           rm -rf box\\n-          python -m pytest\\n+          python -m pytest -vv\\n       - name: Test packaged wheel on Windows\\n         if: matrix.os == 'windows-latest'\\n         run: |\\n           $wheel = (Get-ChildItem dist\\\\*.whl | Sort lastWriteTime | Select-Object -last 1).Name\\n           pip install dist\\\\${wheel}\\n           Remove-item box -recurse -force\\n-          python -m pytest\\n+          python -m pytest -vv\\n       - name: Upload wheel artifact\\n-        uses: actions/upload-artifact@v2\\n+        uses: actions/upload-artifact@v3\\n         with:\\n           name: python_box\\n           path: dist/*.whl\\n@@ -67,36 +67,29 @@ jobs:\\n     runs-on: ubuntu-latest\\n     steps:\\n       - uses: actions/checkout@v3\\n-      - name: Set up Python 3.10\\n+      - name: Set up Python 3.11\\n         uses: actions/setup-python@v4\\n         with:\\n-          python-version: \\\"3.10\\\"\\n+          python-version: \\\"3.11\\\"\\n \\n       - uses: actions/cache@v3\\n         with:\\n           path: ~/.cache/pip\\n           key: package-manylinux-check-${{ hashFiles('requirements.txt') }}-${{ hashFiles('requirements-test.txt') }}\\n \\n-      - name: Install dependencies\\n+      - name: Build wheels\\n         run: |\\n           python -m pip install --upgrade pip\\n-          pip install -r requirements.txt\\n-          pip install -r requirements-test.txt\\n-          pip install coveralls flake8 flake8-print mypy setuptools wheel twine Cython\\n-\\n-      - uses: RalfG/python-wheels-manylinux-build@v0.7.1-manylinux2010_x86_64\\n-        with:\\n-          python-versions: 'cp37-cp37m cp38-cp38 cp39-cp39 cp310-cp310'\\n-          build-requirements: 'cython'\\n-\\n-      - name: Test packaged wheel on linux\\n-        run: |\\n-          pip install dist/*cp310-manylinux*.whl\\n-          rm -rf box\\n-          python -m pytest\\n+          pip install cibuildwheel\\n+          python -m cibuildwheel --output-dir dist\\n+        env:\\n+          CIBW_BUILD: cp38-manylinux_x86_64 cp39-manylinux_x86_64 cp310-manylinux_x86_64 cp311-manylinux_x86_64 cp311-macosx_x86_64\\n+          CIBW_BEFORE_BUILD: pip install Cython==3.0.0\\n+          CIBW_BEFORE_TEST: pip install -r requirements.txt -r requirements-test.txt setuptools wheel twine\\n+          CIBW_TEST_COMMAND: pytest {package}/test -vv\\n \\n       - name: Upload wheel artifact\\n-        uses: actions/upload-artifact@v2\\n+        uses: actions/upload-artifact@v3\\n         with:\\n           name: python_box\\n           path: dist/*-manylinux*.whl\\n@@ -104,7 +97,7 @@ jobs:\\n   test:\\n     strategy:\\n       matrix:\\n-        python-version: [\\\"3.7\\\", \\\"3.8\\\", \\\"3.9\\\", \\\"3.10\\\", \\\"3.11\\\"]\\n+        python-version: [\\\"3.8\\\", \\\"3.9\\\", \\\"3.10\\\", \\\"3.11\\\"]\\n         os: [ubuntu-latest, macos-11, windows-latest]\\n     runs-on: ${{ matrix.os }}\\n     steps:\\n@@ -122,10 +115,10 @@ jobs:\\n         python -m pip install --upgrade pip\\n         pip install -r requirements.txt\\n         pip install -r requirements-test.txt\\n-        pip install setuptools wheel Cython\\n+        pip install setuptools wheel Cython==3.0.0\\n         python setup.py build_ext --inplace\\n     - name: Test with pytest\\n       env:\\n         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\\n       run: |\\n-        pytest --cov=box test/\\n+        pytest --cov=box -vv test/\\n\",\"diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\\nindex 2fc0ba4..eb3c1f0 100644\\n--- a/.pre-commit-config.yaml\\n+++ b/.pre-commit-config.yaml\\n@@ -29,7 +29,7 @@ repos:\\n       exclude: ^test/data/.+\\n \\n - repo: https://github.com/ambv/black\\n-  rev: 23.1.0\\n+  rev: 23.7.0\\n   hooks:\\n     - id: black\\n       args: [--config=.black.toml]\\n@@ -51,7 +51,7 @@ repos:\\n       always_run: true\\n \\n - repo: https://github.com/pre-commit/mirrors-mypy\\n-  rev: 'v1.0.1'\\n+  rev: 'v1.4.1'\\n   hooks:\\n     - id: mypy\\n       types: [python]\\n\",\"diff --git a/CHANGES.rst b/CHANGES.rst\\nindex eb7921b..20fc77f 100644\\n--- a/CHANGES.rst\\n+++ b/CHANGES.rst\\n@@ -1,6 +1,17 @@\\n Changelog\\n =========\\n \\n+Version 7.1.0\\n+-------------\\n+\\n+* Adding #255 defer ipython import for large import speed improvements (thanks to Eric Prestat)\\n+* Adding testing for Python 3.12\\n+* Fixing #253 merge_update box list merge types not populated to sub dictionaries (thanks to lei wang)\\n+* Fixing #257 Two test failures due to arguments having incorrect types (thanks to Michał Górny)\\n+* Fixing stub files to match latest code signatures\\n+* Removing #251 support for circular references in lists (thanks to d00m514y3r)\\n+* Removing support for Python 3.7 as it is EOL\\n+\\n Version 7.0.1\\n -------------\\n \\n\",\"diff --git a/test/test_box.py b/test/test_box.py\\nindex c7b51b7..d9012e9 100644\\n--- a/test/test_box.py\\n+++ b/test/test_box.py\\n@@ -588,15 +588,6 @@ def test_circular_references(self):\\n \\n         bx.to_json()\\n \\n-        circular_list = []\\n-        circular_list.append(circular_list)\\n-        bl = BoxList(circular_list)\\n-        assert bl == bl[0]\\n-        assert isinstance(bl[0], BoxList)\\n-        circular_list_2 = bl.to_list()\\n-        assert circular_list_2 == circular_list_2[0]\\n-        assert isinstance(circular_list_2, list)\\n-\\n     def test_to_multiline(self):\\n         a = BoxList([Box(a=1), Box(b=2), Box(three=5)])\\n \\n@@ -1264,6 +1255,18 @@ def test_merge_list_options(self):\\n         a.merge_update({\\\"key1\\\": {\\\"new\\\": 5}, \\\"Key 2\\\": {\\\"add_key\\\": 6}, \\\"lister\\\": [\\\"a\\\"]})\\n         assert a.lister == [\\\"a\\\"]\\n \\n+        d1 = {\\\"app\\\": {\\\"S3\\\": {\\\"S3Service\\\": [{\\\"bucket\\\": \\\"bucket001\\\"}]}}}\\n+\\n+        d2 = {\\\"app\\\": {\\\"S3\\\": {\\\"S3Service\\\": [{\\\"expirationDate\\\": \\\"2099-10-25\\\"}]}}}\\n+\\n+        box1 = Box(d1)\\n+\\n+        box1.merge_update(d2, box_merge_lists=\\\"extend\\\")\\n+\\n+        assert box1 == Box(\\n+            {\\\"app\\\": {\\\"S3\\\": {\\\"S3Service\\\": [{\\\"bucket\\\": \\\"bucket001\\\"}, {\\\"expirationDate\\\": \\\"2099-10-25\\\"}]}}}\\n+        ), box1\\n+\\n     def test_box_from_empty_yaml(self):\\n         out = Box.from_yaml(\\\"---\\\")\\n         assert out == Box()\\n@@ -1331,7 +1334,7 @@ def test_box_kwargs_should_not_be_included(self):\\n             \\\"box_dots\\\": True,\\n             \\\"modify_tuples_box\\\": True,\\n             \\\"box_intact_types\\\": (),\\n-            \\\"box_recast\\\": True,\\n+            \\\"box_recast\\\": {\\\"id\\\": int},\\n         }\\n \\n         bx = Box(**params)\\n\",\"diff --git a/test/test_box_list.py b/test/test_box_list.py\\nindex e68e521..536520f 100644\\n--- a/test/test_box_list.py\\n+++ b/test/test_box_list.py\\n@@ -5,6 +5,8 @@\\n import json\\n import os\\n import shutil\\n+import sys\\n+import platform\\n from pathlib import Path\\n from io import StringIO\\n from test.common import test_root, tmp_dir\\n@@ -220,3 +222,16 @@ def test_box_config_propagate(self):\\n                 assert item._box_config[\\\"default_box\\\"] is True\\n             elif isinstance(item, BoxList):\\n                 assert item.box_options[\\\"default_box\\\"] is True\\n+\\n+    def test_no_recursion_errors(self):\\n+        a = Box({\\\"list_of_dicts\\\": [[{\\\"example1\\\": 1}]]})\\n+        a.list_of_dicts.append([{\\\"example2\\\": 2}])\\n+        assert a[\\\"list_of_dicts\\\"][1] == [{\\\"example2\\\": 2}]\\n+\\n+    def test_no_circular_references(self):\\n+        if sys.version_info >= (3, 12) and sys.platform == \\\"win32\\\":\\n+            pytest.skip(\\\"Windows fatal exception: stack overflow on github actions\\\")\\n+        circular_list = []\\n+        circular_list.append(circular_list)\\n+        with pytest.raises(RecursionError):\\n+            BoxList(circular_list)\"]", "hints_text": ""}
